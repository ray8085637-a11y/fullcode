var ry=Object.defineProperty;var ny=(t,e,r)=>e in t?ry(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var bi=(t,e,r)=>ny(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=r(s);fetch(s.href,l)}})();var Gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ay(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function sy(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var Rf={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gs=Symbol.for("react.element"),ly=Symbol.for("react.portal"),oy=Symbol.for("react.fragment"),iy=Symbol.for("react.strict_mode"),cy=Symbol.for("react.profiler"),uy=Symbol.for("react.provider"),dy=Symbol.for("react.context"),my=Symbol.for("react.forward_ref"),fy=Symbol.for("react.suspense"),hy=Symbol.for("react.memo"),py=Symbol.for("react.lazy"),tm=Symbol.iterator;function gy(t){return t===null||typeof t!="object"?null:(t=tm&&t[tm]||t["@@iterator"],typeof t=="function"?t:null)}var If={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Of=Object.assign,Lf={};function Ra(t,e,r){this.props=t,this.context=e,this.refs=Lf,this.updater=r||If}Ra.prototype.isReactComponent={};Ra.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ra.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Mf(){}Mf.prototype=Ra.prototype;function ou(t,e,r){this.props=t,this.context=e,this.refs=Lf,this.updater=r||If}var iu=ou.prototype=new Mf;iu.constructor=ou;Of(iu,Ra.prototype);iu.isPureReactComponent=!0;var rm=Array.isArray,Ff=Object.prototype.hasOwnProperty,cu={current:null},zf={key:!0,ref:!0,__self:!0,__source:!0};function Uf(t,e,r){var n,s={},l=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(l=""+e.key),e)Ff.call(e,n)&&!zf.hasOwnProperty(n)&&(s[n]=e[n]);var i=arguments.length-2;if(i===1)s.children=r;else if(1<i){for(var u=Array(i),d=0;d<i;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(n in i=t.defaultProps,i)s[n]===void 0&&(s[n]=i[n]);return{$$typeof:Gs,type:t,key:l,ref:o,props:s,_owner:cu.current}}function yy(t,e){return{$$typeof:Gs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function uu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Gs}function vy(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var nm=/\/+/g;function Ei(t,e){return typeof t=="object"&&t!==null&&t.key!=null?vy(""+t.key):e.toString(36)}function Wl(t,e,r,n,s){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Gs:case ly:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+Ei(o,0):n,rm(s)?(r="",t!=null&&(r=t.replace(nm,"$&/")+"/"),Wl(s,e,r,"",function(d){return d})):s!=null&&(uu(s)&&(s=yy(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(nm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",rm(t))for(var i=0;i<t.length;i++){l=t[i];var u=n+Ei(l,i);o+=Wl(l,e,r,u,s)}else if(u=gy(t),typeof u=="function")for(t=u.call(t),i=0;!(l=t.next()).done;)l=l.value,u=n+Ei(l,i++),o+=Wl(l,e,r,u,s);else if(l==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function wl(t,e,r){if(t==null)return t;var n=[],s=0;return Wl(t,n,"","",function(l){return e.call(r,l,s++)}),n}function xy(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Et={current:null},Hl={transition:null},wy={ReactCurrentDispatcher:Et,ReactCurrentBatchConfig:Hl,ReactCurrentOwner:cu};function Bf(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:wl,forEach:function(t,e,r){wl(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return wl(t,function(){e++}),e},toArray:function(t){return wl(t,function(e){return e})||[]},only:function(t){if(!uu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=Ra;se.Fragment=oy;se.Profiler=cy;se.PureComponent=ou;se.StrictMode=iy;se.Suspense=fy;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wy;se.act=Bf;se.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Of({},t.props),s=t.key,l=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,o=cu.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var i=t.type.defaultProps;for(u in e)Ff.call(e,u)&&!zf.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&i!==void 0?i[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){i=Array(u);for(var d=0;d<u;d++)i[d]=arguments[d+2];n.children=i}return{$$typeof:Gs,type:t.type,key:s,ref:l,props:n,_owner:o}};se.createContext=function(t){return t={$$typeof:dy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:uy,_context:t},t.Consumer=t};se.createElement=Uf;se.createFactory=function(t){var e=Uf.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:my,render:t}};se.isValidElement=uu;se.lazy=function(t){return{$$typeof:py,_payload:{_status:-1,_result:t},_init:xy}};se.memo=function(t,e){return{$$typeof:hy,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=Hl.transition;Hl.transition={};try{t()}finally{Hl.transition=e}};se.unstable_act=Bf;se.useCallback=function(t,e){return Et.current.useCallback(t,e)};se.useContext=function(t){return Et.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return Et.current.useDeferredValue(t)};se.useEffect=function(t,e){return Et.current.useEffect(t,e)};se.useId=function(){return Et.current.useId()};se.useImperativeHandle=function(t,e,r){return Et.current.useImperativeHandle(t,e,r)};se.useInsertionEffect=function(t,e){return Et.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return Et.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return Et.current.useMemo(t,e)};se.useReducer=function(t,e,r){return Et.current.useReducer(t,e,r)};se.useRef=function(t){return Et.current.useRef(t)};se.useState=function(t){return Et.current.useState(t)};se.useSyncExternalStore=function(t,e,r){return Et.current.useSyncExternalStore(t,e,r)};se.useTransition=function(){return Et.current.useTransition()};se.version="18.3.1";Rf.exports=se;var k=Rf.exports;const a=ay(k);var Kf={exports:{}},Lt={},Vf={exports:{}},Wf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,Y){var X=z.length;z.push(Y);e:for(;0<X;){var ke=X-1>>>1,we=z[ke];if(0<s(we,Y))z[ke]=Y,z[X]=we,X=ke;else break e}}function r(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var Y=z[0],X=z.pop();if(X!==Y){z[0]=X;e:for(var ke=0,we=z.length,Kn=we>>>1;ke<Kn;){var kr=2*(ke+1)-1,za=z[kr],_r=kr+1,Re=z[_r];if(0>s(za,X))_r<we&&0>s(Re,za)?(z[ke]=Re,z[_r]=X,ke=_r):(z[ke]=za,z[kr]=X,ke=kr);else if(_r<we&&0>s(Re,X))z[ke]=Re,z[_r]=X,ke=_r;else break e}}return Y}function s(z,Y){var X=z.sortIndex-Y.sortIndex;return X!==0?X:z.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var o=Date,i=o.now();t.unstable_now=function(){return o.now()-i}}var u=[],d=[],m=1,h=null,x=3,_=!1,S=!1,A=!1,M=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var Y=r(d);Y!==null;){if(Y.callback===null)n(d);else if(Y.startTime<=z)n(d),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=r(d)}}function T(z){if(A=!1,b(z),!S)if(r(u)!==null)S=!0,Nr(j);else{var Y=r(d);Y!==null&&Ur(T,Y.startTime-z)}}function j(z,Y){S=!1,A&&(A=!1,N(L),L=-1),_=!0;var X=x;try{for(b(Y),h=r(u);h!==null&&(!(h.expirationTime>Y)||z&&!ot());){var ke=h.callback;if(typeof ke=="function"){h.callback=null,x=h.priorityLevel;var we=ke(h.expirationTime<=Y);Y=t.unstable_now(),typeof we=="function"?h.callback=we:h===r(u)&&n(u),b(Y)}else n(u);h=r(u)}if(h!==null)var Kn=!0;else{var kr=r(d);kr!==null&&Ur(T,kr.startTime-Y),Kn=!1}return Kn}finally{h=null,x=X,_=!1}}var I=!1,O=null,L=-1,Ne=5,ne=-1;function ot(){return!(t.unstable_now()-ne<Ne)}function ir(){if(O!==null){var z=t.unstable_now();ne=z;var Y=!0;try{Y=O(!0,z)}finally{Y?Er():(I=!1,O=null)}}else I=!1}var Er;if(typeof y=="function")Er=function(){y(ir)};else if(typeof MessageChannel<"u"){var Fa=new MessageChannel,Ze=Fa.port2;Fa.port1.onmessage=ir,Er=function(){Ze.postMessage(null)}}else Er=function(){M(ir,0)};function Nr(z){O=z,I||(I=!0,Er())}function Ur(z,Y){L=M(function(){z(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){S||_||(S=!0,Nr(j))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ne=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(z){switch(x){case 1:case 2:case 3:var Y=3;break;default:Y=x}var X=x;x=Y;try{return z()}finally{x=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,Y){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=x;x=z;try{return Y()}finally{x=X}},t.unstable_scheduleCallback=function(z,Y,X){var ke=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ke+X:ke):X=ke,z){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=X+we,z={id:m++,callback:Y,priorityLevel:z,startTime:X,expirationTime:we,sortIndex:-1},X>ke?(z.sortIndex=X,e(d,z),r(u)===null&&z===r(d)&&(A?(N(L),L=-1):A=!0,Ur(T,X-ke))):(z.sortIndex=we,e(u,z),S||_||(S=!0,Nr(j))),z},t.unstable_shouldYield=ot,t.unstable_wrapCallback=function(z){var Y=x;return function(){var X=x;x=Y;try{return z.apply(this,arguments)}finally{x=X}}}})(Wf);Vf.exports=Wf;var by=Vf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ey=k,Ot=by;function P(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hf=new Set,Ts={};function zn(t,e){Sa(t,e),Sa(t+"Capture",e)}function Sa(t,e){for(Ts[t]=e,t=0;t<e.length;t++)Hf.add(e[t])}var Or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ac=Object.prototype.hasOwnProperty,Ny=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,am={},sm={};function ky(t){return ac.call(sm,t)?!0:ac.call(am,t)?!1:Ny.test(t)?sm[t]=!0:(am[t]=!0,!1)}function _y(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Sy(t,e,r,n){if(e===null||typeof e>"u"||_y(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nt(t,e,r,n,s,l,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=l,this.removeEmptyString=o}var lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){lt[t]=new Nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];lt[e]=new Nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){lt[t]=new Nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){lt[t]=new Nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){lt[t]=new Nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){lt[t]=new Nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){lt[t]=new Nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){lt[t]=new Nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){lt[t]=new Nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var du=/[\-:]([a-z])/g;function mu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(du,mu);lt[e]=new Nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(du,mu);lt[e]=new Nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(du,mu);lt[e]=new Nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){lt[t]=new Nt(t,1,!1,t.toLowerCase(),null,!1,!1)});lt.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){lt[t]=new Nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function fu(t,e,r,n){var s=lt.hasOwnProperty(e)?lt[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Sy(e,r,s,n)&&(r=null),n||s===null?ky(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var zr=Ey.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bl=Symbol.for("react.element"),la=Symbol.for("react.portal"),oa=Symbol.for("react.fragment"),hu=Symbol.for("react.strict_mode"),sc=Symbol.for("react.profiler"),Gf=Symbol.for("react.provider"),qf=Symbol.for("react.context"),pu=Symbol.for("react.forward_ref"),lc=Symbol.for("react.suspense"),oc=Symbol.for("react.suspense_list"),gu=Symbol.for("react.memo"),Yr=Symbol.for("react.lazy"),Yf=Symbol.for("react.offscreen"),lm=Symbol.iterator;function Za(t){return t===null||typeof t!="object"?null:(t=lm&&t[lm]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Object.assign,Ni;function is(t){if(Ni===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Ni=e&&e[1]||""}return`
`+Ni+t}var ki=!1;function _i(t,e){if(!t||ki)return"";ki=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),l=n.stack.split(`
`),o=s.length-1,i=l.length-1;1<=o&&0<=i&&s[o]!==l[i];)i--;for(;1<=o&&0<=i;o--,i--)if(s[o]!==l[i]){if(o!==1||i!==1)do if(o--,i--,0>i||s[o]!==l[i]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=i);break}}}finally{ki=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?is(t):""}function Cy(t){switch(t.tag){case 5:return is(t.type);case 16:return is("Lazy");case 13:return is("Suspense");case 19:return is("SuspenseList");case 0:case 2:case 15:return t=_i(t.type,!1),t;case 11:return t=_i(t.type.render,!1),t;case 1:return t=_i(t.type,!0),t;default:return""}}function ic(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case oa:return"Fragment";case la:return"Portal";case sc:return"Profiler";case hu:return"StrictMode";case lc:return"Suspense";case oc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case qf:return(t.displayName||"Context")+".Consumer";case Gf:return(t._context.displayName||"Context")+".Provider";case pu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gu:return e=t.displayName||null,e!==null?e:ic(t.type)||"Memo";case Yr:e=t._payload,t=t._init;try{return ic(t(e))}catch{}}return null}function Dy(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ic(e);case 8:return e===hu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function dn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Qf(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ty(t){var e=Qf(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,l=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,l.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function El(t){t._valueTracker||(t._valueTracker=Ty(t))}function Jf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Qf(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function so(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function cc(t,e){var r=e.checked;return Ce({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function om(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=dn(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Xf(t,e){e=e.checked,e!=null&&fu(t,"checked",e,!1)}function uc(t,e){Xf(t,e);var r=dn(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?dc(t,e.type,r):e.hasOwnProperty("defaultValue")&&dc(t,e.type,dn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function im(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function dc(t,e,r){(e!=="number"||so(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var cs=Array.isArray;function wa(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+dn(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function mc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(P(91));return Ce({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function cm(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(P(92));if(cs(r)){if(1<r.length)throw Error(P(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:dn(r)}}function Zf(t,e){var r=dn(e.value),n=dn(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function um(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function e0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?e0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Nl,t0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Nl=Nl||document.createElement("div"),Nl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Nl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function As(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var gs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ay=["Webkit","ms","Moz","O"];Object.keys(gs).forEach(function(t){Ay.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),gs[e]=gs[t]})});function r0(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||gs.hasOwnProperty(t)&&gs[t]?(""+e).trim():e+"px"}function n0(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=r0(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var $y=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hc(t,e){if(e){if($y[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(P(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(P(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(P(61))}if(e.style!=null&&typeof e.style!="object")throw Error(P(62))}}function pc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gc=null;function yu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yc=null,ba=null,Ea=null;function dm(t){if(t=Qs(t)){if(typeof yc!="function")throw Error(P(280));var e=t.stateNode;e&&(e=Oo(e),yc(t.stateNode,t.type,e))}}function a0(t){ba?Ea?Ea.push(t):Ea=[t]:ba=t}function s0(){if(ba){var t=ba,e=Ea;if(Ea=ba=null,dm(t),e)for(t=0;t<e.length;t++)dm(e[t])}}function l0(t,e){return t(e)}function o0(){}var Si=!1;function i0(t,e,r){if(Si)return t(e,r);Si=!0;try{return l0(t,e,r)}finally{Si=!1,(ba!==null||Ea!==null)&&(o0(),s0())}}function $s(t,e){var r=t.stateNode;if(r===null)return null;var n=Oo(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(P(231,e,typeof r));return r}var vc=!1;if(Or)try{var es={};Object.defineProperty(es,"passive",{get:function(){vc=!0}}),window.addEventListener("test",es,es),window.removeEventListener("test",es,es)}catch{vc=!1}function Py(t,e,r,n,s,l,o,i,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(m){this.onError(m)}}var ys=!1,lo=null,oo=!1,xc=null,jy={onError:function(t){ys=!0,lo=t}};function Ry(t,e,r,n,s,l,o,i,u){ys=!1,lo=null,Py.apply(jy,arguments)}function Iy(t,e,r,n,s,l,o,i,u){if(Ry.apply(this,arguments),ys){if(ys){var d=lo;ys=!1,lo=null}else throw Error(P(198));oo||(oo=!0,xc=d)}}function Un(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function c0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mm(t){if(Un(t)!==t)throw Error(P(188))}function Oy(t){var e=t.alternate;if(!e){if(e=Un(t),e===null)throw Error(P(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var l=s.alternate;if(l===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===r)return mm(s),t;if(l===n)return mm(s),e;l=l.sibling}throw Error(P(188))}if(r.return!==n.return)r=s,n=l;else{for(var o=!1,i=s.child;i;){if(i===r){o=!0,r=s,n=l;break}if(i===n){o=!0,n=s,r=l;break}i=i.sibling}if(!o){for(i=l.child;i;){if(i===r){o=!0,r=l,n=s;break}if(i===n){o=!0,n=l,r=s;break}i=i.sibling}if(!o)throw Error(P(189))}}if(r.alternate!==n)throw Error(P(190))}if(r.tag!==3)throw Error(P(188));return r.stateNode.current===r?t:e}function u0(t){return t=Oy(t),t!==null?d0(t):null}function d0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=d0(t);if(e!==null)return e;t=t.sibling}return null}var m0=Ot.unstable_scheduleCallback,fm=Ot.unstable_cancelCallback,Ly=Ot.unstable_shouldYield,My=Ot.unstable_requestPaint,Pe=Ot.unstable_now,Fy=Ot.unstable_getCurrentPriorityLevel,vu=Ot.unstable_ImmediatePriority,f0=Ot.unstable_UserBlockingPriority,io=Ot.unstable_NormalPriority,zy=Ot.unstable_LowPriority,h0=Ot.unstable_IdlePriority,Po=null,wr=null;function Uy(t){if(wr&&typeof wr.onCommitFiberRoot=="function")try{wr.onCommitFiberRoot(Po,t,void 0,(t.current.flags&128)===128)}catch{}}var sr=Math.clz32?Math.clz32:Vy,By=Math.log,Ky=Math.LN2;function Vy(t){return t>>>=0,t===0?32:31-(By(t)/Ky|0)|0}var kl=64,_l=4194304;function us(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function co(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,l=t.pingedLanes,o=r&268435455;if(o!==0){var i=o&~s;i!==0?n=us(i):(l&=o,l!==0&&(n=us(l)))}else o=r&~s,o!==0?n=us(o):l!==0&&(n=us(l));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,l=e&-e,s>=l||s===16&&(l&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-sr(e),s=1<<r,n|=t[r],e&=~s;return n}function Wy(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hy(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,l=t.pendingLanes;0<l;){var o=31-sr(l),i=1<<o,u=s[o];u===-1?(!(i&r)||i&n)&&(s[o]=Wy(i,e)):u<=e&&(t.expiredLanes|=i),l&=~i}}function wc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function p0(){var t=kl;return kl<<=1,!(kl&4194240)&&(kl=64),t}function Ci(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function qs(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-sr(e),t[e]=r}function Gy(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-sr(r),l=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~l}}function xu(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-sr(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var me=0;function g0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var y0,wu,v0,x0,w0,bc=!1,Sl=[],rn=null,nn=null,an=null,Ps=new Map,js=new Map,Jr=[],qy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hm(t,e){switch(t){case"focusin":case"focusout":rn=null;break;case"dragenter":case"dragleave":nn=null;break;case"mouseover":case"mouseout":an=null;break;case"pointerover":case"pointerout":Ps.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":js.delete(e.pointerId)}}function ts(t,e,r,n,s,l){return t===null||t.nativeEvent!==l?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[s]},e!==null&&(e=Qs(e),e!==null&&wu(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Yy(t,e,r,n,s){switch(e){case"focusin":return rn=ts(rn,t,e,r,n,s),!0;case"dragenter":return nn=ts(nn,t,e,r,n,s),!0;case"mouseover":return an=ts(an,t,e,r,n,s),!0;case"pointerover":var l=s.pointerId;return Ps.set(l,ts(Ps.get(l)||null,t,e,r,n,s)),!0;case"gotpointercapture":return l=s.pointerId,js.set(l,ts(js.get(l)||null,t,e,r,n,s)),!0}return!1}function b0(t){var e=An(t.target);if(e!==null){var r=Un(e);if(r!==null){if(e=r.tag,e===13){if(e=c0(r),e!==null){t.blockedOn=e,w0(t.priority,function(){v0(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Ec(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);gc=n,r.target.dispatchEvent(n),gc=null}else return e=Qs(r),e!==null&&wu(e),t.blockedOn=r,!1;e.shift()}return!0}function pm(t,e,r){Gl(t)&&r.delete(e)}function Qy(){bc=!1,rn!==null&&Gl(rn)&&(rn=null),nn!==null&&Gl(nn)&&(nn=null),an!==null&&Gl(an)&&(an=null),Ps.forEach(pm),js.forEach(pm)}function rs(t,e){t.blockedOn===e&&(t.blockedOn=null,bc||(bc=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,Qy)))}function Rs(t){function e(s){return rs(s,t)}if(0<Sl.length){rs(Sl[0],t);for(var r=1;r<Sl.length;r++){var n=Sl[r];n.blockedOn===t&&(n.blockedOn=null)}}for(rn!==null&&rs(rn,t),nn!==null&&rs(nn,t),an!==null&&rs(an,t),Ps.forEach(e),js.forEach(e),r=0;r<Jr.length;r++)n=Jr[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Jr.length&&(r=Jr[0],r.blockedOn===null);)b0(r),r.blockedOn===null&&Jr.shift()}var Na=zr.ReactCurrentBatchConfig,uo=!0;function Jy(t,e,r,n){var s=me,l=Na.transition;Na.transition=null;try{me=1,bu(t,e,r,n)}finally{me=s,Na.transition=l}}function Xy(t,e,r,n){var s=me,l=Na.transition;Na.transition=null;try{me=4,bu(t,e,r,n)}finally{me=s,Na.transition=l}}function bu(t,e,r,n){if(uo){var s=Ec(t,e,r,n);if(s===null)Li(t,e,n,mo,r),hm(t,n);else if(Yy(s,t,e,r,n))n.stopPropagation();else if(hm(t,n),e&4&&-1<qy.indexOf(t)){for(;s!==null;){var l=Qs(s);if(l!==null&&y0(l),l=Ec(t,e,r,n),l===null&&Li(t,e,n,mo,r),l===s)break;s=l}s!==null&&n.stopPropagation()}else Li(t,e,n,null,r)}}var mo=null;function Ec(t,e,r,n){if(mo=null,t=yu(n),t=An(t),t!==null)if(e=Un(t),e===null)t=null;else if(r=e.tag,r===13){if(t=c0(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return mo=t,null}function E0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fy()){case vu:return 1;case f0:return 4;case io:case zy:return 16;case h0:return 536870912;default:return 16}default:return 16}}var en=null,Eu=null,ql=null;function N0(){if(ql)return ql;var t,e=Eu,r=e.length,n,s="value"in en?en.value:en.textContent,l=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[l-n];n++);return ql=s.slice(t,1<n?1-n:void 0)}function Yl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Cl(){return!0}function gm(){return!1}function Mt(t){function e(r,n,s,l,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var i in t)t.hasOwnProperty(i)&&(r=t[i],this[i]=r?r(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Cl:gm,this.isPropagationStopped=gm,this}return Ce(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Cl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Cl)},persist:function(){},isPersistent:Cl}),e}var Ia={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nu=Mt(Ia),Ys=Ce({},Ia,{view:0,detail:0}),Zy=Mt(Ys),Di,Ti,ns,jo=Ce({},Ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ku,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ns&&(ns&&t.type==="mousemove"?(Di=t.screenX-ns.screenX,Ti=t.screenY-ns.screenY):Ti=Di=0,ns=t),Di)},movementY:function(t){return"movementY"in t?t.movementY:Ti}}),ym=Mt(jo),ev=Ce({},jo,{dataTransfer:0}),tv=Mt(ev),rv=Ce({},Ys,{relatedTarget:0}),Ai=Mt(rv),nv=Ce({},Ia,{animationName:0,elapsedTime:0,pseudoElement:0}),av=Mt(nv),sv=Ce({},Ia,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lv=Mt(sv),ov=Ce({},Ia,{data:0}),vm=Mt(ov),iv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dv(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=uv[t])?!!e[t]:!1}function ku(){return dv}var mv=Ce({},Ys,{key:function(t){if(t.key){var e=iv[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Yl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ku,charCode:function(t){return t.type==="keypress"?Yl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fv=Mt(mv),hv=Ce({},jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xm=Mt(hv),pv=Ce({},Ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ku}),gv=Mt(pv),yv=Ce({},Ia,{propertyName:0,elapsedTime:0,pseudoElement:0}),vv=Mt(yv),xv=Ce({},jo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wv=Mt(xv),bv=[9,13,27,32],_u=Or&&"CompositionEvent"in window,vs=null;Or&&"documentMode"in document&&(vs=document.documentMode);var Ev=Or&&"TextEvent"in window&&!vs,k0=Or&&(!_u||vs&&8<vs&&11>=vs),wm=" ",bm=!1;function _0(t,e){switch(t){case"keyup":return bv.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function S0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ia=!1;function Nv(t,e){switch(t){case"compositionend":return S0(e);case"keypress":return e.which!==32?null:(bm=!0,wm);case"textInput":return t=e.data,t===wm&&bm?null:t;default:return null}}function kv(t,e){if(ia)return t==="compositionend"||!_u&&_0(t,e)?(t=N0(),ql=Eu=en=null,ia=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return k0&&e.locale!=="ko"?null:e.data;default:return null}}var _v={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Em(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_v[t.type]:e==="textarea"}function C0(t,e,r,n){a0(n),e=fo(e,"onChange"),0<e.length&&(r=new Nu("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var xs=null,Is=null;function Sv(t){M0(t,0)}function Ro(t){var e=da(t);if(Jf(e))return t}function Cv(t,e){if(t==="change")return e}var D0=!1;if(Or){var $i;if(Or){var Pi="oninput"in document;if(!Pi){var Nm=document.createElement("div");Nm.setAttribute("oninput","return;"),Pi=typeof Nm.oninput=="function"}$i=Pi}else $i=!1;D0=$i&&(!document.documentMode||9<document.documentMode)}function km(){xs&&(xs.detachEvent("onpropertychange",T0),Is=xs=null)}function T0(t){if(t.propertyName==="value"&&Ro(Is)){var e=[];C0(e,Is,t,yu(t)),i0(Sv,e)}}function Dv(t,e,r){t==="focusin"?(km(),xs=e,Is=r,xs.attachEvent("onpropertychange",T0)):t==="focusout"&&km()}function Tv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ro(Is)}function Av(t,e){if(t==="click")return Ro(e)}function $v(t,e){if(t==="input"||t==="change")return Ro(e)}function Pv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var or=typeof Object.is=="function"?Object.is:Pv;function Os(t,e){if(or(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!ac.call(e,s)||!or(t[s],e[s]))return!1}return!0}function _m(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sm(t,e){var r=_m(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=_m(r)}}function A0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?A0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $0(){for(var t=window,e=so();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=so(t.document)}return e}function Su(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function jv(t){var e=$0(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&A0(r.ownerDocument.documentElement,r)){if(n!==null&&Su(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,l=Math.min(n.start,s);n=n.end===void 0?l:Math.min(n.end,s),!t.extend&&l>n&&(s=n,n=l,l=s),s=Sm(r,l);var o=Sm(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),l>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Rv=Or&&"documentMode"in document&&11>=document.documentMode,ca=null,Nc=null,ws=null,kc=!1;function Cm(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;kc||ca==null||ca!==so(n)||(n=ca,"selectionStart"in n&&Su(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ws&&Os(ws,n)||(ws=n,n=fo(Nc,"onSelect"),0<n.length&&(e=new Nu("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=ca)))}function Dl(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var ua={animationend:Dl("Animation","AnimationEnd"),animationiteration:Dl("Animation","AnimationIteration"),animationstart:Dl("Animation","AnimationStart"),transitionend:Dl("Transition","TransitionEnd")},ji={},P0={};Or&&(P0=document.createElement("div").style,"AnimationEvent"in window||(delete ua.animationend.animation,delete ua.animationiteration.animation,delete ua.animationstart.animation),"TransitionEvent"in window||delete ua.transitionend.transition);function Io(t){if(ji[t])return ji[t];if(!ua[t])return t;var e=ua[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in P0)return ji[t]=e[r];return t}var j0=Io("animationend"),R0=Io("animationiteration"),I0=Io("animationstart"),O0=Io("transitionend"),L0=new Map,Dm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fn(t,e){L0.set(t,e),zn(e,[t])}for(var Ri=0;Ri<Dm.length;Ri++){var Ii=Dm[Ri],Iv=Ii.toLowerCase(),Ov=Ii[0].toUpperCase()+Ii.slice(1);fn(Iv,"on"+Ov)}fn(j0,"onAnimationEnd");fn(R0,"onAnimationIteration");fn(I0,"onAnimationStart");fn("dblclick","onDoubleClick");fn("focusin","onFocus");fn("focusout","onBlur");fn(O0,"onTransitionEnd");Sa("onMouseEnter",["mouseout","mouseover"]);Sa("onMouseLeave",["mouseout","mouseover"]);Sa("onPointerEnter",["pointerout","pointerover"]);Sa("onPointerLeave",["pointerout","pointerover"]);zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zn("onBeforeInput",["compositionend","keypress","textInput","paste"]);zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ds="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lv=new Set("cancel close invalid load scroll toggle".split(" ").concat(ds));function Tm(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Iy(n,e,void 0,t),t.currentTarget=null}function M0(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var l=void 0;if(e)for(var o=n.length-1;0<=o;o--){var i=n[o],u=i.instance,d=i.currentTarget;if(i=i.listener,u!==l&&s.isPropagationStopped())break e;Tm(s,i,d),l=u}else for(o=0;o<n.length;o++){if(i=n[o],u=i.instance,d=i.currentTarget,i=i.listener,u!==l&&s.isPropagationStopped())break e;Tm(s,i,d),l=u}}}if(oo)throw t=xc,oo=!1,xc=null,t}function ve(t,e){var r=e[Tc];r===void 0&&(r=e[Tc]=new Set);var n=t+"__bubble";r.has(n)||(F0(e,t,2,!1),r.add(n))}function Oi(t,e,r){var n=0;e&&(n|=4),F0(r,t,n,e)}var Tl="_reactListening"+Math.random().toString(36).slice(2);function Ls(t){if(!t[Tl]){t[Tl]=!0,Hf.forEach(function(r){r!=="selectionchange"&&(Lv.has(r)||Oi(r,!1,t),Oi(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Tl]||(e[Tl]=!0,Oi("selectionchange",!1,e))}}function F0(t,e,r,n){switch(E0(e)){case 1:var s=Jy;break;case 4:s=Xy;break;default:s=bu}r=s.bind(null,e,r,t),s=void 0,!vc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Li(t,e,r,n,s){var l=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var i=n.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;i!==null;){if(o=An(i),o===null)return;if(u=o.tag,u===5||u===6){n=l=o;continue e}i=i.parentNode}}n=n.return}i0(function(){var d=l,m=yu(r),h=[];e:{var x=L0.get(t);if(x!==void 0){var _=Nu,S=t;switch(t){case"keypress":if(Yl(r)===0)break e;case"keydown":case"keyup":_=fv;break;case"focusin":S="focus",_=Ai;break;case"focusout":S="blur",_=Ai;break;case"beforeblur":case"afterblur":_=Ai;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=ym;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=tv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=gv;break;case j0:case R0:case I0:_=av;break;case O0:_=vv;break;case"scroll":_=Zy;break;case"wheel":_=wv;break;case"copy":case"cut":case"paste":_=lv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=xm}var A=(e&4)!==0,M=!A&&t==="scroll",N=A?x!==null?x+"Capture":null:x;A=[];for(var y=d,b;y!==null;){b=y;var T=b.stateNode;if(b.tag===5&&T!==null&&(b=T,N!==null&&(T=$s(y,N),T!=null&&A.push(Ms(y,T,b)))),M)break;y=y.return}0<A.length&&(x=new _(x,S,null,r,m),h.push({event:x,listeners:A}))}}if(!(e&7)){e:{if(x=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",x&&r!==gc&&(S=r.relatedTarget||r.fromElement)&&(An(S)||S[Lr]))break e;if((_||x)&&(x=m.window===m?m:(x=m.ownerDocument)?x.defaultView||x.parentWindow:window,_?(S=r.relatedTarget||r.toElement,_=d,S=S?An(S):null,S!==null&&(M=Un(S),S!==M||S.tag!==5&&S.tag!==6)&&(S=null)):(_=null,S=d),_!==S)){if(A=ym,T="onMouseLeave",N="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(A=xm,T="onPointerLeave",N="onPointerEnter",y="pointer"),M=_==null?x:da(_),b=S==null?x:da(S),x=new A(T,y+"leave",_,r,m),x.target=M,x.relatedTarget=b,T=null,An(m)===d&&(A=new A(N,y+"enter",S,r,m),A.target=b,A.relatedTarget=M,T=A),M=T,_&&S)t:{for(A=_,N=S,y=0,b=A;b;b=Xn(b))y++;for(b=0,T=N;T;T=Xn(T))b++;for(;0<y-b;)A=Xn(A),y--;for(;0<b-y;)N=Xn(N),b--;for(;y--;){if(A===N||N!==null&&A===N.alternate)break t;A=Xn(A),N=Xn(N)}A=null}else A=null;_!==null&&Am(h,x,_,A,!1),S!==null&&M!==null&&Am(h,M,S,A,!0)}}e:{if(x=d?da(d):window,_=x.nodeName&&x.nodeName.toLowerCase(),_==="select"||_==="input"&&x.type==="file")var j=Cv;else if(Em(x))if(D0)j=$v;else{j=Tv;var I=Dv}else(_=x.nodeName)&&_.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(j=Av);if(j&&(j=j(t,d))){C0(h,j,r,m);break e}I&&I(t,x,d),t==="focusout"&&(I=x._wrapperState)&&I.controlled&&x.type==="number"&&dc(x,"number",x.value)}switch(I=d?da(d):window,t){case"focusin":(Em(I)||I.contentEditable==="true")&&(ca=I,Nc=d,ws=null);break;case"focusout":ws=Nc=ca=null;break;case"mousedown":kc=!0;break;case"contextmenu":case"mouseup":case"dragend":kc=!1,Cm(h,r,m);break;case"selectionchange":if(Rv)break;case"keydown":case"keyup":Cm(h,r,m)}var O;if(_u)e:{switch(t){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else ia?_0(t,r)&&(L="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(L="onCompositionStart");L&&(k0&&r.locale!=="ko"&&(ia||L!=="onCompositionStart"?L==="onCompositionEnd"&&ia&&(O=N0()):(en=m,Eu="value"in en?en.value:en.textContent,ia=!0)),I=fo(d,L),0<I.length&&(L=new vm(L,t,null,r,m),h.push({event:L,listeners:I}),O?L.data=O:(O=S0(r),O!==null&&(L.data=O)))),(O=Ev?Nv(t,r):kv(t,r))&&(d=fo(d,"onBeforeInput"),0<d.length&&(m=new vm("onBeforeInput","beforeinput",null,r,m),h.push({event:m,listeners:d}),m.data=O))}M0(h,e)})}function Ms(t,e,r){return{instance:t,listener:e,currentTarget:r}}function fo(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=$s(t,r),l!=null&&n.unshift(Ms(t,l,s)),l=$s(t,e),l!=null&&n.push(Ms(t,l,s))),t=t.return}return n}function Xn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Am(t,e,r,n,s){for(var l=e._reactName,o=[];r!==null&&r!==n;){var i=r,u=i.alternate,d=i.stateNode;if(u!==null&&u===n)break;i.tag===5&&d!==null&&(i=d,s?(u=$s(r,l),u!=null&&o.unshift(Ms(r,u,i))):s||(u=$s(r,l),u!=null&&o.push(Ms(r,u,i)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var Mv=/\r\n?/g,Fv=/\u0000|\uFFFD/g;function $m(t){return(typeof t=="string"?t:""+t).replace(Mv,`
`).replace(Fv,"")}function Al(t,e,r){if(e=$m(e),$m(t)!==e&&r)throw Error(P(425))}function ho(){}var _c=null,Sc=null;function Cc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dc=typeof setTimeout=="function"?setTimeout:void 0,zv=typeof clearTimeout=="function"?clearTimeout:void 0,Pm=typeof Promise=="function"?Promise:void 0,Uv=typeof queueMicrotask=="function"?queueMicrotask:typeof Pm<"u"?function(t){return Pm.resolve(null).then(t).catch(Bv)}:Dc;function Bv(t){setTimeout(function(){throw t})}function Mi(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Rs(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Rs(e)}function sn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function jm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Oa=Math.random().toString(36).slice(2),xr="__reactFiber$"+Oa,Fs="__reactProps$"+Oa,Lr="__reactContainer$"+Oa,Tc="__reactEvents$"+Oa,Kv="__reactListeners$"+Oa,Vv="__reactHandles$"+Oa;function An(t){var e=t[xr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Lr]||r[xr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=jm(t);t!==null;){if(r=t[xr])return r;t=jm(t)}return e}t=r,r=t.parentNode}return null}function Qs(t){return t=t[xr]||t[Lr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function da(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(P(33))}function Oo(t){return t[Fs]||null}var Ac=[],ma=-1;function hn(t){return{current:t}}function xe(t){0>ma||(t.current=Ac[ma],Ac[ma]=null,ma--)}function ge(t,e){ma++,Ac[ma]=t.current,t.current=e}var mn={},ht=hn(mn),Tt=hn(!1),In=mn;function Ca(t,e){var r=t.type.contextTypes;if(!r)return mn;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in r)s[l]=e[l];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function At(t){return t=t.childContextTypes,t!=null}function po(){xe(Tt),xe(ht)}function Rm(t,e,r){if(ht.current!==mn)throw Error(P(168));ge(ht,e),ge(Tt,r)}function z0(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(P(108,Dy(t)||"Unknown",s));return Ce({},r,n)}function go(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||mn,In=ht.current,ge(ht,t),ge(Tt,Tt.current),!0}function Im(t,e,r){var n=t.stateNode;if(!n)throw Error(P(169));r?(t=z0(t,e,In),n.__reactInternalMemoizedMergedChildContext=t,xe(Tt),xe(ht),ge(ht,t)):xe(Tt),ge(Tt,r)}var Pr=null,Lo=!1,Fi=!1;function U0(t){Pr===null?Pr=[t]:Pr.push(t)}function Wv(t){Lo=!0,U0(t)}function pn(){if(!Fi&&Pr!==null){Fi=!0;var t=0,e=me;try{var r=Pr;for(me=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Pr=null,Lo=!1}catch(s){throw Pr!==null&&(Pr=Pr.slice(t+1)),m0(vu,pn),s}finally{me=e,Fi=!1}}return null}var fa=[],ha=0,yo=null,vo=0,Kt=[],Vt=0,On=null,jr=1,Rr="";function Sn(t,e){fa[ha++]=vo,fa[ha++]=yo,yo=t,vo=e}function B0(t,e,r){Kt[Vt++]=jr,Kt[Vt++]=Rr,Kt[Vt++]=On,On=t;var n=jr;t=Rr;var s=32-sr(n)-1;n&=~(1<<s),r+=1;var l=32-sr(e)+s;if(30<l){var o=s-s%5;l=(n&(1<<o)-1).toString(32),n>>=o,s-=o,jr=1<<32-sr(e)+s|r<<s|n,Rr=l+t}else jr=1<<l|r<<s|n,Rr=t}function Cu(t){t.return!==null&&(Sn(t,1),B0(t,1,0))}function Du(t){for(;t===yo;)yo=fa[--ha],fa[ha]=null,vo=fa[--ha],fa[ha]=null;for(;t===On;)On=Kt[--Vt],Kt[Vt]=null,Rr=Kt[--Vt],Kt[Vt]=null,jr=Kt[--Vt],Kt[Vt]=null}var It=null,Rt=null,Ee=!1,ar=null;function K0(t,e){var r=Wt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Om(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,It=t,Rt=sn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,It=t,Rt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=On!==null?{id:jr,overflow:Rr}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Wt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,It=t,Rt=null,!0):!1;default:return!1}}function $c(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pc(t){if(Ee){var e=Rt;if(e){var r=e;if(!Om(t,e)){if($c(t))throw Error(P(418));e=sn(r.nextSibling);var n=It;e&&Om(t,e)?K0(n,r):(t.flags=t.flags&-4097|2,Ee=!1,It=t)}}else{if($c(t))throw Error(P(418));t.flags=t.flags&-4097|2,Ee=!1,It=t}}}function Lm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;It=t}function $l(t){if(t!==It)return!1;if(!Ee)return Lm(t),Ee=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Cc(t.type,t.memoizedProps)),e&&(e=Rt)){if($c(t))throw V0(),Error(P(418));for(;e;)K0(t,e),e=sn(e.nextSibling)}if(Lm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(P(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Rt=sn(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Rt=null}}else Rt=It?sn(t.stateNode.nextSibling):null;return!0}function V0(){for(var t=Rt;t;)t=sn(t.nextSibling)}function Da(){Rt=It=null,Ee=!1}function Tu(t){ar===null?ar=[t]:ar.push(t)}var Hv=zr.ReactCurrentBatchConfig;function as(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(P(309));var n=r.stateNode}if(!n)throw Error(P(147,t));var s=n,l=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(o){var i=s.refs;o===null?delete i[l]:i[l]=o},e._stringRef=l,e)}if(typeof t!="string")throw Error(P(284));if(!r._owner)throw Error(P(290,t))}return t}function Pl(t,e){throw t=Object.prototype.toString.call(e),Error(P(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Mm(t){var e=t._init;return e(t._payload)}function W0(t){function e(N,y){if(t){var b=N.deletions;b===null?(N.deletions=[y],N.flags|=16):b.push(y)}}function r(N,y){if(!t)return null;for(;y!==null;)e(N,y),y=y.sibling;return null}function n(N,y){for(N=new Map;y!==null;)y.key!==null?N.set(y.key,y):N.set(y.index,y),y=y.sibling;return N}function s(N,y){return N=un(N,y),N.index=0,N.sibling=null,N}function l(N,y,b){return N.index=b,t?(b=N.alternate,b!==null?(b=b.index,b<y?(N.flags|=2,y):b):(N.flags|=2,y)):(N.flags|=1048576,y)}function o(N){return t&&N.alternate===null&&(N.flags|=2),N}function i(N,y,b,T){return y===null||y.tag!==6?(y=Hi(b,N.mode,T),y.return=N,y):(y=s(y,b),y.return=N,y)}function u(N,y,b,T){var j=b.type;return j===oa?m(N,y,b.props.children,T,b.key):y!==null&&(y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Yr&&Mm(j)===y.type)?(T=s(y,b.props),T.ref=as(N,y,b),T.return=N,T):(T=ro(b.type,b.key,b.props,null,N.mode,T),T.ref=as(N,y,b),T.return=N,T)}function d(N,y,b,T){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=Gi(b,N.mode,T),y.return=N,y):(y=s(y,b.children||[]),y.return=N,y)}function m(N,y,b,T,j){return y===null||y.tag!==7?(y=Rn(b,N.mode,T,j),y.return=N,y):(y=s(y,b),y.return=N,y)}function h(N,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Hi(""+y,N.mode,b),y.return=N,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case bl:return b=ro(y.type,y.key,y.props,null,N.mode,b),b.ref=as(N,null,y),b.return=N,b;case la:return y=Gi(y,N.mode,b),y.return=N,y;case Yr:var T=y._init;return h(N,T(y._payload),b)}if(cs(y)||Za(y))return y=Rn(y,N.mode,b,null),y.return=N,y;Pl(N,y)}return null}function x(N,y,b,T){var j=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return j!==null?null:i(N,y,""+b,T);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case bl:return b.key===j?u(N,y,b,T):null;case la:return b.key===j?d(N,y,b,T):null;case Yr:return j=b._init,x(N,y,j(b._payload),T)}if(cs(b)||Za(b))return j!==null?null:m(N,y,b,T,null);Pl(N,b)}return null}function _(N,y,b,T,j){if(typeof T=="string"&&T!==""||typeof T=="number")return N=N.get(b)||null,i(y,N,""+T,j);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case bl:return N=N.get(T.key===null?b:T.key)||null,u(y,N,T,j);case la:return N=N.get(T.key===null?b:T.key)||null,d(y,N,T,j);case Yr:var I=T._init;return _(N,y,b,I(T._payload),j)}if(cs(T)||Za(T))return N=N.get(b)||null,m(y,N,T,j,null);Pl(y,T)}return null}function S(N,y,b,T){for(var j=null,I=null,O=y,L=y=0,Ne=null;O!==null&&L<b.length;L++){O.index>L?(Ne=O,O=null):Ne=O.sibling;var ne=x(N,O,b[L],T);if(ne===null){O===null&&(O=Ne);break}t&&O&&ne.alternate===null&&e(N,O),y=l(ne,y,L),I===null?j=ne:I.sibling=ne,I=ne,O=Ne}if(L===b.length)return r(N,O),Ee&&Sn(N,L),j;if(O===null){for(;L<b.length;L++)O=h(N,b[L],T),O!==null&&(y=l(O,y,L),I===null?j=O:I.sibling=O,I=O);return Ee&&Sn(N,L),j}for(O=n(N,O);L<b.length;L++)Ne=_(O,N,L,b[L],T),Ne!==null&&(t&&Ne.alternate!==null&&O.delete(Ne.key===null?L:Ne.key),y=l(Ne,y,L),I===null?j=Ne:I.sibling=Ne,I=Ne);return t&&O.forEach(function(ot){return e(N,ot)}),Ee&&Sn(N,L),j}function A(N,y,b,T){var j=Za(b);if(typeof j!="function")throw Error(P(150));if(b=j.call(b),b==null)throw Error(P(151));for(var I=j=null,O=y,L=y=0,Ne=null,ne=b.next();O!==null&&!ne.done;L++,ne=b.next()){O.index>L?(Ne=O,O=null):Ne=O.sibling;var ot=x(N,O,ne.value,T);if(ot===null){O===null&&(O=Ne);break}t&&O&&ot.alternate===null&&e(N,O),y=l(ot,y,L),I===null?j=ot:I.sibling=ot,I=ot,O=Ne}if(ne.done)return r(N,O),Ee&&Sn(N,L),j;if(O===null){for(;!ne.done;L++,ne=b.next())ne=h(N,ne.value,T),ne!==null&&(y=l(ne,y,L),I===null?j=ne:I.sibling=ne,I=ne);return Ee&&Sn(N,L),j}for(O=n(N,O);!ne.done;L++,ne=b.next())ne=_(O,N,L,ne.value,T),ne!==null&&(t&&ne.alternate!==null&&O.delete(ne.key===null?L:ne.key),y=l(ne,y,L),I===null?j=ne:I.sibling=ne,I=ne);return t&&O.forEach(function(ir){return e(N,ir)}),Ee&&Sn(N,L),j}function M(N,y,b,T){if(typeof b=="object"&&b!==null&&b.type===oa&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case bl:e:{for(var j=b.key,I=y;I!==null;){if(I.key===j){if(j=b.type,j===oa){if(I.tag===7){r(N,I.sibling),y=s(I,b.props.children),y.return=N,N=y;break e}}else if(I.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Yr&&Mm(j)===I.type){r(N,I.sibling),y=s(I,b.props),y.ref=as(N,I,b),y.return=N,N=y;break e}r(N,I);break}else e(N,I);I=I.sibling}b.type===oa?(y=Rn(b.props.children,N.mode,T,b.key),y.return=N,N=y):(T=ro(b.type,b.key,b.props,null,N.mode,T),T.ref=as(N,y,b),T.return=N,N=T)}return o(N);case la:e:{for(I=b.key;y!==null;){if(y.key===I)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){r(N,y.sibling),y=s(y,b.children||[]),y.return=N,N=y;break e}else{r(N,y);break}else e(N,y);y=y.sibling}y=Gi(b,N.mode,T),y.return=N,N=y}return o(N);case Yr:return I=b._init,M(N,y,I(b._payload),T)}if(cs(b))return S(N,y,b,T);if(Za(b))return A(N,y,b,T);Pl(N,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(r(N,y.sibling),y=s(y,b),y.return=N,N=y):(r(N,y),y=Hi(b,N.mode,T),y.return=N,N=y),o(N)):r(N,y)}return M}var Ta=W0(!0),H0=W0(!1),xo=hn(null),wo=null,pa=null,Au=null;function $u(){Au=pa=wo=null}function Pu(t){var e=xo.current;xe(xo),t._currentValue=e}function jc(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function ka(t,e){wo=t,Au=pa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Dt=!0),t.firstContext=null)}function qt(t){var e=t._currentValue;if(Au!==t)if(t={context:t,memoizedValue:e,next:null},pa===null){if(wo===null)throw Error(P(308));pa=t,wo.dependencies={lanes:0,firstContext:t}}else pa=pa.next=t;return e}var $n=null;function ju(t){$n===null?$n=[t]:$n.push(t)}function G0(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,ju(e)):(r.next=s.next,s.next=r),e.interleaved=r,Mr(t,n)}function Mr(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Qr=!1;function Ru(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function q0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ir(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ln(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ce&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Mr(t,r)}return s=n.interleaved,s===null?(e.next=e,ju(n)):(e.next=s.next,s.next=e),n.interleaved=e,Mr(t,r)}function Ql(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,xu(t,r)}}function Fm(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?s=l=o:l=l.next=o,r=r.next}while(r!==null);l===null?s=l=e:l=l.next=e}else s=l=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function bo(t,e,r,n){var s=t.updateQueue;Qr=!1;var l=s.firstBaseUpdate,o=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var u=i,d=u.next;u.next=null,o===null?l=d:o.next=d,o=u;var m=t.alternate;m!==null&&(m=m.updateQueue,i=m.lastBaseUpdate,i!==o&&(i===null?m.firstBaseUpdate=d:i.next=d,m.lastBaseUpdate=u))}if(l!==null){var h=s.baseState;o=0,m=d=u=null,i=l;do{var x=i.lane,_=i.eventTime;if((n&x)===x){m!==null&&(m=m.next={eventTime:_,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var S=t,A=i;switch(x=e,_=r,A.tag){case 1:if(S=A.payload,typeof S=="function"){h=S.call(_,h,x);break e}h=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=A.payload,x=typeof S=="function"?S.call(_,h,x):S,x==null)break e;h=Ce({},h,x);break e;case 2:Qr=!0}}i.callback!==null&&i.lane!==0&&(t.flags|=64,x=s.effects,x===null?s.effects=[i]:x.push(i))}else _={eventTime:_,lane:x,tag:i.tag,payload:i.payload,callback:i.callback,next:null},m===null?(d=m=_,u=h):m=m.next=_,o|=x;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;x=i,i=x.next,x.next=null,s.lastBaseUpdate=x,s.shared.pending=null}}while(!0);if(m===null&&(u=h),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else l===null&&(s.shared.lanes=0);Mn|=o,t.lanes=o,t.memoizedState=h}}function zm(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(P(191,s));s.call(n)}}}var Js={},br=hn(Js),zs=hn(Js),Us=hn(Js);function Pn(t){if(t===Js)throw Error(P(174));return t}function Iu(t,e){switch(ge(Us,e),ge(zs,t),ge(br,Js),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=fc(e,t)}xe(br),ge(br,e)}function Aa(){xe(br),xe(zs),xe(Us)}function Y0(t){Pn(Us.current);var e=Pn(br.current),r=fc(e,t.type);e!==r&&(ge(zs,t),ge(br,r))}function Ou(t){zs.current===t&&(xe(br),xe(zs))}var _e=hn(0);function Eo(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zi=[];function Lu(){for(var t=0;t<zi.length;t++)zi[t]._workInProgressVersionPrimary=null;zi.length=0}var Jl=zr.ReactCurrentDispatcher,Ui=zr.ReactCurrentBatchConfig,Ln=0,Se=null,He=null,Je=null,No=!1,bs=!1,Bs=0,Gv=0;function dt(){throw Error(P(321))}function Mu(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!or(t[r],e[r]))return!1;return!0}function Fu(t,e,r,n,s,l){if(Ln=l,Se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jl.current=t===null||t.memoizedState===null?Jv:Xv,t=r(n,s),bs){l=0;do{if(bs=!1,Bs=0,25<=l)throw Error(P(301));l+=1,Je=He=null,e.updateQueue=null,Jl.current=Zv,t=r(n,s)}while(bs)}if(Jl.current=ko,e=He!==null&&He.next!==null,Ln=0,Je=He=Se=null,No=!1,e)throw Error(P(300));return t}function zu(){var t=Bs!==0;return Bs=0,t}function yr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Se.memoizedState=Je=t:Je=Je.next=t,Je}function Yt(){if(He===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Je===null?Se.memoizedState:Je.next;if(e!==null)Je=e,He=t;else{if(t===null)throw Error(P(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Je===null?Se.memoizedState=Je=t:Je=Je.next=t}return Je}function Ks(t,e){return typeof e=="function"?e(t):e}function Bi(t){var e=Yt(),r=e.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=t;var n=He,s=n.baseQueue,l=r.pending;if(l!==null){if(s!==null){var o=s.next;s.next=l.next,l.next=o}n.baseQueue=s=l,r.pending=null}if(s!==null){l=s.next,n=n.baseState;var i=o=null,u=null,d=l;do{var m=d.lane;if((Ln&m)===m)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var h={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(i=u=h,o=n):u=u.next=h,Se.lanes|=m,Mn|=m}d=d.next}while(d!==null&&d!==l);u===null?o=n:u.next=i,or(n,e.memoizedState)||(Dt=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=u,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do l=s.lane,Se.lanes|=l,Mn|=l,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Ki(t){var e=Yt(),r=e.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,l=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do l=t(l,o.action),o=o.next;while(o!==s);or(l,e.memoizedState)||(Dt=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),r.lastRenderedState=l}return[l,n]}function Q0(){}function J0(t,e){var r=Se,n=Yt(),s=e(),l=!or(n.memoizedState,s);if(l&&(n.memoizedState=s,Dt=!0),n=n.queue,Uu(eh.bind(null,r,n,t),[t]),n.getSnapshot!==e||l||Je!==null&&Je.memoizedState.tag&1){if(r.flags|=2048,Vs(9,Z0.bind(null,r,n,s,e),void 0,null),Xe===null)throw Error(P(349));Ln&30||X0(r,e,s)}return s}function X0(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Z0(t,e,r,n){e.value=r,e.getSnapshot=n,th(e)&&rh(t)}function eh(t,e,r){return r(function(){th(e)&&rh(t)})}function th(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!or(t,r)}catch{return!0}}function rh(t){var e=Mr(t,1);e!==null&&lr(e,t,1,-1)}function Um(t){var e=yr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:t},e.queue=t,t=t.dispatch=Qv.bind(null,Se,t),[e.memoizedState,t]}function Vs(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function nh(){return Yt().memoizedState}function Xl(t,e,r,n){var s=yr();Se.flags|=t,s.memoizedState=Vs(1|e,r,void 0,n===void 0?null:n)}function Mo(t,e,r,n){var s=Yt();n=n===void 0?null:n;var l=void 0;if(He!==null){var o=He.memoizedState;if(l=o.destroy,n!==null&&Mu(n,o.deps)){s.memoizedState=Vs(e,r,l,n);return}}Se.flags|=t,s.memoizedState=Vs(1|e,r,l,n)}function Bm(t,e){return Xl(8390656,8,t,e)}function Uu(t,e){return Mo(2048,8,t,e)}function ah(t,e){return Mo(4,2,t,e)}function sh(t,e){return Mo(4,4,t,e)}function lh(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function oh(t,e,r){return r=r!=null?r.concat([t]):null,Mo(4,4,lh.bind(null,e,t),r)}function Bu(){}function ih(t,e){var r=Yt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Mu(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function ch(t,e){var r=Yt();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Mu(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function uh(t,e,r){return Ln&21?(or(r,e)||(r=p0(),Se.lanes|=r,Mn|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Dt=!0),t.memoizedState=r)}function qv(t,e){var r=me;me=r!==0&&4>r?r:4,t(!0);var n=Ui.transition;Ui.transition={};try{t(!1),e()}finally{me=r,Ui.transition=n}}function dh(){return Yt().memoizedState}function Yv(t,e,r){var n=cn(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},mh(t))fh(e,r);else if(r=G0(t,e,r,n),r!==null){var s=bt();lr(r,t,n,s),hh(r,e,n)}}function Qv(t,e,r){var n=cn(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(mh(t))fh(e,s);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var o=e.lastRenderedState,i=l(o,r);if(s.hasEagerState=!0,s.eagerState=i,or(i,o)){var u=e.interleaved;u===null?(s.next=s,ju(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}r=G0(t,e,s,n),r!==null&&(s=bt(),lr(r,t,n,s),hh(r,e,n))}}function mh(t){var e=t.alternate;return t===Se||e!==null&&e===Se}function fh(t,e){bs=No=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function hh(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,xu(t,r)}}var ko={readContext:qt,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useInsertionEffect:dt,useLayoutEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useMutableSource:dt,useSyncExternalStore:dt,useId:dt,unstable_isNewReconciler:!1},Jv={readContext:qt,useCallback:function(t,e){return yr().memoizedState=[t,e===void 0?null:e],t},useContext:qt,useEffect:Bm,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Xl(4194308,4,lh.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Xl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xl(4,2,t,e)},useMemo:function(t,e){var r=yr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=yr();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Yv.bind(null,Se,t),[n.memoizedState,t]},useRef:function(t){var e=yr();return t={current:t},e.memoizedState=t},useState:Um,useDebugValue:Bu,useDeferredValue:function(t){return yr().memoizedState=t},useTransition:function(){var t=Um(!1),e=t[0];return t=qv.bind(null,t[1]),yr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Se,s=yr();if(Ee){if(r===void 0)throw Error(P(407));r=r()}else{if(r=e(),Xe===null)throw Error(P(349));Ln&30||X0(n,e,r)}s.memoizedState=r;var l={value:r,getSnapshot:e};return s.queue=l,Bm(eh.bind(null,n,l,t),[t]),n.flags|=2048,Vs(9,Z0.bind(null,n,l,r,e),void 0,null),r},useId:function(){var t=yr(),e=Xe.identifierPrefix;if(Ee){var r=Rr,n=jr;r=(n&~(1<<32-sr(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Bs++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Gv++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Xv={readContext:qt,useCallback:ih,useContext:qt,useEffect:Uu,useImperativeHandle:oh,useInsertionEffect:ah,useLayoutEffect:sh,useMemo:ch,useReducer:Bi,useRef:nh,useState:function(){return Bi(Ks)},useDebugValue:Bu,useDeferredValue:function(t){var e=Yt();return uh(e,He.memoizedState,t)},useTransition:function(){var t=Bi(Ks)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:Q0,useSyncExternalStore:J0,useId:dh,unstable_isNewReconciler:!1},Zv={readContext:qt,useCallback:ih,useContext:qt,useEffect:Uu,useImperativeHandle:oh,useInsertionEffect:ah,useLayoutEffect:sh,useMemo:ch,useReducer:Ki,useRef:nh,useState:function(){return Ki(Ks)},useDebugValue:Bu,useDeferredValue:function(t){var e=Yt();return He===null?e.memoizedState=t:uh(e,He.memoizedState,t)},useTransition:function(){var t=Ki(Ks)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:Q0,useSyncExternalStore:J0,useId:dh,unstable_isNewReconciler:!1};function tr(t,e){if(t&&t.defaultProps){e=Ce({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Rc(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Ce({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Fo={isMounted:function(t){return(t=t._reactInternals)?Un(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=bt(),s=cn(t),l=Ir(n,s);l.payload=e,r!=null&&(l.callback=r),e=ln(t,l,s),e!==null&&(lr(e,t,s,n),Ql(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=bt(),s=cn(t),l=Ir(n,s);l.tag=1,l.payload=e,r!=null&&(l.callback=r),e=ln(t,l,s),e!==null&&(lr(e,t,s,n),Ql(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=bt(),n=cn(t),s=Ir(r,n);s.tag=2,e!=null&&(s.callback=e),e=ln(t,s,n),e!==null&&(lr(e,t,n,r),Ql(e,t,n))}};function Km(t,e,r,n,s,l,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,l,o):e.prototype&&e.prototype.isPureReactComponent?!Os(r,n)||!Os(s,l):!0}function ph(t,e,r){var n=!1,s=mn,l=e.contextType;return typeof l=="object"&&l!==null?l=qt(l):(s=At(e)?In:ht.current,n=e.contextTypes,l=(n=n!=null)?Ca(t,s):mn),e=new e(r,l),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Fo,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=l),e}function Vm(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Fo.enqueueReplaceState(e,e.state,null)}function Ic(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Ru(t);var l=e.contextType;typeof l=="object"&&l!==null?s.context=qt(l):(l=At(e)?In:ht.current,s.context=Ca(t,l)),s.state=t.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(Rc(t,e,l,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Fo.enqueueReplaceState(s,s.state,null),bo(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function $a(t,e){try{var r="",n=e;do r+=Cy(n),n=n.return;while(n);var s=r}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:e,stack:s,digest:null}}function Vi(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Oc(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var ex=typeof WeakMap=="function"?WeakMap:Map;function gh(t,e,r){r=Ir(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){So||(So=!0,Hc=n),Oc(t,e)},r}function yh(t,e,r){r=Ir(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){Oc(t,e)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){Oc(t,e),typeof n!="function"&&(on===null?on=new Set([this]):on.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function Wm(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new ex;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=hx.bind(null,t,e,r),e.then(t,t))}function Hm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Gm(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Ir(-1,1),e.tag=2,ln(r,e,1))),r.lanes|=1),t)}var tx=zr.ReactCurrentOwner,Dt=!1;function wt(t,e,r,n){e.child=t===null?H0(e,null,r,n):Ta(e,t.child,r,n)}function qm(t,e,r,n,s){r=r.render;var l=e.ref;return ka(e,s),n=Fu(t,e,r,n,l,s),r=zu(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Fr(t,e,s)):(Ee&&r&&Cu(e),e.flags|=1,wt(t,e,n,s),e.child)}function Ym(t,e,r,n,s){if(t===null){var l=r.type;return typeof l=="function"&&!Qu(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=l,vh(t,e,l,n,s)):(t=ro(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!(t.lanes&s)){var o=l.memoizedProps;if(r=r.compare,r=r!==null?r:Os,r(o,n)&&t.ref===e.ref)return Fr(t,e,s)}return e.flags|=1,t=un(l,n),t.ref=e.ref,t.return=e,e.child=t}function vh(t,e,r,n,s){if(t!==null){var l=t.memoizedProps;if(Os(l,n)&&t.ref===e.ref)if(Dt=!1,e.pendingProps=n=l,(t.lanes&s)!==0)t.flags&131072&&(Dt=!0);else return e.lanes=t.lanes,Fr(t,e,s)}return Lc(t,e,r,n,s)}function xh(t,e,r){var n=e.pendingProps,s=n.children,l=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(ya,jt),jt|=r;else{if(!(r&1073741824))return t=l!==null?l.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ge(ya,jt),jt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:r,ge(ya,jt),jt|=n}else l!==null?(n=l.baseLanes|r,e.memoizedState=null):n=r,ge(ya,jt),jt|=n;return wt(t,e,s,r),e.child}function wh(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Lc(t,e,r,n,s){var l=At(r)?In:ht.current;return l=Ca(e,l),ka(e,s),r=Fu(t,e,r,n,l,s),n=zu(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Fr(t,e,s)):(Ee&&n&&Cu(e),e.flags|=1,wt(t,e,r,s),e.child)}function Qm(t,e,r,n,s){if(At(r)){var l=!0;go(e)}else l=!1;if(ka(e,s),e.stateNode===null)Zl(t,e),ph(e,r,n),Ic(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,i=e.memoizedProps;o.props=i;var u=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=qt(d):(d=At(r)?In:ht.current,d=Ca(e,d));var m=r.getDerivedStateFromProps,h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==n||u!==d)&&Vm(e,o,n,d),Qr=!1;var x=e.memoizedState;o.state=x,bo(e,n,o,s),u=e.memoizedState,i!==n||x!==u||Tt.current||Qr?(typeof m=="function"&&(Rc(e,r,m,n),u=e.memoizedState),(i=Qr||Km(e,r,i,n,x,u,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),o.props=n,o.state=u,o.context=d,n=i):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,q0(t,e),i=e.memoizedProps,d=e.type===e.elementType?i:tr(e.type,i),o.props=d,h=e.pendingProps,x=o.context,u=r.contextType,typeof u=="object"&&u!==null?u=qt(u):(u=At(r)?In:ht.current,u=Ca(e,u));var _=r.getDerivedStateFromProps;(m=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==h||x!==u)&&Vm(e,o,n,u),Qr=!1,x=e.memoizedState,o.state=x,bo(e,n,o,s);var S=e.memoizedState;i!==h||x!==S||Tt.current||Qr?(typeof _=="function"&&(Rc(e,r,_,n),S=e.memoizedState),(d=Qr||Km(e,r,d,n,x,S,u)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,S,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,S,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||i===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=S),o.props=n,o.state=S,o.context=u,n=d):(typeof o.componentDidUpdate!="function"||i===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),n=!1)}return Mc(t,e,r,n,l,s)}function Mc(t,e,r,n,s,l){wh(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&Im(e,r,!1),Fr(t,e,l);n=e.stateNode,tx.current=e;var i=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Ta(e,t.child,null,l),e.child=Ta(e,null,i,l)):wt(t,e,i,l),e.memoizedState=n.state,s&&Im(e,r,!0),e.child}function bh(t){var e=t.stateNode;e.pendingContext?Rm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Rm(t,e.context,!1),Iu(t,e.containerInfo)}function Jm(t,e,r,n,s){return Da(),Tu(s),e.flags|=256,wt(t,e,r,n),e.child}var Fc={dehydrated:null,treeContext:null,retryLane:0};function zc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Eh(t,e,r){var n=e.pendingProps,s=_e.current,l=!1,o=(e.flags&128)!==0,i;if((i=o)||(i=t!==null&&t.memoizedState===null?!1:(s&2)!==0),i?(l=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ge(_e,s&1),t===null)return Pc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,l?(n=e.mode,l=e.child,o={mode:"hidden",children:o},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=Bo(o,n,0,null),t=Rn(t,n,r,null),l.return=e,t.return=e,l.sibling=t,e.child=l,e.child.memoizedState=zc(r),e.memoizedState=Fc,t):Ku(e,o));if(s=t.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return rx(t,e,o,n,i,s,r);if(l){l=n.fallback,o=e.mode,s=t.child,i=s.sibling;var u={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=un(s,u),n.subtreeFlags=s.subtreeFlags&14680064),i!==null?l=un(i,l):(l=Rn(l,o,r,null),l.flags|=2),l.return=e,n.return=e,n.sibling=l,e.child=n,n=l,l=e.child,o=t.child.memoizedState,o=o===null?zc(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=t.childLanes&~r,e.memoizedState=Fc,n}return l=t.child,t=l.sibling,n=un(l,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Ku(t,e){return e=Bo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function jl(t,e,r,n){return n!==null&&Tu(n),Ta(e,t.child,null,r),t=Ku(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rx(t,e,r,n,s,l,o){if(r)return e.flags&256?(e.flags&=-257,n=Vi(Error(P(422))),jl(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(l=n.fallback,s=e.mode,n=Bo({mode:"visible",children:n.children},s,0,null),l=Rn(l,s,o,null),l.flags|=2,n.return=e,l.return=e,n.sibling=l,e.child=n,e.mode&1&&Ta(e,t.child,null,o),e.child.memoizedState=zc(o),e.memoizedState=Fc,l);if(!(e.mode&1))return jl(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var i=n.dgst;return n=i,l=Error(P(419)),n=Vi(l,n,void 0),jl(t,e,o,n)}if(i=(o&t.childLanes)!==0,Dt||i){if(n=Xe,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,Mr(t,s),lr(n,t,s,-1))}return Yu(),n=Vi(Error(P(421))),jl(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=px.bind(null,t),s._reactRetry=e,null):(t=l.treeContext,Rt=sn(s.nextSibling),It=e,Ee=!0,ar=null,t!==null&&(Kt[Vt++]=jr,Kt[Vt++]=Rr,Kt[Vt++]=On,jr=t.id,Rr=t.overflow,On=e),e=Ku(e,n.children),e.flags|=4096,e)}function Xm(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),jc(t.return,e,r)}function Wi(t,e,r,n,s){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=s)}function Nh(t,e,r){var n=e.pendingProps,s=n.revealOrder,l=n.tail;if(wt(t,e,n.children,r),n=_e.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xm(t,r,e);else if(t.tag===19)Xm(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ge(_e,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Eo(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Wi(e,!1,s,r,l);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Eo(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Wi(e,!0,r,null,l);break;case"together":Wi(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Zl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Fr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Mn|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(P(153));if(e.child!==null){for(t=e.child,r=un(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=un(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function nx(t,e,r){switch(e.tag){case 3:bh(e),Da();break;case 5:Y0(e);break;case 1:At(e.type)&&go(e);break;case 4:Iu(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;ge(xo,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ge(_e,_e.current&1),e.flags|=128,null):r&e.child.childLanes?Eh(t,e,r):(ge(_e,_e.current&1),t=Fr(t,e,r),t!==null?t.sibling:null);ge(_e,_e.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Nh(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ge(_e,_e.current),n)break;return null;case 22:case 23:return e.lanes=0,xh(t,e,r)}return Fr(t,e,r)}var kh,Uc,_h,Sh;kh=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Uc=function(){};_h=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Pn(br.current);var l=null;switch(r){case"input":s=cc(t,s),n=cc(t,n),l=[];break;case"select":s=Ce({},s,{value:void 0}),n=Ce({},n,{value:void 0}),l=[];break;case"textarea":s=mc(t,s),n=mc(t,n),l=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=ho)}hc(r,n);var o;r=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var i=s[d];for(o in i)i.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ts.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in n){var u=n[d];if(i=s!=null?s[d]:void 0,n.hasOwnProperty(d)&&u!==i&&(u!=null||i!=null))if(d==="style")if(i){for(o in i)!i.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&i[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(l||(l=[]),l.push(d,r)),r=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,i=i?i.__html:void 0,u!=null&&i!==u&&(l=l||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(l=l||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ts.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&ve("scroll",t),l||i===u||(l=[])):(l=l||[]).push(d,u))}r&&(l=l||[]).push("style",r);var d=l;(e.updateQueue=d)&&(e.flags|=4)}};Sh=function(t,e,r,n){r!==n&&(e.flags|=4)};function ss(t,e){if(!Ee)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function ax(t,e,r){var n=e.pendingProps;switch(Du(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(e),null;case 1:return At(e.type)&&po(),mt(e),null;case 3:return n=e.stateNode,Aa(),xe(Tt),xe(ht),Lu(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&($l(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ar!==null&&(Yc(ar),ar=null))),Uc(t,e),mt(e),null;case 5:Ou(e);var s=Pn(Us.current);if(r=e.type,t!==null&&e.stateNode!=null)_h(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(P(166));return mt(e),null}if(t=Pn(br.current),$l(e)){n=e.stateNode,r=e.type;var l=e.memoizedProps;switch(n[xr]=e,n[Fs]=l,t=(e.mode&1)!==0,r){case"dialog":ve("cancel",n),ve("close",n);break;case"iframe":case"object":case"embed":ve("load",n);break;case"video":case"audio":for(s=0;s<ds.length;s++)ve(ds[s],n);break;case"source":ve("error",n);break;case"img":case"image":case"link":ve("error",n),ve("load",n);break;case"details":ve("toggle",n);break;case"input":om(n,l),ve("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},ve("invalid",n);break;case"textarea":cm(n,l),ve("invalid",n)}hc(r,l),s=null;for(var o in l)if(l.hasOwnProperty(o)){var i=l[o];o==="children"?typeof i=="string"?n.textContent!==i&&(l.suppressHydrationWarning!==!0&&Al(n.textContent,i,t),s=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(l.suppressHydrationWarning!==!0&&Al(n.textContent,i,t),s=["children",""+i]):Ts.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&ve("scroll",n)}switch(r){case"input":El(n),im(n,l,!0);break;case"textarea":El(n),um(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=ho)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=e0(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[xr]=e,t[Fs]=n,kh(t,e,!1,!1),e.stateNode=t;e:{switch(o=pc(r,n),r){case"dialog":ve("cancel",t),ve("close",t),s=n;break;case"iframe":case"object":case"embed":ve("load",t),s=n;break;case"video":case"audio":for(s=0;s<ds.length;s++)ve(ds[s],t);s=n;break;case"source":ve("error",t),s=n;break;case"img":case"image":case"link":ve("error",t),ve("load",t),s=n;break;case"details":ve("toggle",t),s=n;break;case"input":om(t,n),s=cc(t,n),ve("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Ce({},n,{value:void 0}),ve("invalid",t);break;case"textarea":cm(t,n),s=mc(t,n),ve("invalid",t);break;default:s=n}hc(r,s),i=s;for(l in i)if(i.hasOwnProperty(l)){var u=i[l];l==="style"?n0(t,u):l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&t0(t,u)):l==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&As(t,u):typeof u=="number"&&As(t,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ts.hasOwnProperty(l)?u!=null&&l==="onScroll"&&ve("scroll",t):u!=null&&fu(t,l,u,o))}switch(r){case"input":El(t),im(t,n,!1);break;case"textarea":El(t),um(t);break;case"option":n.value!=null&&t.setAttribute("value",""+dn(n.value));break;case"select":t.multiple=!!n.multiple,l=n.value,l!=null?wa(t,!!n.multiple,l,!1):n.defaultValue!=null&&wa(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ho)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mt(e),null;case 6:if(t&&e.stateNode!=null)Sh(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(P(166));if(r=Pn(Us.current),Pn(br.current),$l(e)){if(n=e.stateNode,r=e.memoizedProps,n[xr]=e,(l=n.nodeValue!==r)&&(t=It,t!==null))switch(t.tag){case 3:Al(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Al(n.nodeValue,r,(t.mode&1)!==0)}l&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[xr]=e,e.stateNode=n}return mt(e),null;case 13:if(xe(_e),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ee&&Rt!==null&&e.mode&1&&!(e.flags&128))V0(),Da(),e.flags|=98560,l=!1;else if(l=$l(e),n!==null&&n.dehydrated!==null){if(t===null){if(!l)throw Error(P(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(P(317));l[xr]=e}else Da(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mt(e),l=!1}else ar!==null&&(Yc(ar),ar=null),l=!0;if(!l)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||_e.current&1?Ge===0&&(Ge=3):Yu())),e.updateQueue!==null&&(e.flags|=4),mt(e),null);case 4:return Aa(),Uc(t,e),t===null&&Ls(e.stateNode.containerInfo),mt(e),null;case 10:return Pu(e.type._context),mt(e),null;case 17:return At(e.type)&&po(),mt(e),null;case 19:if(xe(_e),l=e.memoizedState,l===null)return mt(e),null;if(n=(e.flags&128)!==0,o=l.rendering,o===null)if(n)ss(l,!1);else{if(Ge!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Eo(t),o!==null){for(e.flags|=128,ss(l,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)l=r,t=n,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,t=o.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ge(_e,_e.current&1|2),e.child}t=t.sibling}l.tail!==null&&Pe()>Pa&&(e.flags|=128,n=!0,ss(l,!1),e.lanes=4194304)}else{if(!n)if(t=Eo(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ss(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!Ee)return mt(e),null}else 2*Pe()-l.renderingStartTime>Pa&&r!==1073741824&&(e.flags|=128,n=!0,ss(l,!1),e.lanes=4194304);l.isBackwards?(o.sibling=e.child,e.child=o):(r=l.last,r!==null?r.sibling=o:e.child=o,l.last=o)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Pe(),e.sibling=null,r=_e.current,ge(_e,n?r&1|2:r&1),e):(mt(e),null);case 22:case 23:return qu(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?jt&1073741824&&(mt(e),e.subtreeFlags&6&&(e.flags|=8192)):mt(e),null;case 24:return null;case 25:return null}throw Error(P(156,e.tag))}function sx(t,e){switch(Du(e),e.tag){case 1:return At(e.type)&&po(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Aa(),xe(Tt),xe(ht),Lu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ou(e),null;case 13:if(xe(_e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(P(340));Da()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xe(_e),null;case 4:return Aa(),null;case 10:return Pu(e.type._context),null;case 22:case 23:return qu(),null;case 24:return null;default:return null}}var Rl=!1,ft=!1,lx=typeof WeakSet=="function"?WeakSet:Set,B=null;function ga(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ae(t,e,n)}else r.current=null}function Bc(t,e,r){try{r()}catch(n){Ae(t,e,n)}}var Zm=!1;function ox(t,e){if(_c=uo,t=$0(),Su(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var o=0,i=-1,u=-1,d=0,m=0,h=t,x=null;t:for(;;){for(var _;h!==r||s!==0&&h.nodeType!==3||(i=o+s),h!==l||n!==0&&h.nodeType!==3||(u=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(_=h.firstChild)!==null;)x=h,h=_;for(;;){if(h===t)break t;if(x===r&&++d===s&&(i=o),x===l&&++m===n&&(u=o),(_=h.nextSibling)!==null)break;h=x,x=h.parentNode}h=_}r=i===-1||u===-1?null:{start:i,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(Sc={focusedElem:t,selectionRange:r},uo=!1,B=e;B!==null;)if(e=B,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,B=t;else for(;B!==null;){e=B;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var A=S.memoizedProps,M=S.memoizedState,N=e.stateNode,y=N.getSnapshotBeforeUpdate(e.elementType===e.type?A:tr(e.type,A),M);N.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(T){Ae(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,B=t;break}B=e.return}return S=Zm,Zm=!1,S}function Es(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var l=s.destroy;s.destroy=void 0,l!==void 0&&Bc(e,r,l)}s=s.next}while(s!==n)}}function zo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Kc(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Ch(t){var e=t.alternate;e!==null&&(t.alternate=null,Ch(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xr],delete e[Fs],delete e[Tc],delete e[Kv],delete e[Vv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Dh(t){return t.tag===5||t.tag===3||t.tag===4}function ef(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Dh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vc(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=ho));else if(n!==4&&(t=t.child,t!==null))for(Vc(t,e,r),t=t.sibling;t!==null;)Vc(t,e,r),t=t.sibling}function Wc(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Wc(t,e,r),t=t.sibling;t!==null;)Wc(t,e,r),t=t.sibling}var at=null,rr=!1;function Kr(t,e,r){for(r=r.child;r!==null;)Th(t,e,r),r=r.sibling}function Th(t,e,r){if(wr&&typeof wr.onCommitFiberUnmount=="function")try{wr.onCommitFiberUnmount(Po,r)}catch{}switch(r.tag){case 5:ft||ga(r,e);case 6:var n=at,s=rr;at=null,Kr(t,e,r),at=n,rr=s,at!==null&&(rr?(t=at,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):at.removeChild(r.stateNode));break;case 18:at!==null&&(rr?(t=at,r=r.stateNode,t.nodeType===8?Mi(t.parentNode,r):t.nodeType===1&&Mi(t,r),Rs(t)):Mi(at,r.stateNode));break;case 4:n=at,s=rr,at=r.stateNode.containerInfo,rr=!0,Kr(t,e,r),at=n,rr=s;break;case 0:case 11:case 14:case 15:if(!ft&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var l=s,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&Bc(r,e,o),s=s.next}while(s!==n)}Kr(t,e,r);break;case 1:if(!ft&&(ga(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(i){Ae(r,e,i)}Kr(t,e,r);break;case 21:Kr(t,e,r);break;case 22:r.mode&1?(ft=(n=ft)||r.memoizedState!==null,Kr(t,e,r),ft=n):Kr(t,e,r);break;default:Kr(t,e,r)}}function tf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new lx),e.forEach(function(n){var s=gx.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Zt(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var l=t,o=e,i=o;e:for(;i!==null;){switch(i.tag){case 5:at=i.stateNode,rr=!1;break e;case 3:at=i.stateNode.containerInfo,rr=!0;break e;case 4:at=i.stateNode.containerInfo,rr=!0;break e}i=i.return}if(at===null)throw Error(P(160));Th(l,o,s),at=null,rr=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Ae(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ah(e,t),e=e.sibling}function Ah(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zt(e,t),gr(t),n&4){try{Es(3,t,t.return),zo(3,t)}catch(A){Ae(t,t.return,A)}try{Es(5,t,t.return)}catch(A){Ae(t,t.return,A)}}break;case 1:Zt(e,t),gr(t),n&512&&r!==null&&ga(r,r.return);break;case 5:if(Zt(e,t),gr(t),n&512&&r!==null&&ga(r,r.return),t.flags&32){var s=t.stateNode;try{As(s,"")}catch(A){Ae(t,t.return,A)}}if(n&4&&(s=t.stateNode,s!=null)){var l=t.memoizedProps,o=r!==null?r.memoizedProps:l,i=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{i==="input"&&l.type==="radio"&&l.name!=null&&Xf(s,l),pc(i,o);var d=pc(i,l);for(o=0;o<u.length;o+=2){var m=u[o],h=u[o+1];m==="style"?n0(s,h):m==="dangerouslySetInnerHTML"?t0(s,h):m==="children"?As(s,h):fu(s,m,h,d)}switch(i){case"input":uc(s,l);break;case"textarea":Zf(s,l);break;case"select":var x=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var _=l.value;_!=null?wa(s,!!l.multiple,_,!1):x!==!!l.multiple&&(l.defaultValue!=null?wa(s,!!l.multiple,l.defaultValue,!0):wa(s,!!l.multiple,l.multiple?[]:"",!1))}s[Fs]=l}catch(A){Ae(t,t.return,A)}}break;case 6:if(Zt(e,t),gr(t),n&4){if(t.stateNode===null)throw Error(P(162));s=t.stateNode,l=t.memoizedProps;try{s.nodeValue=l}catch(A){Ae(t,t.return,A)}}break;case 3:if(Zt(e,t),gr(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Rs(e.containerInfo)}catch(A){Ae(t,t.return,A)}break;case 4:Zt(e,t),gr(t);break;case 13:Zt(e,t),gr(t),s=t.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(Hu=Pe())),n&4&&tf(t);break;case 22:if(m=r!==null&&r.memoizedState!==null,t.mode&1?(ft=(d=ft)||m,Zt(e,t),ft=d):Zt(e,t),gr(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for(B=t,m=t.child;m!==null;){for(h=B=m;B!==null;){switch(x=B,_=x.child,x.tag){case 0:case 11:case 14:case 15:Es(4,x,x.return);break;case 1:ga(x,x.return);var S=x.stateNode;if(typeof S.componentWillUnmount=="function"){n=x,r=x.return;try{e=n,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(A){Ae(n,r,A)}}break;case 5:ga(x,x.return);break;case 22:if(x.memoizedState!==null){nf(h);continue}}_!==null?(_.return=x,B=_):nf(h)}m=m.sibling}e:for(m=null,h=t;;){if(h.tag===5){if(m===null){m=h;try{s=h.stateNode,d?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(i=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,i.style.display=r0("display",o))}catch(A){Ae(t,t.return,A)}}}else if(h.tag===6){if(m===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(A){Ae(t,t.return,A)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Zt(e,t),gr(t),n&4&&tf(t);break;case 21:break;default:Zt(e,t),gr(t)}}function gr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Dh(r)){var n=r;break e}r=r.return}throw Error(P(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(As(s,""),n.flags&=-33);var l=ef(t);Wc(t,l,s);break;case 3:case 4:var o=n.stateNode.containerInfo,i=ef(t);Vc(t,i,o);break;default:throw Error(P(161))}}catch(u){Ae(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ix(t,e,r){B=t,$h(t)}function $h(t,e,r){for(var n=(t.mode&1)!==0;B!==null;){var s=B,l=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Rl;if(!o){var i=s.alternate,u=i!==null&&i.memoizedState!==null||ft;i=Rl;var d=ft;if(Rl=o,(ft=u)&&!d)for(B=s;B!==null;)o=B,u=o.child,o.tag===22&&o.memoizedState!==null?af(s):u!==null?(u.return=o,B=u):af(s);for(;l!==null;)B=l,$h(l),l=l.sibling;B=s,Rl=i,ft=d}rf(t)}else s.subtreeFlags&8772&&l!==null?(l.return=s,B=l):rf(t)}}function rf(t){for(;B!==null;){var e=B;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ft||zo(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ft)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:tr(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&zm(e,l,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}zm(e,o,r)}break;case 5:var i=e.stateNode;if(r===null&&e.flags&4){r=i;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var h=m.dehydrated;h!==null&&Rs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}ft||e.flags&512&&Kc(e)}catch(x){Ae(e,e.return,x)}}if(e===t){B=null;break}if(r=e.sibling,r!==null){r.return=e.return,B=r;break}B=e.return}}function nf(t){for(;B!==null;){var e=B;if(e===t){B=null;break}var r=e.sibling;if(r!==null){r.return=e.return,B=r;break}B=e.return}}function af(t){for(;B!==null;){var e=B;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{zo(4,e)}catch(u){Ae(e,r,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(u){Ae(e,s,u)}}var l=e.return;try{Kc(e)}catch(u){Ae(e,l,u)}break;case 5:var o=e.return;try{Kc(e)}catch(u){Ae(e,o,u)}}}catch(u){Ae(e,e.return,u)}if(e===t){B=null;break}var i=e.sibling;if(i!==null){i.return=e.return,B=i;break}B=e.return}}var cx=Math.ceil,_o=zr.ReactCurrentDispatcher,Vu=zr.ReactCurrentOwner,Ht=zr.ReactCurrentBatchConfig,ce=0,Xe=null,Oe=null,st=0,jt=0,ya=hn(0),Ge=0,Ws=null,Mn=0,Uo=0,Wu=0,Ns=null,St=null,Hu=0,Pa=1/0,Ar=null,So=!1,Hc=null,on=null,Il=!1,tn=null,Co=0,ks=0,Gc=null,eo=-1,to=0;function bt(){return ce&6?Pe():eo!==-1?eo:eo=Pe()}function cn(t){return t.mode&1?ce&2&&st!==0?st&-st:Hv.transition!==null?(to===0&&(to=p0()),to):(t=me,t!==0||(t=window.event,t=t===void 0?16:E0(t.type)),t):1}function lr(t,e,r,n){if(50<ks)throw ks=0,Gc=null,Error(P(185));qs(t,r,n),(!(ce&2)||t!==Xe)&&(t===Xe&&(!(ce&2)&&(Uo|=r),Ge===4&&Xr(t,st)),$t(t,n),r===1&&ce===0&&!(e.mode&1)&&(Pa=Pe()+500,Lo&&pn()))}function $t(t,e){var r=t.callbackNode;Hy(t,e);var n=co(t,t===Xe?st:0);if(n===0)r!==null&&fm(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&fm(r),e===1)t.tag===0?Wv(sf.bind(null,t)):U0(sf.bind(null,t)),Uv(function(){!(ce&6)&&pn()}),r=null;else{switch(g0(n)){case 1:r=vu;break;case 4:r=f0;break;case 16:r=io;break;case 536870912:r=h0;break;default:r=io}r=Fh(r,Ph.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Ph(t,e){if(eo=-1,to=0,ce&6)throw Error(P(327));var r=t.callbackNode;if(_a()&&t.callbackNode!==r)return null;var n=co(t,t===Xe?st:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Do(t,n);else{e=n;var s=ce;ce|=2;var l=Rh();(Xe!==t||st!==e)&&(Ar=null,Pa=Pe()+500,jn(t,e));do try{mx();break}catch(i){jh(t,i)}while(!0);$u(),_o.current=l,ce=s,Oe!==null?e=0:(Xe=null,st=0,e=Ge)}if(e!==0){if(e===2&&(s=wc(t),s!==0&&(n=s,e=qc(t,s))),e===1)throw r=Ws,jn(t,0),Xr(t,n),$t(t,Pe()),r;if(e===6)Xr(t,n);else{if(s=t.current.alternate,!(n&30)&&!ux(s)&&(e=Do(t,n),e===2&&(l=wc(t),l!==0&&(n=l,e=qc(t,l))),e===1))throw r=Ws,jn(t,0),Xr(t,n),$t(t,Pe()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(P(345));case 2:Cn(t,St,Ar);break;case 3:if(Xr(t,n),(n&130023424)===n&&(e=Hu+500-Pe(),10<e)){if(co(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){bt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Dc(Cn.bind(null,t,St,Ar),e);break}Cn(t,St,Ar);break;case 4:if(Xr(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-sr(n);l=1<<o,o=e[o],o>s&&(s=o),n&=~l}if(n=s,n=Pe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*cx(n/1960))-n,10<n){t.timeoutHandle=Dc(Cn.bind(null,t,St,Ar),n);break}Cn(t,St,Ar);break;case 5:Cn(t,St,Ar);break;default:throw Error(P(329))}}}return $t(t,Pe()),t.callbackNode===r?Ph.bind(null,t):null}function qc(t,e){var r=Ns;return t.current.memoizedState.isDehydrated&&(jn(t,e).flags|=256),t=Do(t,e),t!==2&&(e=St,St=r,e!==null&&Yc(e)),t}function Yc(t){St===null?St=t:St.push.apply(St,t)}function ux(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],l=s.getSnapshot;s=s.value;try{if(!or(l(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xr(t,e){for(e&=~Wu,e&=~Uo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-sr(e),n=1<<r;t[r]=-1,e&=~n}}function sf(t){if(ce&6)throw Error(P(327));_a();var e=co(t,0);if(!(e&1))return $t(t,Pe()),null;var r=Do(t,e);if(t.tag!==0&&r===2){var n=wc(t);n!==0&&(e=n,r=qc(t,n))}if(r===1)throw r=Ws,jn(t,0),Xr(t,e),$t(t,Pe()),r;if(r===6)throw Error(P(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Cn(t,St,Ar),$t(t,Pe()),null}function Gu(t,e){var r=ce;ce|=1;try{return t(e)}finally{ce=r,ce===0&&(Pa=Pe()+500,Lo&&pn())}}function Fn(t){tn!==null&&tn.tag===0&&!(ce&6)&&_a();var e=ce;ce|=1;var r=Ht.transition,n=me;try{if(Ht.transition=null,me=1,t)return t()}finally{me=n,Ht.transition=r,ce=e,!(ce&6)&&pn()}}function qu(){jt=ya.current,xe(ya)}function jn(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,zv(r)),Oe!==null)for(r=Oe.return;r!==null;){var n=r;switch(Du(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&po();break;case 3:Aa(),xe(Tt),xe(ht),Lu();break;case 5:Ou(n);break;case 4:Aa();break;case 13:xe(_e);break;case 19:xe(_e);break;case 10:Pu(n.type._context);break;case 22:case 23:qu()}r=r.return}if(Xe=t,Oe=t=un(t.current,null),st=jt=e,Ge=0,Ws=null,Wu=Uo=Mn=0,St=Ns=null,$n!==null){for(e=0;e<$n.length;e++)if(r=$n[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,l=r.pending;if(l!==null){var o=l.next;l.next=s,n.next=o}r.pending=n}$n=null}return t}function jh(t,e){do{var r=Oe;try{if($u(),Jl.current=ko,No){for(var n=Se.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}No=!1}if(Ln=0,Je=He=Se=null,bs=!1,Bs=0,Vu.current=null,r===null||r.return===null){Ge=1,Ws=e,Oe=null;break}e:{var l=t,o=r.return,i=r,u=e;if(e=st,i.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,m=i,h=m.tag;if(!(m.mode&1)&&(h===0||h===11||h===15)){var x=m.alternate;x?(m.updateQueue=x.updateQueue,m.memoizedState=x.memoizedState,m.lanes=x.lanes):(m.updateQueue=null,m.memoizedState=null)}var _=Hm(o);if(_!==null){_.flags&=-257,Gm(_,o,i,l,e),_.mode&1&&Wm(l,d,e),e=_,u=d;var S=e.updateQueue;if(S===null){var A=new Set;A.add(u),e.updateQueue=A}else S.add(u);break e}else{if(!(e&1)){Wm(l,d,e),Yu();break e}u=Error(P(426))}}else if(Ee&&i.mode&1){var M=Hm(o);if(M!==null){!(M.flags&65536)&&(M.flags|=256),Gm(M,o,i,l,e),Tu($a(u,i));break e}}l=u=$a(u,i),Ge!==4&&(Ge=2),Ns===null?Ns=[l]:Ns.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var N=gh(l,u,e);Fm(l,N);break e;case 1:i=u;var y=l.type,b=l.stateNode;if(!(l.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(on===null||!on.has(b)))){l.flags|=65536,e&=-e,l.lanes|=e;var T=yh(l,i,e);Fm(l,T);break e}}l=l.return}while(l!==null)}Oh(r)}catch(j){e=j,Oe===r&&r!==null&&(Oe=r=r.return);continue}break}while(!0)}function Rh(){var t=_o.current;return _o.current=ko,t===null?ko:t}function Yu(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),Xe===null||!(Mn&268435455)&&!(Uo&268435455)||Xr(Xe,st)}function Do(t,e){var r=ce;ce|=2;var n=Rh();(Xe!==t||st!==e)&&(Ar=null,jn(t,e));do try{dx();break}catch(s){jh(t,s)}while(!0);if($u(),ce=r,_o.current=n,Oe!==null)throw Error(P(261));return Xe=null,st=0,Ge}function dx(){for(;Oe!==null;)Ih(Oe)}function mx(){for(;Oe!==null&&!Ly();)Ih(Oe)}function Ih(t){var e=Mh(t.alternate,t,jt);t.memoizedProps=t.pendingProps,e===null?Oh(t):Oe=e,Vu.current=null}function Oh(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=sx(r,e),r!==null){r.flags&=32767,Oe=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ge=6,Oe=null;return}}else if(r=ax(r,e,jt),r!==null){Oe=r;return}if(e=e.sibling,e!==null){Oe=e;return}Oe=e=t}while(e!==null);Ge===0&&(Ge=5)}function Cn(t,e,r){var n=me,s=Ht.transition;try{Ht.transition=null,me=1,fx(t,e,r,n)}finally{Ht.transition=s,me=n}return null}function fx(t,e,r,n){do _a();while(tn!==null);if(ce&6)throw Error(P(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(P(177));t.callbackNode=null,t.callbackPriority=0;var l=r.lanes|r.childLanes;if(Gy(t,l),t===Xe&&(Oe=Xe=null,st=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Il||(Il=!0,Fh(io,function(){return _a(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=Ht.transition,Ht.transition=null;var o=me;me=1;var i=ce;ce|=4,Vu.current=null,ox(t,r),Ah(r,t),jv(Sc),uo=!!_c,Sc=_c=null,t.current=r,ix(r),My(),ce=i,me=o,Ht.transition=l}else t.current=r;if(Il&&(Il=!1,tn=t,Co=s),l=t.pendingLanes,l===0&&(on=null),Uy(r.stateNode),$t(t,Pe()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(So)throw So=!1,t=Hc,Hc=null,t;return Co&1&&t.tag!==0&&_a(),l=t.pendingLanes,l&1?t===Gc?ks++:(ks=0,Gc=t):ks=0,pn(),null}function _a(){if(tn!==null){var t=g0(Co),e=Ht.transition,r=me;try{if(Ht.transition=null,me=16>t?16:t,tn===null)var n=!1;else{if(t=tn,tn=null,Co=0,ce&6)throw Error(P(331));var s=ce;for(ce|=4,B=t.current;B!==null;){var l=B,o=l.child;if(B.flags&16){var i=l.deletions;if(i!==null){for(var u=0;u<i.length;u++){var d=i[u];for(B=d;B!==null;){var m=B;switch(m.tag){case 0:case 11:case 15:Es(8,m,l)}var h=m.child;if(h!==null)h.return=m,B=h;else for(;B!==null;){m=B;var x=m.sibling,_=m.return;if(Ch(m),m===d){B=null;break}if(x!==null){x.return=_,B=x;break}B=_}}}var S=l.alternate;if(S!==null){var A=S.child;if(A!==null){S.child=null;do{var M=A.sibling;A.sibling=null,A=M}while(A!==null)}}B=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,B=o;else e:for(;B!==null;){if(l=B,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Es(9,l,l.return)}var N=l.sibling;if(N!==null){N.return=l.return,B=N;break e}B=l.return}}var y=t.current;for(B=y;B!==null;){o=B;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,B=b;else e:for(o=y;B!==null;){if(i=B,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:zo(9,i)}}catch(j){Ae(i,i.return,j)}if(i===o){B=null;break e}var T=i.sibling;if(T!==null){T.return=i.return,B=T;break e}B=i.return}}if(ce=s,pn(),wr&&typeof wr.onPostCommitFiberRoot=="function")try{wr.onPostCommitFiberRoot(Po,t)}catch{}n=!0}return n}finally{me=r,Ht.transition=e}}return!1}function lf(t,e,r){e=$a(r,e),e=gh(t,e,1),t=ln(t,e,1),e=bt(),t!==null&&(qs(t,1,e),$t(t,e))}function Ae(t,e,r){if(t.tag===3)lf(t,t,r);else for(;e!==null;){if(e.tag===3){lf(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(on===null||!on.has(n))){t=$a(r,t),t=yh(e,t,1),e=ln(e,t,1),t=bt(),e!==null&&(qs(e,1,t),$t(e,t));break}}e=e.return}}function hx(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=bt(),t.pingedLanes|=t.suspendedLanes&r,Xe===t&&(st&r)===r&&(Ge===4||Ge===3&&(st&130023424)===st&&500>Pe()-Hu?jn(t,0):Wu|=r),$t(t,e)}function Lh(t,e){e===0&&(t.mode&1?(e=_l,_l<<=1,!(_l&130023424)&&(_l=4194304)):e=1);var r=bt();t=Mr(t,e),t!==null&&(qs(t,e,r),$t(t,r))}function px(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Lh(t,r)}function gx(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(P(314))}n!==null&&n.delete(e),Lh(t,r)}var Mh;Mh=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tt.current)Dt=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Dt=!1,nx(t,e,r);Dt=!!(t.flags&131072)}else Dt=!1,Ee&&e.flags&1048576&&B0(e,vo,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Zl(t,e),t=e.pendingProps;var s=Ca(e,ht.current);ka(e,r),s=Fu(null,e,n,t,s,r);var l=zu();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,At(n)?(l=!0,go(e)):l=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ru(e),s.updater=Fo,e.stateNode=s,s._reactInternals=e,Ic(e,n,t,r),e=Mc(null,e,n,!0,l,r)):(e.tag=0,Ee&&l&&Cu(e),wt(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Zl(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=vx(n),t=tr(n,t),s){case 0:e=Lc(null,e,n,t,r);break e;case 1:e=Qm(null,e,n,t,r);break e;case 11:e=qm(null,e,n,t,r);break e;case 14:e=Ym(null,e,n,tr(n.type,t),r);break e}throw Error(P(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:tr(n,s),Lc(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:tr(n,s),Qm(t,e,n,s,r);case 3:e:{if(bh(e),t===null)throw Error(P(387));n=e.pendingProps,l=e.memoizedState,s=l.element,q0(t,e),bo(e,n,null,r);var o=e.memoizedState;if(n=o.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){s=$a(Error(P(423)),e),e=Jm(t,e,n,r,s);break e}else if(n!==s){s=$a(Error(P(424)),e),e=Jm(t,e,n,r,s);break e}else for(Rt=sn(e.stateNode.containerInfo.firstChild),It=e,Ee=!0,ar=null,r=H0(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Da(),n===s){e=Fr(t,e,r);break e}wt(t,e,n,r)}e=e.child}return e;case 5:return Y0(e),t===null&&Pc(e),n=e.type,s=e.pendingProps,l=t!==null?t.memoizedProps:null,o=s.children,Cc(n,s)?o=null:l!==null&&Cc(n,l)&&(e.flags|=32),wh(t,e),wt(t,e,o,r),e.child;case 6:return t===null&&Pc(e),null;case 13:return Eh(t,e,r);case 4:return Iu(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ta(e,null,n,r):wt(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:tr(n,s),qm(t,e,n,s,r);case 7:return wt(t,e,e.pendingProps,r),e.child;case 8:return wt(t,e,e.pendingProps.children,r),e.child;case 12:return wt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,l=e.memoizedProps,o=s.value,ge(xo,n._currentValue),n._currentValue=o,l!==null)if(or(l.value,o)){if(l.children===s.children&&!Tt.current){e=Fr(t,e,r);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var i=l.dependencies;if(i!==null){o=l.child;for(var u=i.firstContext;u!==null;){if(u.context===n){if(l.tag===1){u=Ir(-1,r&-r),u.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?u.next=u:(u.next=m.next,m.next=u),d.pending=u}}l.lanes|=r,u=l.alternate,u!==null&&(u.lanes|=r),jc(l.return,r,e),i.lanes|=r;break}u=u.next}}else if(l.tag===10)o=l.type===e.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(P(341));o.lanes|=r,i=o.alternate,i!==null&&(i.lanes|=r),jc(o,r,e),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===e){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}wt(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,ka(e,r),s=qt(s),n=n(s),e.flags|=1,wt(t,e,n,r),e.child;case 14:return n=e.type,s=tr(n,e.pendingProps),s=tr(n.type,s),Ym(t,e,n,s,r);case 15:return vh(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:tr(n,s),Zl(t,e),e.tag=1,At(n)?(t=!0,go(e)):t=!1,ka(e,r),ph(e,n,s),Ic(e,n,s,r),Mc(null,e,n,!0,t,r);case 19:return Nh(t,e,r);case 22:return xh(t,e,r)}throw Error(P(156,e.tag))};function Fh(t,e){return m0(t,e)}function yx(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(t,e,r,n){return new yx(t,e,r,n)}function Qu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vx(t){if(typeof t=="function")return Qu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pu)return 11;if(t===gu)return 14}return 2}function un(t,e){var r=t.alternate;return r===null?(r=Wt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function ro(t,e,r,n,s,l){var o=2;if(n=t,typeof t=="function")Qu(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case oa:return Rn(r.children,s,l,e);case hu:o=8,s|=8;break;case sc:return t=Wt(12,r,e,s|2),t.elementType=sc,t.lanes=l,t;case lc:return t=Wt(13,r,e,s),t.elementType=lc,t.lanes=l,t;case oc:return t=Wt(19,r,e,s),t.elementType=oc,t.lanes=l,t;case Yf:return Bo(r,s,l,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Gf:o=10;break e;case qf:o=9;break e;case pu:o=11;break e;case gu:o=14;break e;case Yr:o=16,n=null;break e}throw Error(P(130,t==null?t:typeof t,""))}return e=Wt(o,r,e,s),e.elementType=t,e.type=n,e.lanes=l,e}function Rn(t,e,r,n){return t=Wt(7,t,n,e),t.lanes=r,t}function Bo(t,e,r,n){return t=Wt(22,t,n,e),t.elementType=Yf,t.lanes=r,t.stateNode={isHidden:!1},t}function Hi(t,e,r){return t=Wt(6,t,null,e),t.lanes=r,t}function Gi(t,e,r){return e=Wt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xx(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ci(0),this.expirationTimes=Ci(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ci(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ju(t,e,r,n,s,l,o,i,u){return t=new xx(t,e,r,i,u),e===1?(e=1,l===!0&&(e|=8)):e=0,l=Wt(3,null,null,e),t.current=l,l.stateNode=t,l.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ru(l),t}function wx(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:la,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function zh(t){if(!t)return mn;t=t._reactInternals;e:{if(Un(t)!==t||t.tag!==1)throw Error(P(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(At(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(P(171))}if(t.tag===1){var r=t.type;if(At(r))return z0(t,r,e)}return e}function Uh(t,e,r,n,s,l,o,i,u){return t=Ju(r,n,!0,t,s,l,o,i,u),t.context=zh(null),r=t.current,n=bt(),s=cn(r),l=Ir(n,s),l.callback=e??null,ln(r,l,s),t.current.lanes=s,qs(t,s,n),$t(t,n),t}function Ko(t,e,r,n){var s=e.current,l=bt(),o=cn(s);return r=zh(r),e.context===null?e.context=r:e.pendingContext=r,e=Ir(l,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=ln(s,e,o),t!==null&&(lr(t,s,o,l),Ql(t,s,o)),o}function To(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function of(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Xu(t,e){of(t,e),(t=t.alternate)&&of(t,e)}function bx(){return null}var Bh=typeof reportError=="function"?reportError:function(t){console.error(t)};function Zu(t){this._internalRoot=t}Vo.prototype.render=Zu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(P(409));Ko(t,e,null,null)};Vo.prototype.unmount=Zu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Fn(function(){Ko(null,t,null,null)}),e[Lr]=null}};function Vo(t){this._internalRoot=t}Vo.prototype.unstable_scheduleHydration=function(t){if(t){var e=x0();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Jr.length&&e!==0&&e<Jr[r].priority;r++);Jr.splice(r,0,t),r===0&&b0(t)}};function ed(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Wo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cf(){}function Ex(t,e,r,n,s){if(s){if(typeof n=="function"){var l=n;n=function(){var d=To(o);l.call(d)}}var o=Uh(e,n,t,0,null,!1,!1,"",cf);return t._reactRootContainer=o,t[Lr]=o.current,Ls(t.nodeType===8?t.parentNode:t),Fn(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var i=n;n=function(){var d=To(u);i.call(d)}}var u=Ju(t,0,!1,null,null,!1,!1,"",cf);return t._reactRootContainer=u,t[Lr]=u.current,Ls(t.nodeType===8?t.parentNode:t),Fn(function(){Ko(e,u,r,n)}),u}function Ho(t,e,r,n,s){var l=r._reactRootContainer;if(l){var o=l;if(typeof s=="function"){var i=s;s=function(){var u=To(o);i.call(u)}}Ko(e,o,t,s)}else o=Ex(r,e,t,s,n);return To(o)}y0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=us(e.pendingLanes);r!==0&&(xu(e,r|1),$t(e,Pe()),!(ce&6)&&(Pa=Pe()+500,pn()))}break;case 13:Fn(function(){var n=Mr(t,1);if(n!==null){var s=bt();lr(n,t,1,s)}}),Xu(t,1)}};wu=function(t){if(t.tag===13){var e=Mr(t,134217728);if(e!==null){var r=bt();lr(e,t,134217728,r)}Xu(t,134217728)}};v0=function(t){if(t.tag===13){var e=cn(t),r=Mr(t,e);if(r!==null){var n=bt();lr(r,t,e,n)}Xu(t,e)}};x0=function(){return me};w0=function(t,e){var r=me;try{return me=t,e()}finally{me=r}};yc=function(t,e,r){switch(e){case"input":if(uc(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Oo(n);if(!s)throw Error(P(90));Jf(n),uc(n,s)}}}break;case"textarea":Zf(t,r);break;case"select":e=r.value,e!=null&&wa(t,!!r.multiple,e,!1)}};l0=Gu;o0=Fn;var Nx={usingClientEntryPoint:!1,Events:[Qs,da,Oo,a0,s0,Gu]},ls={findFiberByHostInstance:An,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kx={bundleType:ls.bundleType,version:ls.version,rendererPackageName:ls.rendererPackageName,rendererConfig:ls.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=u0(t),t===null?null:t.stateNode},findFiberByHostInstance:ls.findFiberByHostInstance||bx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ol=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ol.isDisabled&&Ol.supportsFiber)try{Po=Ol.inject(kx),wr=Ol}catch{}}Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nx;Lt.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ed(e))throw Error(P(200));return wx(t,e,null,r)};Lt.createRoot=function(t,e){if(!ed(t))throw Error(P(299));var r=!1,n="",s=Bh;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ju(t,1,!1,null,null,r,!1,n,s),t[Lr]=e.current,Ls(t.nodeType===8?t.parentNode:t),new Zu(e)};Lt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(P(188)):(t=Object.keys(t).join(","),Error(P(268,t)));return t=u0(e),t=t===null?null:t.stateNode,t};Lt.flushSync=function(t){return Fn(t)};Lt.hydrate=function(t,e,r){if(!Wo(e))throw Error(P(200));return Ho(null,t,e,!0,r)};Lt.hydrateRoot=function(t,e,r){if(!ed(t))throw Error(P(405));var n=r!=null&&r.hydratedSources||null,s=!1,l="",o=Bh;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Uh(e,null,t,1,r??null,s,!1,l,o),t[Lr]=e.current,Ls(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Vo(e)};Lt.render=function(t,e,r){if(!Wo(e))throw Error(P(200));return Ho(null,t,e,!1,r)};Lt.unmountComponentAtNode=function(t){if(!Wo(t))throw Error(P(40));return t._reactRootContainer?(Fn(function(){Ho(null,null,t,!1,function(){t._reactRootContainer=null,t[Lr]=null})}),!0):!1};Lt.unstable_batchedUpdates=Gu;Lt.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Wo(r))throw Error(P(200));if(t==null||t._reactInternals===void 0)throw Error(P(38));return Ho(t,e,r,!1,n)};Lt.version="18.3.1-next-f1338f8080-20240426";function Kh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Kh)}catch(t){console.error(t)}}Kh(),Kf.exports=Lt;var _x=Kf.exports,Vh,uf=_x;Vh=uf.createRoot,uf.hydrateRoot;/**
 * @license lucide-react v0.471.2 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Wh=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.471.2 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Cx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.471.2 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=k.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:l,iconNode:o,...i},u)=>k.createElement("svg",{ref:u,...Cx,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:Wh("lucide",s),...i},[...o.map(([d,m])=>k.createElement(d,m)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.471.2 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=(t,e)=>{const r=k.forwardRef(({className:n,...s},l)=>k.createElement(Dx,{ref:l,iconNode:e,className:Wh(`lucide-${Sx(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.471.2 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Ll=je("Bell",Tx);/**
 * @license lucide-react v0.471.2 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],no=je("Calendar",Ax);/**
 * @license lucide-react v0.471.2 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],td=je("ChevronLeft",$x);/**
 * @license lucide-react v0.471.2 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],rd=je("ChevronRight",Px);/**
 * @license lucide-react v0.471.2 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Qe=je("CircleAlert",jx);/**
 * @license lucide-react v0.471.2 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],fe=je("CircleCheckBig",Rx);/**
 * @license lucide-react v0.471.2 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Ml=je("Clock",Ix);/**
 * @license lucide-react v0.471.2 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Lx=je("DollarSign",Ox);/**
 * @license lucide-react v0.471.2 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],df=je("FileText",Mx);/**
 * @license lucide-react v0.471.2 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],mf=je("Lock",Fx);/**
 * @license lucide-react v0.471.2 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Ux=je("MapPin",zx);/**
 * @license lucide-react v0.471.2 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],Kx=je("Menu",Bx);/**
 * @license lucide-react v0.471.2 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],Wx=je("PanelLeft",Vx);/**
 * @license lucide-react v0.471.2 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Nn=je("Plus",Hx);/**
 * @license lucide-react v0.471.2 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],qx=je("RefreshCw",Gx);/**
 * @license lucide-react v0.471.2 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Fl=je("Trash2",Yx);/**
 * @license lucide-react v0.471.2 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Jx=je("TrendingUp",Qx);/**
 * @license lucide-react v0.471.2 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],qi=je("Upload",Xx);/**
 * @license lucide-react v0.471.2 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Vr=je("User",Zx);/**
 * @license lucide-react v0.471.2 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ms=je("X",ew);/**
 * @license lucide-react v0.471.2 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Wr=je("Zap",tw),rw="modulepreload",nw=function(t){return"/"+t},ff={},Xs=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),i=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(u=>{if(u=nw(u),u in ff)return;ff[u]=!0;const d=u.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":rw,d||(h.as="script"),h.crossOrigin="",h.href=u,i&&h.setAttribute("nonce",i),document.head.appendChild(h),d)return new Promise((x,_)=>{h.addEventListener("load",x),h.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${u}`)))})}))}function l(o){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o}return s.then(o=>{for(const i of o||[])i.status==="rejected"&&l(i.reason);return e().catch(l)})},aw=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Xs(async()=>{const{default:n}=await Promise.resolve().then(()=>La);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class nd extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class sw extends nd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class hf extends nd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class pf extends nd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Qc;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Qc||(Qc={}));var lw=function(t,e,r,n){function s(l){return l instanceof r?l:new r(function(o){o(l)})}return new(r||(r=Promise))(function(l,o){function i(m){try{d(n.next(m))}catch(h){o(h)}}function u(m){try{d(n.throw(m))}catch(h){o(h)}}function d(m){m.done?l(m.value):s(m.value).then(i,u)}d((n=n.apply(t,e||[])).next())})};class ow{constructor(e,{headers:r={},customFetch:n,region:s=Qc.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=aw(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return lw(this,void 0,void 0,function*(){try{const{headers:s,method:l,body:o}=r;let i={},{region:u}=r;u||(u=this.region);const d=new URL(`${this.url}/${e}`);u&&u!=="any"&&(i["x-region"]=u,d.searchParams.set("forceFunctionRegion",u));let m;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(i["Content-Type"]="application/octet-stream",m=o):typeof o=="string"?(i["Content-Type"]="text/plain",m=o):typeof FormData<"u"&&o instanceof FormData?m=o:(i["Content-Type"]="application/json",m=JSON.stringify(o)));const h=yield this.fetch(d.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},i),this.headers),s),body:m}).catch(A=>{throw new sw(A)}),x=h.headers.get("x-relay-error");if(x&&x==="true")throw new hf(h);if(!h.ok)throw new pf(h);let _=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),S;return _==="application/json"?S=yield h.json():_==="application/octet-stream"?S=yield h.blob():_==="text/event-stream"?S=h:_==="multipart/form-data"?S=yield h.formData():S=yield h.text(),{data:S,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof pf||s instanceof hf?s.context:void 0}}})}}var Ct={},ad={},Go={},Zs={},qo={},Yo={},iw=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ja=iw();const cw=ja.fetch,Hh=ja.fetch.bind(ja),Gh=ja.Headers,uw=ja.Request,dw=ja.Response,La=Object.freeze(Object.defineProperty({__proto__:null,Headers:Gh,Request:uw,Response:dw,default:Hh,fetch:cw},Symbol.toStringTag,{value:"Module"})),mw=sy(La);var Qo={};Object.defineProperty(Qo,"__esModule",{value:!0});let fw=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Qo.default=fw;var qh=Gt&&Gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Yo,"__esModule",{value:!0});const hw=qh(mw),pw=qh(Qo);let gw=class{constructor(e){var r,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(r=e.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=hw.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=new Headers(this.headers),this.headers.set(e,r),this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var o,i,u,d;let m=null,h=null,x=null,_=l.status,S=l.statusText;if(l.ok){if(this.method!=="HEAD"){const y=await l.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=y:h=JSON.parse(y))}const M=(i=this.headers.get("Prefer"))===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),N=(u=l.headers.get("content-range"))===null||u===void 0?void 0:u.split("/");M&&N&&N.length>1&&(x=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(m={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,x=null,_=406,S="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const M=await l.text();try{m=JSON.parse(M),Array.isArray(m)&&l.status===404&&(h=[],m=null,_=200,S="OK")}catch{l.status===404&&M===""?(_=204,S="No Content"):m={message:M}}if(m&&this.isMaybeSingle&&(!((d=m==null?void 0:m.details)===null||d===void 0)&&d.includes("0 rows"))&&(m=null,_=200,S="OK"),m&&this.shouldThrowOnError)throw new pw.default(m)}return{error:m,data:h,count:x,status:_,statusText:S}});return this.shouldThrowOnError||(s=s.catch(l=>{var o,i,u;return{error:{message:`${(o=l==null?void 0:l.name)!==null&&o!==void 0?o:"FetchError"}: ${l==null?void 0:l.message}`,details:`${(i=l==null?void 0:l.stack)!==null&&i!==void 0?i:""}`,hint:"",code:`${(u=l==null?void 0:l.code)!==null&&u!==void 0?u:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,r)}returns(){return this}overrideTypes(){return this}};Yo.default=gw;var yw=Gt&&Gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qo,"__esModule",{value:!0});const vw=yw(Yo);let xw=class extends vw.default{select(e){let r=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:l=s}={}){const o=l?`${l}.order`:"order",i=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${i?`${i},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:s=n}={}){const l=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:l=!1,format:o="text"}={}){var i;const u=[e?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,l?"wal":null].filter(Boolean).join("|"),d=(i=this.headers.get("Accept"))!==null&&i!==void 0?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${d}"; options=${u};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};qo.default=xw;var ww=Gt&&Gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zs,"__esModule",{value:!0});const bw=ww(qo);let Ew=class extends bw.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:s}={}){let l="";s==="plain"?l="pl":s==="phrase"?l="ph":s==="websearch"&&(l="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${l}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};Zs.default=Ew;var Nw=Gt&&Gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Go,"__esModule",{value:!0});const os=Nw(Zs);let kw=class{constructor(e,{headers:r={},schema:n,fetch:s}){this.url=e,this.headers=new Headers(r),this.schema=n,this.fetch=s}select(e,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let l=!1;const o=(e??"*").split("").map(i=>/\s/.test(i)&&!l?"":(i==='"'&&(l=!l),i)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new os.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:r,defaultToNull:n=!0}={}){var s;const l="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((i,u)=>i.concat(Object.keys(u)),[]);if(o.length>0){const i=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",i.join(","))}}return new os.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:l=!0}={}){var o;const i="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),s&&this.headers.append("Prefer",`count=${s}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((d,m)=>d.concat(Object.keys(m)),[]);if(u.length>0){const d=[...new Set(u)].map(m=>`"${m}"`);this.url.searchParams.set("columns",d.join(","))}}return new os.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:r}={}){var n;const s="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new os.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var r;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new os.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Go.default=kw;var Yh=Gt&&Gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ad,"__esModule",{value:!0});const _w=Yh(Go),Sw=Yh(Zs);let Cw=class Qh{constructor(e,{headers:r={},schema:n,fetch:s}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(e){const r=new URL(`${this.url}/${e}`);return new _w.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Qh(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:s=!1,count:l}={}){var o;let i;const u=new URL(`${this.url}/rpc/${e}`);let d;n||s?(i=n?"HEAD":"GET",Object.entries(r).filter(([h,x])=>x!==void 0).map(([h,x])=>[h,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([h,x])=>{u.searchParams.append(h,x)})):(i="POST",d=r);const m=new Headers(this.headers);return l&&m.set("Prefer",`count=${l}`),new Sw.default({method:i,url:u,headers:m,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};ad.default=Cw;var Ma=Gt&&Gt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ct,"__esModule",{value:!0});Ct.PostgrestError=Ct.PostgrestBuilder=Ct.PostgrestTransformBuilder=Ct.PostgrestFilterBuilder=Ct.PostgrestQueryBuilder=Ct.PostgrestClient=void 0;const Jh=Ma(ad);Ct.PostgrestClient=Jh.default;const Xh=Ma(Go);Ct.PostgrestQueryBuilder=Xh.default;const Zh=Ma(Zs);Ct.PostgrestFilterBuilder=Zh.default;const ep=Ma(qo);Ct.PostgrestTransformBuilder=ep.default;const tp=Ma(Yo);Ct.PostgrestBuilder=tp.default;const rp=Ma(Qo);Ct.PostgrestError=rp.default;var Dw=Ct.default={PostgrestClient:Jh.default,PostgrestQueryBuilder:Xh.default,PostgrestFilterBuilder:Zh.default,PostgrestTransformBuilder:ep.default,PostgrestBuilder:tp.default,PostgrestError:rp.default};const{PostgrestClient:Tw,PostgrestQueryBuilder:t1,PostgrestFilterBuilder:r1,PostgrestTransformBuilder:n1,PostgrestBuilder:a1,PostgrestError:s1}=Dw;class Aw{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const $w="2.15.1",Pw=`realtime-js/${$w}`,jw="1.0.0",Jc=1e4,Rw=1e3,Iw=100;var _s;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(_s||(_s={}));var Ue;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ue||(Ue={}));var nr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(nr||(nr={}));var Xc;(function(t){t.websocket="websocket"})(Xc||(Xc={}));var Tn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Tn||(Tn={}));class Ow{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),l=r.getUint8(2);let o=this.HEADER_LENGTH+2;const i=n.decode(e.slice(o,o+s));o=o+s;const u=n.decode(e.slice(o,o+l));o=o+l;const d=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:i,event:u,payload:d}}}class np{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var he;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(he||(he={}));const gf=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((l,o)=>(l[o]=Lw(o,t,e,s),l),{})},Lw=(t,e,r,n)=>{const s=e.find(i=>i.name===t),l=s==null?void 0:s.type,o=r[t];return l&&!n.includes(l)?ap(l,o):Zc(o)},ap=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return Uw(e,r)}switch(t){case he.bool:return Mw(e);case he.float4:case he.float8:case he.int2:case he.int4:case he.int8:case he.numeric:case he.oid:return Fw(e);case he.json:case he.jsonb:return zw(e);case he.timestamp:return Bw(e);case he.abstime:case he.date:case he.daterange:case he.int4range:case he.int8range:case he.money:case he.reltime:case he.text:case he.time:case he.timestamptz:case he.timetz:case he.tsrange:case he.tstzrange:return Zc(e);default:return Zc(e)}},Zc=t=>t,Mw=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Fw=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},zw=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Uw=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let l;const o=t.slice(1,r);try{l=JSON.parse("["+o+"]")}catch{l=o?o.split(","):[]}return l.map(i=>ap(e,i))}return t},Bw=t=>typeof t=="string"?t.replace(" ","T"):t,sp=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Yi{constructor(e,r,n={},s=Jc){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var yf;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(yf||(yf={}));class Ss{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:l,onLeave:o,onSync:i}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ss.syncState(this.state,s,l,o),this.pendingDiffs.forEach(u=>{this.state=Ss.syncDiff(this.state,u,l,o)}),this.pendingDiffs=[],i()}),this.channel._on(n.diff,{},s=>{const{onJoin:l,onLeave:o,onSync:i}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ss.syncDiff(this.state,s,l,o),i())}),this.onJoin((s,l,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:l,newPresences:o})}),this.onLeave((s,l,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:l,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const l=this.cloneDeep(e),o=this.transformState(r),i={},u={};return this.map(l,(d,m)=>{o[d]||(u[d]=m)}),this.map(o,(d,m)=>{const h=l[d];if(h){const x=m.map(M=>M.presence_ref),_=h.map(M=>M.presence_ref),S=m.filter(M=>_.indexOf(M.presence_ref)<0),A=h.filter(M=>x.indexOf(M.presence_ref)<0);S.length>0&&(i[d]=S),A.length>0&&(u[d]=A)}else i[d]=m}),this.syncDiff(l,{joins:i,leaves:u},n,s)}static syncDiff(e,r,n,s){const{joins:l,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(l,(i,u)=>{var d;const m=(d=e[i])!==null&&d!==void 0?d:[];if(e[i]=this.cloneDeep(u),m.length>0){const h=e[i].map(_=>_.presence_ref),x=m.filter(_=>h.indexOf(_.presence_ref)<0);e[i].unshift(...x)}n(i,m,u)}),this.map(o,(i,u)=>{let d=e[i];if(!d)return;const m=u.map(h=>h.presence_ref);d=d.filter(h=>m.indexOf(h.presence_ref)<0),e[i]=d,s(i,d,u),d.length===0&&delete e[i]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var vf;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(vf||(vf={}));var Cs;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Cs||(Cs={}));var $r;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})($r||($r={}));class sd{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Ue.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Yi(this,nr.join,this.params,this.timeout),this.rejoinTimer=new np(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ue.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ue.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ue.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ue.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ue.errored,this.rejoinTimer.scheduleTimeout())}),this._on(nr.reply,{},(s,l)=>{this._trigger(this._replyEventName(l),s)}),this.presence=new Ss(this),this.broadcastEndpointURL=sp(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Ue.closed){const{config:{broadcast:l,presence:o,private:i}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(x=>x.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Cs.PRESENCE]&&this.bindings[Cs.PRESENCE].length>0,m={},h={broadcast:l,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:u,private:i};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(x=>e==null?void 0:e($r.CHANNEL_ERROR,x)),this._onClose(()=>e==null?void 0:e($r.CLOSED)),this.updateJoinPayload(Object.assign({config:h},m)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var _;if(this.socket.setAuth(),x===void 0){e==null||e($r.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,A=(_=S==null?void 0:S.length)!==null&&_!==void 0?_:0,M=[];for(let N=0;N<A;N++){const y=S[N],{filter:{event:b,schema:T,table:j,filter:I}}=y,O=x&&x[N];if(O&&O.event===b&&O.schema===T&&O.table===j&&O.filter===I)M.push(Object.assign(Object.assign({},y),{id:O.id}));else{this.unsubscribe(),this.state=Ue.errored,e==null||e($r.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=M,e&&e($r.SUBSCRIBED);return}}).receive("error",x=>{this.state=Ue.errored,e==null||e($r.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{e==null||e($r.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Ue.joined&&e===Cs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:l,payload:o}=e,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var o,i,u;const d=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(i=(o=this.params)===null||o===void 0?void 0:o.config)===null||i===void 0?void 0:i.broadcast)===null||u===void 0)&&u.ack)&&l("ok"),d.receive("ok",()=>l("ok")),d.receive("error",()=>l("error")),d.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ue.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(nr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Yi(this,nr.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ue.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,l=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(l),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Yi(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Iw){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,l;const o=e.toLocaleLowerCase(),{close:i,error:u,leave:d,join:m}=nr;if(n&&[i,u,d,m].indexOf(o)>=0&&n!==this._joinRef())return;let x=this._onMessage(o,r,n);if(r&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(_=>{var S,A,M;return((S=_.filter)===null||S===void 0?void 0:S.event)==="*"||((M=(A=_.filter)===null||A===void 0?void 0:A.event)===null||M===void 0?void 0:M.toLocaleLowerCase())===o}).map(_=>_.callback(x,n)):(l=this.bindings[o])===null||l===void 0||l.filter(_=>{var S,A,M,N,y,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in _){const T=_.id,j=(S=_.filter)===null||S===void 0?void 0:S.event;return T&&((A=r.ids)===null||A===void 0?void 0:A.includes(T))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((M=r.data)===null||M===void 0?void 0:M.type.toLocaleLowerCase()))}else{const T=(y=(N=_==null?void 0:_.filter)===null||N===void 0?void 0:N.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return T==="*"||T===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===o}).map(_=>{if(typeof x=="object"&&"ids"in x){const S=x.data,{schema:A,table:M,commit_timestamp:N,type:y,errors:b}=S;x=Object.assign(Object.assign({},{schema:A,table:M,commit_timestamp:N,eventType:y,new:{},old:{},errors:b}),this._getPayloadRecords(S))}_.callback(x,n)})}_isClosed(){return this.state===Ue.closed}_isJoined(){return this.state===Ue.joined}_isJoining(){return this.state===Ue.joining}_isLeaving(){return this.state===Ue.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),l={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(l):this.bindings[s]=[l],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var l;return!(((l=s.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===n&&sd.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(nr.close,{},e)}_onError(e){this._on(nr.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ue.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=gf(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=gf(e.columns,e.old_record)),r}}const xf=()=>{},zl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Kw=[1e3,2e3,5e3,1e4],Vw=1e4,Ww=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Hw{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Jc,this.transport=null,this.heartbeatIntervalMs=zl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=xf,this.ref=0,this.reconnectTimer=null,this.logger=xf,this.conn=null,this.sendBuffer=[],this.serializer=new Ow,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let l;return s?l=s:typeof fetch>"u"?l=(...o)=>Xs(async()=>{const{default:i}=await Promise.resolve().then(()=>La);return{default:i}},void 0).then(({default:i})=>i(...o)).catch(i=>{throw new Error(`Failed to load @supabase/node-fetch: ${i.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):l=fetch,(...o)=>l(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Xc.websocket}`,this.httpEndpoint=sp(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Aw.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:jw}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case _s.connecting:return Tn.Connecting;case _s.open:return Tn.Open;case _s.closing:return Tn.Closing;default:return Tn.Closed}}isConnected(){return this.connectionState()===Tn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(l=>l.topic===n);if(s)return s;{const l=new sd(`realtime:${e}`,r,this);return this.channels.push(l),l}}push(e){const{topic:r,event:n,payload:s,ref:l}=e,o=()=>{this.encode(e,i=>{var u;(u=this.conn)===null||u===void 0||u.send(i)})};this.log("push",`${r} ${n} (${l})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Rw,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},zl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{r.topic==="phoenix"&&r.event==="phx_reply"&&this.heartbeatCallback(r.payload.status==="ok"?"ok":"error"),r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:l,ref:o}=r,i=o?`(${o})`:"",u=l.status||"";this.log("receive",`${u} ${n} ${s} ${i}`.trim(),l),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(s,l,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(nr.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([Ww],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:Pw};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(nr.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new np(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},zl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,l,o,i,u,d;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Jc,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:zl.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(i=e==null?void 0:e.reconnectAfterMs)!==null&&i!==void 0?i:m=>Kw[m-1]||Vw,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(m,h)=>h(JSON.stringify(m)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class ld extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function We(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Gw extends ld{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class eu extends ld{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var qw=function(t,e,r,n){function s(l){return l instanceof r?l:new r(function(o){o(l)})}return new(r||(r=Promise))(function(l,o){function i(m){try{d(n.next(m))}catch(h){o(h)}}function u(m){try{d(n.throw(m))}catch(h){o(h)}}function d(m){m.done?l(m.value):s(m.value).then(i,u)}d((n=n.apply(t,e||[])).next())})};const lp=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Xs(async()=>{const{default:n}=await Promise.resolve().then(()=>La);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Yw=()=>qw(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Xs(()=>Promise.resolve().then(()=>La),void 0)).Response:Response}),tu=t=>{if(Array.isArray(t))return t.map(r=>tu(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[s]=tu(n)}),e},Qw=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Bn=function(t,e,r,n){function s(l){return l instanceof r?l:new r(function(o){o(l)})}return new(r||(r=Promise))(function(l,o){function i(m){try{d(n.next(m))}catch(h){o(h)}}function u(m){try{d(n.throw(m))}catch(h){o(h)}}function d(m){m.done?l(m.value):s(m.value).then(i,u)}d((n=n.apply(t,e||[])).next())})};const Qi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Jw=(t,e,r)=>Bn(void 0,void 0,void 0,function*(){const n=yield Yw();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{const l=t.status||500,o=(s==null?void 0:s.statusCode)||l+"";e(new Gw(Qi(s),l,o))}).catch(s=>{e(new eu(Qi(s),s))}):e(new eu(Qi(t),t))}),Xw=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(Qw(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),r))};function el(t,e,r,n,s,l){return Bn(this,void 0,void 0,function*(){return new Promise((o,i)=>{t(r,Xw(e,n,s,l)).then(u=>{if(!u.ok)throw u;return n!=null&&n.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>Jw(u,i,n))})})}function Ao(t,e,r,n){return Bn(this,void 0,void 0,function*(){return el(t,"GET",e,r,n)})}function vr(t,e,r,n,s){return Bn(this,void 0,void 0,function*(){return el(t,"POST",e,n,s,r)})}function ru(t,e,r,n,s){return Bn(this,void 0,void 0,function*(){return el(t,"PUT",e,n,s,r)})}function Zw(t,e,r,n){return Bn(this,void 0,void 0,function*(){return el(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function op(t,e,r,n,s){return Bn(this,void 0,void 0,function*(){return el(t,"DELETE",e,n,s,r)})}var vt=function(t,e,r,n){function s(l){return l instanceof r?l:new r(function(o){o(l)})}return new(r||(r=Promise))(function(l,o){function i(m){try{d(n.next(m))}catch(h){o(h)}}function u(m){try{d(n.throw(m))}catch(h){o(h)}}function d(m){m.done?l(m.value):s(m.value).then(i,u)}d((n=n.apply(t,e||[])).next())})};const eb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},wf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class tb{constructor(e,r={},n,s){this.url=e,this.headers=r,this.bucketId=n,this.fetch=lp(s)}uploadOrUpdate(e,r,n,s){return vt(this,void 0,void 0,function*(){try{let l;const o=Object.assign(Object.assign({},wf),s);let i=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",o.cacheControl),u&&l.append("metadata",this.encodeMetadata(u)),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",o.cacheControl),u&&l.append("metadata",this.encodeMetadata(u))):(l=n,i["cache-control"]=`max-age=${o.cacheControl}`,i["content-type"]=o.contentType,u&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),s!=null&&s.headers&&(i=Object.assign(Object.assign({},i),s.headers));const d=this._removeEmptyFolders(r),m=this._getFinalPath(d),h=yield(e=="PUT"?ru:vr)(this.fetch,`${this.url}/object/${m}`,l,Object.assign({headers:i},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(l){if(We(l))return{data:null,error:l};throw l}})}upload(e,r,n){return vt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return vt(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),o=this._getFinalPath(l),i=new URL(this.url+`/object/upload/sign/${o}`);i.searchParams.set("token",r);try{let u;const d=Object.assign({upsert:wf.upsert},s),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),u.append("",n)):typeof FormData<"u"&&n instanceof FormData?(u=n,u.append("cacheControl",d.cacheControl)):(u=n,m["cache-control"]=`max-age=${d.cacheControl}`,m["content-type"]=d.contentType);const h=yield ru(this.fetch,i.toString(),u,{headers:m});return{data:{path:l,fullPath:h.Key},error:null}}catch(u){if(We(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(e,r){return vt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const l=yield vr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+l.url),i=o.searchParams.get("token");if(!i)throw new ld("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:i},error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}})}update(e,r,n){return vt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return vt(this,void 0,void 0,function*(){try{return{data:yield vr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}})}copy(e,r,n){return vt(this,void 0,void 0,function*(){try{return{data:{path:(yield vr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return vt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),l=yield vr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${o}`)},{data:l,error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return vt(this,void 0,void 0,function*(){try{const s=yield vr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${l}`):null})),error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}})}download(e,r){return vt(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=l?`?${l}`:"";try{const i=this._getFinalPath(e);return{data:yield(yield Ao(this.fetch,`${this.url}/${s}/${i}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(i){if(We(i))return{data:null,error:i};throw i}})}info(e){return vt(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield Ao(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:tu(n),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}})}exists(e){return vt(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield Zw(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(We(n)&&n instanceof eu){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],l=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";l!==""&&s.push(l);const i=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});u!==""&&s.push(u);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${d}`)}}}remove(e){return vt(this,void 0,void 0,function*(){try{return{data:yield op(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}})}list(e,r,n){return vt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},eb),r),{prefix:e||""});return{data:yield vr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}})}listV2(e,r){return vt(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield vr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const rb="2.11.0",nb={"X-Client-Info":`storage-js/${rb}`};var Zn=function(t,e,r,n){function s(l){return l instanceof r?l:new r(function(o){o(l)})}return new(r||(r=Promise))(function(l,o){function i(m){try{d(n.next(m))}catch(h){o(h)}}function u(m){try{d(n.throw(m))}catch(h){o(h)}}function d(m){m.done?l(m.value):s(m.value).then(i,u)}d((n=n.apply(t,e||[])).next())})};class ab{constructor(e,r={},n,s){const l=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href,this.headers=Object.assign(Object.assign({},nb),r),this.fetch=lp(n)}listBuckets(){return Zn(this,void 0,void 0,function*(){try{return{data:yield Ao(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(We(e))return{data:null,error:e};throw e}})}getBucket(e){return Zn(this,void 0,void 0,function*(){try{return{data:yield Ao(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Zn(this,void 0,void 0,function*(){try{return{data:yield vr(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return Zn(this,void 0,void 0,function*(){try{return{data:yield ru(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Zn(this,void 0,void 0,function*(){try{return{data:yield vr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Zn(this,void 0,void 0,function*(){try{return{data:yield op(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}})}}class sb extends ab{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new tb(this.url,this.headers,e,this.fetch)}}const lb="2.56.0";let fs="";typeof Deno<"u"?fs="deno":typeof document<"u"?fs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?fs="react-native":fs="node";const ob={"X-Client-Info":`supabase-js-${fs}/${lb}`},ib={headers:ob},cb={schema:"public"},ub={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},db={};var mb=function(t,e,r,n){function s(l){return l instanceof r?l:new r(function(o){o(l)})}return new(r||(r=Promise))(function(l,o){function i(m){try{d(n.next(m))}catch(h){o(h)}}function u(m){try{d(n.throw(m))}catch(h){o(h)}}function d(m){m.done?l(m.value):s(m.value).then(i,u)}d((n=n.apply(t,e||[])).next())})};const fb=t=>{let e;return t?e=t:typeof fetch>"u"?e=Hh:e=fetch,(...r)=>e(...r)},hb=()=>typeof Headers>"u"?Gh:Headers,pb=(t,e,r)=>{const n=fb(r),s=hb();return(l,o)=>mb(void 0,void 0,void 0,function*(){var i;const u=(i=yield e())!==null&&i!==void 0?i:t;let d=new s(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${u}`),n(l,Object.assign(Object.assign({},o),{headers:d}))})};var gb=function(t,e,r,n){function s(l){return l instanceof r?l:new r(function(o){o(l)})}return new(r||(r=Promise))(function(l,o){function i(m){try{d(n.next(m))}catch(h){o(h)}}function u(m){try{d(n.throw(m))}catch(h){o(h)}}function d(m){m.done?l(m.value):s(m.value).then(i,u)}d((n=n.apply(t,e||[])).next())})};function yb(t){return t.endsWith("/")?t:t+"/"}function vb(t,e){var r,n;const{db:s,auth:l,realtime:o,global:i}=t,{db:u,auth:d,realtime:m,global:h}=e,x={db:Object.assign(Object.assign({},u),s),auth:Object.assign(Object.assign({},d),l),realtime:Object.assign(Object.assign({},m),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),i),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=i==null?void 0:i.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>gb(this,void 0,void 0,function*(){return""})};return t.accessToken?x.accessToken=t.accessToken:delete x.accessToken,x}const ip="2.71.1",aa=30*1e3,nu=3,Ji=nu*aa,xb="http://localhost:9999",wb="supabase.auth.token",bb={"X-Client-Info":`gotrue-js/${ip}`},au="X-Supabase-Api-Version",cp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Eb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Nb=10*60*1e3;class od extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function J(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class kb extends od{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function _b(t){return J(t)&&t.name==="AuthApiError"}class up extends od{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class gn extends od{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class qr extends gn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Sb(t){return J(t)&&t.name==="AuthSessionMissingError"}class Ul extends gn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Bl extends gn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Kl extends gn{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Cb(t){return J(t)&&t.name==="AuthImplicitGrantRedirectError"}class bf extends gn{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class su extends gn{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Xi(t){return J(t)&&t.name==="AuthRetryableFetchError"}class Ef extends gn{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class lu extends gn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const $o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Nf=` 	
\r=`.split(""),Db=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Nf.length;e+=1)t[Nf[e].charCodeAt(0)]=-2;for(let e=0;e<$o.length;e+=1)t[$o[e].charCodeAt(0)]=e;return t})();function kf(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r($o[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r($o[n]),e.queuedBits-=6}}function dp(t,e,r){const n=Db[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function _f(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},l=o=>{$b(o,n,r)};for(let o=0;o<t.length;o+=1)dp(t.charCodeAt(o),s,l);return e.join("")}function Tb(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Ab(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}Tb(n,e)}}function $b(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Pb(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)dp(t.charCodeAt(s),r,n);return new Uint8Array(e)}function jb(t){const e=[];return Ab(t,r=>e.push(r)),new Uint8Array(e)}function Rb(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>kf(s,r,n)),kf(null,r,n),e.join("")}function Ib(t){return Math.round(Date.now()/1e3)+t}function Ob(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const er=()=>typeof window<"u"&&typeof document<"u",kn={tested:!1,writable:!1},mp=()=>{if(!er())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(kn.tested)return kn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),kn.tested=!0,kn.writable=!0}catch{kn.tested=!0,kn.writable=!1}return kn.writable};function Lb(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,l)=>{e[l]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const fp=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Xs(async()=>{const{default:n}=await Promise.resolve().then(()=>La);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Mb=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",sa=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},_n=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Hr=async(t,e)=>{await t.removeItem(e)};class Jo{constructor(){this.promise=new Jo.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Jo.promiseConstructor=Promise;function Zi(t){const e=t.split(".");if(e.length!==3)throw new lu("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Eb.test(e[n]))throw new lu("JWT not in base64url format");return{header:JSON.parse(_f(e[0])),payload:JSON.parse(_f(e[1])),signature:Pb(e[2]),raw:{header:e[0],payload:e[1]}}}async function Fb(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function zb(t,e){return new Promise((n,s)=>{(async()=>{for(let l=0;l<1/0;l++)try{const o=await t(l);if(!e(l,null,o)){n(o);return}}catch(o){if(!e(l,o)){s(o);return}}})()})}function Ub(t){return("0"+t.toString(16)).substr(-2)}function Bb(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let l=0;l<56;l++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,Ub).join("")}async function Kb(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(l=>String.fromCharCode(l)).join("")}async function Vb(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Kb(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ea(t,e,r=!1){const n=Bb();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await sa(t,`${e}-code-verifier`,s);const l=await Vb(n);return[l,n===l?"plain":"s256"]}const Wb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Hb(t){const e=t.headers.get(au);if(!e||!e.match(Wb))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Gb(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function qb(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Yb=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ta(t){if(!Yb.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ec(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Sf(t){return JSON.parse(JSON.stringify(t))}var Qb=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};const Dn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Jb=[502,503,504];async function Cf(t){var e;if(!Mb(t))throw new su(Dn(t),0);if(Jb.includes(t.status))throw new su(Dn(t),t.status);let r;try{r=await t.json()}catch(l){throw new up(Dn(l),l)}let n;const s=Hb(t);if(s&&s.getTime()>=cp["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Ef(Dn(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new qr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((l,o)=>l&&typeof o=="string",!0))throw new Ef(Dn(r),t.status,r.weak_password.reasons);throw new kb(Dn(r),t.status||500,n)}const Xb=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function ae(t,e,r,n){var s;const l=Object.assign({},n==null?void 0:n.headers);l[au]||(l[au]=cp["2024-01-01"].name),n!=null&&n.jwt&&(l.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const i=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await Zb(t,e,r+i,{headers:l,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(u):{data:Object.assign({},u),error:null}}async function Zb(t,e,r,n,s,l){const o=Xb(e,n,s,l);let i;try{i=await t(r,Object.assign({},o))}catch(u){throw console.error(u),new su(Dn(u),0)}if(i.ok||await Cf(i),n!=null&&n.noResolveJson)return i;try{return await i.json()}catch(u){await Cf(u)}}function Tr(t){var e;let r=null;nE(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Ib(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Df(t){const e=Tr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Zr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function eE(t){return{data:t,error:null}}function tE(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:l}=t,o=Qb(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),i={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:l},u=Object.assign({},o);return{data:{properties:i,user:u},error:null}}function rE(t){return t}function nE(t){return t.access_token&&t.refresh_token&&t.expires_in}const tc=["global","local","others"];var aE=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class sE{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=fp(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=tc[0]){if(tc.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${tc.join(", ")}`);try{return await ae(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(J(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Zr})}catch(n){if(J(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=aE(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:tE,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(J(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await ae(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Zr})}catch(r){if(J(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,l,o,i,u;try{const d={nextPage:null,lastPage:0,total:0},m=await ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(l=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&l!==void 0?l:""},xform:rE});if(m.error)throw m.error;const h=await m.json(),x=(o=m.headers.get("x-total-count"))!==null&&o!==void 0?o:0,_=(u=(i=m.headers.get("link"))===null||i===void 0?void 0:i.split(","))!==null&&u!==void 0?u:[];return _.length>0&&(_.forEach(S=>{const A=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(S.split(";")[1].split("=")[1]);d[`${M}Page`]=A}),d.total=parseInt(x)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(J(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){ta(e);try{return await ae(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Zr})}catch(r){if(J(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){ta(e);try{return await ae(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Zr})}catch(n){if(J(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){ta(e);try{return await ae(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Zr})}catch(n){if(J(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){ta(e.userId);try{const{data:r,error:n}=await ae(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(J(r))return{data:null,error:r};throw r}}async _deleteFactor(e){ta(e.userId),ta(e.id);try{return{data:await ae(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}}}function Tf(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function lE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ra={debug:!!(globalThis&&mp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class hp extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class oE extends hp{}async function iE(t,e,r){ra.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),ra.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){ra.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{ra.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw ra.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new oE(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ra.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}lE();const cE={url:xb,storageKey:wb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:bb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Af(t,e,r){return await r()}const na={};class Hs{constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Hs.nextInstanceID,Hs.nextInstanceID+=1,this.instanceID>0&&er()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},cE),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new sE({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=fp(s.fetch),this.lock=s.lock||Af,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:er()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=iE:this.lock=Af,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:mp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Tf(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Tf(this.memoryStorage)),er()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=na[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){na[this.storageKey]=Object.assign(Object.assign({},na[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=na[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){na[this.storageKey]=Object.assign(Object.assign({},na[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ip}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=Lb(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),er()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:l}=await this._getSessionFromURL(r,n);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),Cb(l)){const u=(e=l.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:o,redirectType:i}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",i),await this._saveSession(o),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return J(r)?{error:r}:{error:new up("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const l=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Tr}),{data:o,error:i}=l;if(i||!o)return{data:{user:null,session:null},error:i};const u=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(l){if(J(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(e){var r,n,s;try{let l;if("email"in e){const{email:m,password:h,options:x}=e;let _=null,S=null;this.flowType==="pkce"&&([_,S]=await ea(this.storage,this.storageKey)),l=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:m,password:h,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:_,code_challenge_method:S},xform:Tr})}else if("phone"in e){const{phone:m,password:h,options:x}=e;l=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:h,data:(n=x==null?void 0:x.data)!==null&&n!==void 0?n:{},channel:(s=x==null?void 0:x.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:Tr})}else throw new Bl("You must provide either an email or phone number and a password");const{data:o,error:i}=l;if(i||!o)return{data:{user:null,session:null},error:i};const u=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(l){if(J(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(e){try{let r;if("email"in e){const{email:l,password:o,options:i}=e;r=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:o,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:Df})}else if("phone"in e){const{phone:l,password:o,options:i}=e;r=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:o,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:Df})}else throw new Bl("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ul}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(J(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,n,s,l,o,i,u,d,m,h,x,_;let S,A;if("message"in e)S=e.message,A=e.signature;else{const{chain:M,wallet:N,statement:y,options:b}=e;let T;if(er())if(typeof N=="object")T=N;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))T=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=N}const j=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in T&&T.signIn){const I=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),y?{statement:y}:null));let O;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")O=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)O=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in O&&"signature"in O&&(typeof O.signedMessage=="string"||O.signedMessage instanceof Uint8Array)&&O.signature instanceof Uint8Array)S=typeof O.signedMessage=="string"?O.signedMessage:new TextDecoder().decode(O.signedMessage),A=O.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${j.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((d=b==null?void 0:b.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(m=b==null?void 0:b.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(O=>`- ${O}`)]:[]].join(`
`);const I=await T.signMessage(new TextEncoder().encode(S),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=I}}try{const{data:M,error:N}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:Rb(A)},!((x=e.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Tr});if(N)throw N;return!M||!M.session||!M.user?{data:{user:null,session:null},error:new Ul}:(M.session&&(await this._saveSession(M.session),await this._notifyAllSubscribers("SIGNED_IN",M.session)),{data:Object.assign({},M),error:N})}catch(M){if(J(M))return{data:{user:null,session:null},error:M};throw M}}async _exchangeCodeForSession(e){const r=await _n(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:l,error:o}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Tr});if(await Hr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new Ul}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:s??null}),error:o})}catch(l){if(J(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:l,nonce:o}=e,i=await ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:l,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Tr}),{data:u,error:d}=i;return d?{data:{user:null,session:null},error:d}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new Ul}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:d})}catch(r){if(J(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,l,o;try{if("email"in e){const{email:i,options:u}=e;let d=null,m=null;this.flowType==="pkce"&&([d,m]=await ea(this.storage,this.storageKey));const{error:h}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:i,data:(r=u==null?void 0:u.data)!==null&&r!==void 0?r:{},create_user:(n=u==null?void 0:u.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:d,code_challenge_method:m},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:i,options:u}=e,{data:d,error:m}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:i,data:(s=u==null?void 0:u.data)!==null&&s!==void 0?s:{},create_user:(l=u==null?void 0:u.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(o=u==null?void 0:u.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:m}}throw new Bl("You must provide either an email or phone number.")}catch(i){if(J(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var r,n;try{let s,l;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,l=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:i}=await ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:s,xform:Tr});if(i)throw i;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,d=o.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(s){if(J(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let l=null,o=null;return this.flowType==="pkce"&&([l,o]=await ea(this.storage,this.storageKey)),await ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:o}),headers:this.headers,xform:eE})}catch(l){if(J(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new qr;const{error:s}=await ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(J(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:l}=e,{error:o}=await ae(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:s,options:l}=e,{data:o,error:i}=await ae(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:i}}throw new Bl("You must provide either an email or phone number and a type")}catch(r){if(J(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await _n(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Ji:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await _n(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=ec()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(u,d,m)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,d,m))})}return{data:{session:e},error:null}}const{session:s,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{session:null},error:l}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Zr}):await this._useSession(async r=>{var n,s,l;const{data:o,error:i}=r;if(i)throw i;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new qr}:await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&l!==void 0?l:void 0,xform:Zr})})}catch(r){if(J(r))return Sb(r)&&(await this._removeSession(),await Hr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:l}=n;if(l)throw l;if(!s.session)throw new qr;const o=s.session;let i=null,u=null;this.flowType==="pkce"&&e.email!=null&&([i,u]=await ea(this.storage,this.storageKey));const{data:d,error:m}=await ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:u}),jwt:o.access_token,xform:Zr});if(m)throw m;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(J(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new qr;const r=Date.now()/1e3;let n=r,s=!0,l=null;const{payload:o}=Zi(e.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:i,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!i)return{data:{user:null,session:null},error:null};l=i}else{const{data:i,error:u}=await this._getUser(e.access_token);if(u)throw u;l={access_token:e.access_token,refresh_token:e.refresh_token,user:i.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(r){if(J(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:i}=r;if(i)throw i;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new qr;const{session:s,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(J(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!er())throw new Kl("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Kl(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new bf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Kl("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new bf("No code detected.");const{data:y,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:l,refresh_token:o,expires_in:i,expires_at:u,token_type:d}=e;if(!l||!i||!o||!d)throw new Kl("No session defined in URL");const m=Math.round(Date.now()/1e3),h=parseInt(i);let x=m+h;u&&(x=parseInt(u));const _=x-m;_*1e3<=aa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${h}s`);const S=x-h;m-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,x,m):m-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,x,m);const{data:A,error:M}=await this._getUser(l);if(M)throw M;const N={provider_token:n,provider_refresh_token:s,access_token:l,expires_in:h,expires_at:x,refresh_token:o,token_type:d,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:N,redirectType:e.type},error:null}}catch(n){if(J(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await _n(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:l}=r;if(l)return{error:l};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:i}=await this.admin.signOut(o,e);if(i&&!(_b(i)&&(i.status===404||i.status===401||i.status===403)))return{error:i}}return e!=="others"&&(await this._removeSession(),await Hr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=Ob(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:l},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await ea(this.storage,this.storageKey,!0));try{return await ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(l){if(J(l))return{data:null,error:l};throw l}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:s}=await this._useSession(async l=>{var o,i,u,d,m;const{data:h,error:x}=l;if(x)throw x;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await ae(this.fetch,"GET",_,{headers:this.headers,jwt:(m=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&m!==void 0?m:void 0})});if(s)throw s;return er()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(J(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:l,error:o}=r;if(o)throw o;return await ae(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(J(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await zb(async s=>(s>0&&await Fb(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Tr})),(s,l)=>{const o=200*Math.pow(2,s);return l&&Xi(l)&&Date.now()+o-n<aa})}catch(n){if(this._debug(r,"error",n),J(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),er()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await _n(this.storage,this.storageKey);if(s&&this.userStorage){let o=await _n(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await sa(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:ec()}else if(s&&!s.user&&!s.user){const o=await _n(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Hr(this.storage,this.storageKey+"-user"),await sa(this.storage,this.storageKey,s)):s.user=ec()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const l=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ji;if(this._debug(n,`session has${l?"":" not"} expired with margin of ${Ji}s`),l){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Xi(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:i}=await this._getUser(s.access_token);!i&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new qr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Jo;const{data:l,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!l.session)throw new qr;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const i={session:l.session,error:null};return this.refreshingDeferred.resolve(i),i}catch(l){if(this._debug(s,"error",l),J(l)){const o={session:null,error:l};return Xi(l)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(l),l}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const l=[],o=Array.from(this.stateChangeEmitters.values()).map(async i=>{try{await i.callback(e,r)}catch(u){l.push(u)}});if(await Promise.all(o),l.length>0){for(let i=0;i<l.length;i+=1)console.error(l[i]);throw l[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await sa(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const l=Sf(s);await sa(this.storage,this.storageKey,l)}else{const s=Sf(r);await sa(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Hr(this.storage,this.storageKey),await Hr(this.storage,this.storageKey+"-code-verifier"),await Hr(this.storage,this.storageKey+"-user"),this.userStorage&&await Hr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&er()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),aa);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/aa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${aa}ms, refresh threshold is ${nu} ticks`),s<=nu&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof hp)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!er()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[l,o]=await ea(this.storage,this.storageKey),i=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(i.toString())}if(n!=null&&n.queryParams){const l=new URLSearchParams(n.queryParams);s.push(l.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:l}=r;return l?{data:null,error:l}:await ae(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(J(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:l,error:o}=r;if(o)return{data:null,error:o};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:u,error:d}=await ae(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:(n=l==null?void 0:l.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((s=u==null?void 0:u.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(r){if(J(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:l}=r;if(l)return{data:null,error:l};const{data:o,error:i}=await ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:i})})}catch(r){if(J(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:l}=r;return l?{data:null,error:l}:await ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(J(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),l=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:s},error:l}=e;if(l)return{data:null,error:l};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Zi(s.access_token);let i=null;o.aal&&(i=o.aal);let u=i;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(u="aal2");const m=o.amr||[];return{data:{currentLevel:i,nextLevel:u,currentAuthenticationMethods:m},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(i=>i.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(i=>i.kid===e),n&&this.jwks_cached_at+Nb>s)return n;const{data:l,error:o}=await ae(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=s,n=l.keys.find(i=>i.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:_,error:S}=await this.getSession();if(S||!_.session)return{data:null,error:S};n=_.session.access_token}const{header:s,payload:l,signature:o,raw:{header:i,payload:u}}=Zi(n);r!=null&&r.allowExpired||Gb(l.exp);const d=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:_}=await this.getUser(n);if(_)throw _;return{data:{claims:l,header:s,signature:o},error:null}}const m=qb(s.alg),h=await crypto.subtle.importKey("jwk",d,m,!0,["verify"]);if(!await crypto.subtle.verify(m,h,o,jb(`${i}.${u}`)))throw new lu("Invalid JWT signature");return{data:{claims:l,header:s,signature:o},error:null}}catch(n){if(J(n))return{data:null,error:n};throw n}}}Hs.nextInstanceID=0;const uE=Hs;class dE extends uE{constructor(e){super(e)}}var mE=function(t,e,r,n){function s(l){return l instanceof r?l:new r(function(o){o(l)})}return new(r||(r=Promise))(function(l,o){function i(m){try{d(n.next(m))}catch(h){o(h)}}function u(m){try{d(n.throw(m))}catch(h){o(h)}}function d(m){m.done?l(m.value):s(m.value).then(i,u)}d((n=n.apply(t,e||[])).next())})};class fE{constructor(e,r,n){var s,l,o;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const i=yb(e),u=new URL(i);this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,m={db:cb,realtime:db,auth:Object.assign(Object.assign({},ub),{storageKey:d}),global:ib},h=vb(n??{},m);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(l=h.global.headers)!==null&&l!==void 0?l:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(x,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=pb(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Tw(new URL("rest/v1",u).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new sb(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new ow(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return mE(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:l,flowType:o,lock:i,debug:u},d,m){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new dE({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:l,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:i,debug:u,fetch:m,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Hw(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const hE=(t,e,r)=>new fE(t,e,r);function pE(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}pE()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const gE=void 0,yE=void 0,vE=hE(gE,yE),va={formatBillsForExcel:(t,e)=>t.map(r=>{const n=e.find(l=>l.name===r.stationName),s=V.getDaysUntilDue(r.dueDate);return{"세금 분류":r.category||"","세금 제목":r.name||"",충전소명:r.stationName||"","충전소 주소":r.address||"","납부 금액":r.amount==="미정"||!r.amount?"미정":r.amount,"납부 기한":r.dueDate||"",상태:r.status==="completed"?"납부 완료":r.status==="accounting_review"?"회계사 검토":"납부 예정","지연 여부":s<0&&r.status==="pending"?"지연":"정상","지연 일수":s<0&&r.status==="pending"?Math.abs(s):"",완료일:r.completedDate||"",등록일:r.uploadedAt||"","반복 납부":r.isRecurring?"예":"아니오","사용 승인일":(n==null?void 0:n.approvalDate)||"","안전 점검일":(n==null?void 0:n.safetyCheckDate)||"","충전소 상태":(n==null?void 0:n.status)==="operating"?"운영 중":(n==null?void 0:n.status)==="preparing"?"오픈 예정":"운영 종료"}}),formatStationsForExcel:(t,e)=>t.map(r=>{const n=e.filter(i=>i.stationName===r.name),s=n.reduce((i,u)=>i+V.getAmount(u.amount),0),l=n.filter(i=>i.status==="completed").reduce((i,u)=>i+V.getAmount(u.amount),0),o=n.filter(i=>i.status==="pending"||i.status==="accounting_review").reduce((i,u)=>i+V.getAmount(u.amount),0);return{충전소명:r.name||"",주소:r.address||"",상태:r.status==="operating"?"운영 중":r.status==="preparing"?"오픈 예정":"운영 종료","사용 승인일":r.approvalDate||"","안전 점검일":r.safetyCheckDate||"",등록일:r.registeredDate||"","세금 건수":n.length,"완료 건수":n.filter(i=>i.status==="completed").length,"예정 건수":n.filter(i=>i.status==="pending"||i.status==="accounting_review").length,"총 세금액":V.formatKoreanCurrency(s),"완료 금액":V.formatKoreanCurrency(l),"예정 금액":V.formatKoreanCurrency(o),완료율:n.length>0?Math.round(n.filter(i=>i.status==="completed").length/n.length*100)+"%":"0%"}}),convertToCSV:t=>{if(!t||t.length===0)throw new Error("다운로드할 데이터가 없습니다.");const e=Object.keys(t[0]);return[e.join(","),...t.map(n=>e.map(s=>{const l=n[s]||"";return String(l).includes(",")||String(l).includes('"')||String(l).includes(`
`)?`"${String(l).replace(/"/g,'""')}"`:String(l)}).join(","))].join(`
`)},downloadCSVInstant:(t,e)=>{try{if(!t||t.length===0)throw new Error("다운로드할 데이터가 없습니다.");const s="\uFEFF"+va.convertToCSV(t);if(s.length<32768){const o="data:text/csv;charset=utf-8,"+encodeURIComponent(s),i=document.createElement("a");return i.href=o,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),console.log("Data URI 다운로드 완료:",e),!0}const l=new Blob([s],{type:"text/csv;charset=utf-8"});return window.showSaveFilePicker?(window.showSaveFilePicker({suggestedName:e,types:[{description:"CSV files",accept:{"text/csv":[".csv"]}}]}).then(o=>o.createWritable()).then(o=>(o.write(l),o.close())).then(()=>{console.log("File System Access API 다운로드 완료:",e)}).catch(o=>{console.log("File System Access API 실패, fallback 사용"),(void 0).fallbackDownload(l,e)}),!0):window.navigator.msSaveOrOpenBlob?(window.navigator.msSaveOrOpenBlob(l,e),console.log("IE/Edge 다운로드 완료:",e),!0):(void 0).fallbackDownload(l,e)}catch(r){throw console.error("CSV download failed:",r),r}},fallbackDownload:(t,e)=>{try{const r=URL.createObjectURL(t),n=document.createElement("a");return n.href=r,n.download=e,n.style.display="none",document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:window})),document.body.removeChild(n),setTimeout(()=>URL.revokeObjectURL(r),100),console.log("Fallback 다운로드 완료:",e),!0}catch(r){return console.error("Fallback download failed:",r),!1}},downloadExcel:(t,e,r="Sheet1")=>{const n=e.replace(/\.xlsx?$/i,".csv");return va.downloadCSVInstant(t,n)}};class l1 extends a.Component{constructor(r){super(r);bi(this,"handleRetry",()=>{this.setState(r=>({hasError:!1,error:null,errorInfo:null,retryCount:r.retryCount+1}))});bi(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null,retryCount:0}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,n){this.setState({error:r,errorInfo:n,hasError:!0}),console.error("Error Boundary caught an error:",r,n);try{const s={timestamp:new Date().toISOString(),error:r.toString(),stack:r.stack,componentStack:n.componentStack,retryCount:this.state.retryCount},l=JSON.parse(localStorage.getItem("error_logs")||"[]");l.push(s),l.length>10&&l.shift(),localStorage.setItem("error_logs",JSON.stringify(l))}catch(s){console.warn("Failed to store error log:",s)}}render(){return this.state.hasError?a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-slate-800 flex items-center justify-center p-4"},a.createElement("div",{className:"max-w-md w-full bg-gradient-to-br from-slate-800/50 to-slate-700/30 backdrop-blur-md rounded-2xl p-8 border border-slate-600/30 shadow-2xl"},a.createElement("div",{className:"text-center"},a.createElement("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4"},a.createElement(Qe,{className:"w-8 h-8 text-red-400"})),a.createElement("h2",{className:"text-xl font-semibold text-gray-100 mb-2"},"오류가 발생했습니다"),a.createElement("p",{className:"text-gray-400 text-sm mb-6"},"시스템에 예상치 못한 오류가 발생했습니다. 잠시 후 다시 시도해주세요."),!1,a.createElement("div",{className:"space-y-3"},a.createElement("button",{onClick:this.handleRetry,className:"w-full px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-xl hover:from-blue-500 hover:to-blue-400 transition-all duration-200 font-medium shadow-lg flex items-center justify-center"},a.createElement(qx,{className:"w-4 h-4 mr-2"}),"다시 시도 ",this.state.retryCount>0&&`(${this.state.retryCount+1}번째)`),a.createElement("button",{onClick:this.handleReload,className:"w-full px-4 py-2 border border-slate-600/50 rounded-xl text-gray-300 hover:bg-slate-700/30 transition-colors font-medium"},"페이지 새로고침")),a.createElement("div",{className:"mt-6 text-xs text-gray-500"},a.createElement("p",null,"문제가 지속되면 관리자에게 문의하세요."),a.createElement("p",{className:"mt-1"},"에러 시간: ",new Date().toLocaleString("ko-KR")))))):this.props.children}}const Vl={taxTypes:{취득세:["취득세","부동산취득세","취득세\\(부동산\\)","취득세\\(.*?\\)"],재산세:["재산세","재산세\\(토지\\)","재산세\\(건물\\)"],기타세:["도시공원점용료","시군구세산대부료","공유재산사용료","도로점용료","지방교육세","농어촌특별세","등록면허세"]},amounts:[/과세표준액[:\s]*([0-9,]+)/gi,/취득세[\\(부동산\\)]*[:\s]*([0-9,]+)/gi,/재산세[:\s]*([0-9,]+)/gi,/지방교육세[:\s]*([0-9,]+)/gi,/농어촌특별세[:\s]*([0-9,]+)/gi,/등록면허세[:\s]*([0-9,]+)/gi,/세액합계[:\s]*([0-9,]+)/gi,/합계금액[:\s]*([0-9,]+)/gi,/납부금액[:\s]*([0-9,]+)/gi,/총[:\s]*([0-9,]+)/gi,/([0-9]{1,3}(?:,?[0-9]{3})*)[:\s]*원/gi,/([0-9,]{7,})/gi],dates:[/납부기한[:\s]*([0-9]{4})[.\-/년]([0-9]{1,2})[.\-/월]([0-9]{1,2})/gi,/납부기일[:\s]*([0-9]{4})[.\-/년]([0-9]{1,2})[.\-/월]([0-9]{1,2})/gi,/납기일[:\s]*([0-9]{4})[.\-/년]([0-9]{1,2})[.\-/월]([0-9]{1,2})/gi,/납기종료일[:\s]*([0-9]{4})[.\-/]([0-9]{1,2})[.\-/]([0-9]{1,2})/gi,/([0-9]{4})[.\-/]([0-9]{1,2})[.\-/]([0-9]{1,2})/gi],addresses:[/과세대상[^가-힣]*([가-힣0-9\s,.\-\/]+(?:특별시|광역시|시|도)[^가-힣]*[가-힣0-9\s,.\-\/]+(?:구|군)[^가-힣]*[가-힣0-9\s,.\-\/]+)/gi,/소재지[^가-힣]*([가-힣0-9\s,.\-\/]+(?:특별시|광역시|시|도)[^가-힣]*[가-힣0-9\s,.\-\/]+(?:구|군)[^가-힣]*[가-힣0-9\s,.\-\/]+)/gi,/부과대상[^가-힣]*([가-힣0-9\s,.\-\/]+(?:특별시|광역시|시|도)[^가-힣]*[가-힣0-9\s,.\-\/]+(?:구|군)[^가-힣]*[가-힣0-9\s,.\-\/]+)/gi,/([가-힣]+(?:특별시|광역시|시|도)\s+[가-힣]+(?:구|군|시)\s+[가-힣0-9]+(?:로|길)\s+[0-9]+)/gi,/([가-힣]+(?:특별시|광역시|시|도)\s+[가-힣]+(?:구|군|시)\s+[가-힣]+동\s+[0-9\-]+)/gi]},ao={withErrorHandling:async(t,e,r)=>{try{return await t()}catch(n){return console.warn(r,n),e?e():null}},createFallbackResult:t=>{G.getKoreaToday();const e=new Date;return e.setMonth(e.getMonth()+3),{fileName:t.name,category:"재산세",name:"세금 고지서",amount:"미정",dueDate:G.formatKoreaDate(e),confidence:.3,stationName:"",address:"서울특별시 강남구 테헤란로 123",method:"fallback_analysis",success:!0,isRecurring:!0}},analyzeText:(t,e)=>{console.log("텍스트 분석 시작...");let r={fileName:e,category:"재산세",name:"세금 고지서",amount:"미정",dueDate:"",confidence:.4,stationName:"",address:"",extractedText:t,isRecurring:!1};const n=t.replace(/\s+/g," ").trim();for(const[i,u]of Object.entries(Vl.taxTypes))if(u.some(d=>new RegExp(d,"gi").test(n))){r.category=i,r.name=`${i} 고지서`,r.confidence+=.2,(i==="재산세"||i==="기타세")&&(r.isRecurring=!0);break}const s=[];if(Vl.amounts.forEach(i=>{[...n.matchAll(i)].forEach(d=>{const m=d[1]?d[1].replace(/,/g,""):d[0].replace(/[^0-9]/g,""),h=parseInt(m);h&&h>=1e3&&s.push({amount:h,formatted:h.toLocaleString("ko-KR"),context:d[0]})})}),s.length>0){const i=s.sort((u,d)=>d.amount-u.amount)[0];r.amount=i.formatted,r.confidence+=.3}let l=!1;if(Vl.dates.forEach(i=>{if(l)return;[...n.matchAll(i)].forEach(d=>{try{let m,h,x;d[0].includes("년")?[,m,h,x]=d:[,m,h,x]=d,m&&h&&x&&new Date(parseInt(m),parseInt(h)-1,parseInt(x))>new Date&&(r.dueDate=`${m}-${h.padStart(2,"0")}-${x.padStart(2,"0")}`,r.confidence+=.2,l=!0)}catch(m){console.warn("날짜 파싱 오류:",m)}})}),!l){const i=new Date;i.setMonth(i.getMonth()+3),r.dueDate=i.toISOString().split("T")[0]}let o=!1;if(Vl.addresses.forEach(i=>{var d;if(o)return;const u=[...n.matchAll(i)];if(u.length>0){const m=(d=u[0][1])==null?void 0:d.trim();m&&m.length>5&&(r.address=m,r.confidence+=.15,o=!0)}}),!o){const i=["서울특별시 강남구 테헤란로 123","서울특별시 송파구 중대로 50","경기도 성남시 분당구 판교역로 345"];r.address=i[Math.floor(Math.random()*i.length)]}return r}},rc={analyze:async(t,e)=>{if(console.log("OCR 분석 시작:",t.name),!Ke.hasValidApiKey()){console.log("Google Vision API 키가 없음, 시뮬레이션 모드"),e&&e("시뮬레이션 분석",.5);const r=ao.createFallbackResult(t);return r.method="simulation_mode",e&&e("완료",1),r}try{console.log("Google Vision API 키 감지됨, 실제 분석 시작"),e&&e("구글 비전 API 분석",.2);const r=await Ke.analyze(t);return e&&e("완료",1),console.log("Google Vision API 분석 성공:",r),r}catch(r){console.error("Google Vision API 분석 실패:",r),e&&e("기본 분석 처리",.7);const n=ao.createFallbackResult(t);return n.method="fallback_after_api_error",n.error=`API 오류: ${r.message}`,e&&e("완료",1),n}},generateFallbackResult:ao.createFallbackResult},Ke={apiConfig:{get apiKey(){if(typeof window<"u"&&window.GOOGLE_VISION_API_KEY)return window.GOOGLE_VISION_API_KEY;if(typeof window<"u"&&window._GOOGLE_API_KEY_BACKUP)return window._GOOGLE_API_KEY_BACKUP;try{const t=localStorage.getItem("google_vision_api_key");if(t)return typeof window<"u"&&(window.GOOGLE_VISION_API_KEY=t),t}catch(t){console.warn("localStorage 접근 실패:",t)}try{const t=sessionStorage.getItem("google_vision_api_key");if(t)return typeof window<"u"&&(window.GOOGLE_VISION_API_KEY=t),t}catch(t){console.warn("sessionStorage 접근 실패:",t)}return"YOUR_API_KEY_HERE"},endpoint:"https://vision.googleapis.com/v1/images:annotate",features:[{type:"DOCUMENT_TEXT_DETECTION",maxResults:1},{type:"TEXT_DETECTION",maxResults:1}]},setApiKey:t=>{try{console.log("API 키 설정 시도:",t?`${t.substring(0,10)}...`:"없음"),typeof window<"u"&&(window.GOOGLE_VISION_API_KEY=t,console.log("window 객체에 저장 완료"));try{localStorage.setItem("google_vision_api_key",t),console.log("localStorage에 저장 완료")}catch(r){console.warn("localStorage 저장 실패:",r)}try{sessionStorage.setItem("google_vision_api_key",t),console.log("sessionStorage에 저장 완료")}catch(r){console.warn("sessionStorage 저장 실패:",r)}typeof window<"u"&&(window._GOOGLE_API_KEY_BACKUP=t);const e=localStorage.getItem("google_vision_api_key");console.log("저장 확인:",e?`${e.substring(0,10)}...`:"저장 실패"),console.log("구글 비전 API 키가 설정되었습니다.")}catch(e){console.error("API 키 설정 실패:",e)}},hasValidApiKey:()=>{const t=Ke.apiConfig.apiKey;console.log("현재 API 키 체크:",t?`${t.substring(0,10)}...`:"없음");const e=t&&t!=="YOUR_API_KEY_HERE"&&t.length>10;return console.log("API 키 유효성:",e),e},patterns:{taxTypes:{취득세:["취득세","부동산취득세","취득세\\(부동산\\)","취득세\\(.*?\\)"],재산세:["재산세","재산세\\(토지\\)","재산세\\(건물\\)"],기타세:["도시공원점용료","시군구세산대부료","공유재산사용료","도로점용료","지방교육세","농어촌특별세","등록면허세"]},amounts:[/과세표준액[:\s]*([0-9,]+)/gi,/취득세[\\(부동산\\)]*[:\s]*([0-9,]+)/gi,/재산세[:\s]*([0-9,]+)/gi,/지방교육세[:\s]*([0-9,]+)/gi,/농어촌특별세[:\s]*([0-9,]+)/gi,/등록면허세[:\s]*([0-9,]+)/gi,/세액합계[:\s]*([0-9,]+)/gi,/합계금액[:\s]*([0-9,]+)/gi,/납부금액[:\s]*([0-9,]+)/gi,/총[:\s]*([0-9,]+)/gi,/([0-9]{1,3}(?:,?[0-9]{3})*)[:\s]*원/gi,/([0-9,]{7,})/gi],dates:[/납부기한[:\s]*([0-9]{4})[.\-/년]([0-9]{1,2})[.\-/월]([0-9]{1,2})/gi,/납부기일[:\s]*([0-9]{4})[.\-/년]([0-9]{1,2})[.\-/월]([0-9]{1,2})/gi,/납기일[:\s]*([0-9]{4})[.\-/년]([0-9]{1,2})[.\-/월]([0-9]{1,2})/gi,/납기종료일[:\s]*([0-9]{4})[.\-/]([0-9]{1,2})[.\-/]([0-9]{1,2})/gi,/([0-9]{4})[.\-/]([0-9]{1,2})[.\-/]([0-9]{1,2})/gi],addresses:[/과세대상[^가-힣]*([가-힣0-9\s,.\-\/]+(?:특별시|광역시|시|도)[^가-힣]*[가-힣0-9\s,.\-\/]+(?:구|군)[^가-힣]*[가-힣0-9\s,.\-\/]+)/gi,/소재지[^가-힣]*([가-힣0-9\s,.\-\/]+(?:특별시|광역시|시|도)[^가-힣]*[가-힣0-9\s,.\-\/]+(?:구|군)[^가-힣]*[가-힣0-9\s,.\-\/]+)/gi,/부과대상[^가-힣]*([가-힣0-9\s,.\-\/]+(?:특별시|광역시|시|도)[^가-힣]*[가-힣0-9\s,.\-\/]+(?:구|군)[^가-힣]*[가-힣0-9\s,.\-\/]+)/gi,/([가-힣]+(?:특별시|광역시|시|도)\s+[가-힣]+(?:구|군|시)\s+[가-힣0-9]+(?:로|길)\s+[0-9]+)/gi,/([가-힣]+(?:특별시|광역시|시|도)\s+[가-힣]+(?:구|군|시)\s+[가-힣]+동\s+[0-9\-]+)/gi],taxpayers:[/납세자[:\s]*([가-힣\s()주식회사㈜㈝브라이트에너지파트너스]+)/gi,/성명[:\s]*([가-힣\s()주식회사㈜㈝브라이트에너지파트너스]+)/gi,/(브라이트에너지파트너스[^가-힣]*주식회사)/gi,/(.*?에너지.*?파트너스)/gi]},fileToBase64:t=>new Promise((e,r)=>{const n=new FileReader;n.onload=()=>{const s=n.result.split(",")[1];e(s)},n.onerror=r,n.readAsDataURL(t)}),callGoogleVisionAPI:async t=>{var r,n;if(!Ke.hasValidApiKey())throw new Error("구글 비전 API 키가 설정되지 않았습니다. GoogleVisionOCR.setApiKey() 함수를 사용하여 설정해주세요.");const e={requests:[{image:{content:t},features:Ke.apiConfig.features,imageContext:{languageHints:["ko","en"]}}]};try{const s=await fetch(`${Ke.apiConfig.endpoint}?key=${Ke.apiConfig.apiKey}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok){const o=await s.text();throw new Error(`구글 비전 API 오류: ${s.status} ${s.statusText} - ${o}`)}const l=await s.json();if((n=(r=l.responses)==null?void 0:r[0])!=null&&n.error)throw new Error(`API 응답 오류: ${l.responses[0].error.message}`);return l.responses[0]}catch(s){throw console.error("구글 비전 API 호출 실패:",s),s}},extractText:async t=>{var e,r;try{console.log("구글 비전 API OCR 시작...");const n=await Ke.fileToBase64(t),s=await Ke.callGoogleVisionAPI(n);let l="",o=0;if((e=s.fullTextAnnotation)!=null&&e.text){l=s.fullTextAnnotation.text;const i=s.fullTextAnnotation.pages||[];i.length>0&&(o=i[0].confidence||.8)}else((r=s.textAnnotations)==null?void 0:r.length)>0&&(l=s.textAnnotations[0].description||"",o=s.textAnnotations[0].confidence||.7);if(!l||l.trim().length<10)throw new Error("구글 비전 API에서 텍스트를 추출할 수 없습니다");return console.log("구글 비전 API OCR 완료"),console.log("추출된 텍스트 길이:",l.length),console.log("신뢰도:",o),{text:l,confidence:o*100,method:"google_vision_api",rawResponse:s}}catch(n){throw console.error("구글 비전 API 텍스트 추출 실패:",n),new Error(`구글 비전 API 오류: ${n.message}`)}},analyzeTaxDocument:(t,e)=>{console.log("구글 비전 API 기반 세금 고지서 분석 시작...");const r={fileName:e,category:"취득세",name:"세금 고지서",amount:"미정",dueDate:"",stationName:"",address:"",extractedText:t,confidence:.4,details:{},method:"google_vision_analysis",isRecurring:!1},n=t.replace(/\s+/g," ").trim();for(const[i,u]of Object.entries(Ke.patterns.taxTypes))if(u.some(d=>new RegExp(d,"gi").test(n))){r.category=i,r.name=`${i} 고지서`,r.confidence+=.2,(i==="재산세"||i==="기타세")&&(r.isRecurring=!0);break}const s=[];if(Ke.patterns.amounts.forEach(i=>{[...n.matchAll(i)].forEach(d=>{const m=d[1]?d[1].replace(/,/g,""):d[0].replace(/[^0-9]/g,""),h=parseInt(m);h&&h>=1e3&&s.push({amount:h,formatted:h.toLocaleString("ko-KR"),context:d[0]})})}),s.length>0){const i=s.sort((u,d)=>d.amount-u.amount)[0];r.amount=i.formatted,r.confidence+=.3,r.details.allAmounts=s}let l=!1;if(Ke.patterns.dates.forEach(i=>{if(l)return;[...n.matchAll(i)].forEach(d=>{try{let m,h,x;d[0].includes("년")?[,m,h,x]=d:[,m,h,x]=d,m&&h&&x&&new Date(parseInt(m),parseInt(h)-1,parseInt(x))>new Date&&(r.dueDate=`${m}-${h.padStart(2,"0")}-${x.padStart(2,"0")}`,r.confidence+=.2,l=!0)}catch(m){console.warn("날짜 파싱 오류:",m)}})}),!l){const i=new Date;i.setMonth(i.getMonth()+3),r.dueDate=i.toISOString().split("T")[0]}let o=!1;if(Ke.patterns.addresses.forEach(i=>{var d;if(o)return;const u=[...n.matchAll(i)];if(u.length>0){const m=(d=u[0][1])==null?void 0:d.trim();m&&m.length>5&&(r.address=m,r.confidence+=.15,o=!0)}}),Ke.patterns.taxpayers.forEach(i=>{var d;const u=[...n.matchAll(i)];if(u.length>0){const m=(d=u[0][1])==null?void 0:d.trim();if(m&&(r.details.taxpayer=m,m.includes("에너지")||m.includes("충전")||m.includes("전기"))){const h=m.replace(/(주식회사|㈜|㈝)/g,"").trim()+" 충전소";r.stationName=h,r.confidence+=.1}}}),!o){const i=["서울특별시 강남구 테헤란로 123","서울특별시 송파구 중대로 50","경기도 성남시 분당구 판교역로 345"];r.address=i[Math.floor(Math.random()*i.length)]}return console.log("구글 비전 API 분석 결과:",r),r},analyze:async t=>{try{console.log("구글 비전 API 기반 분석 시작");const{text:e,confidence:r,rawResponse:n}=await Ke.extractText(t);if(!e||e.trim().length<20)throw new Error("추출된 텍스트가 너무 짧습니다");const s=Ke.analyzeTaxDocument(e,t.name);return s.confidence=Math.min(r/100*.4+s.confidence*.6,.98),s.method="google_vision_api",s.success=!0,s.apiResponse=n,s}catch(e){throw console.error("구글 비전 API 분석 실패:",e),e}}},xE=({className:t})=>a.createElement("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-3a1 1 0 011-1h2.586l6.414-6.586a2 2 0 012.828 0z"})),$f=`
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;600;700&display=swap&subset=korean');
  
  /* 폰트 로딩 최적화 */
  @font-face {
    font-family: 'System Fallback';
    src: local('Apple SD Gothic Neo'), local('Noto Sans KR'), local('Malgun Gothic'), local('sans-serif');
    font-display: swap;
  }
  
  /* 더 강력한 폰트 적용 - 모든 요소에 !important 사용 */
  *, *::before, *::after {
    font-family: 'Poppins', 'Noto Sans KR', 'System Fallback', -apple-system, BlinkMacSystemFont, system-ui, sans-serif !important;
    font-display: swap !important;
  }
  
  /* 특정 요소들에 대한 강제 폰트 적용 */
  html, body, div, span, p, h1, h2, h3, h4, h5, h6, a, em, strong, small, sub, sup, mark, del, ins, strike, s, u, cite, q, dfn, abbr, time, code, var, samp, kbd, b, i, small, sub, sup, input, textarea, select, option, button, label, fieldset, legend, table, thead, tbody, tfoot, tr, td, th, caption, article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary {
    font-family: 'Poppins', 'Noto Sans KR', 'System Fallback', -apple-system, BlinkMacSystemFont, system-ui, sans-serif !important;
  }
  
  /* 폰트 속성 정규화 */
  * {
    font-variant-numeric: tabular-nums;
    font-feature-settings: "tnum";
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
  }
  .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(51, 65, 85, 0.3);
    border-radius: 3px;
  }
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(71, 85, 105, 0.6);
    border-radius: 3px;
    transition: background 0.2s ease;
  }
  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(71, 85, 105, 0.8);
  }
  .custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: rgba(71, 85, 105, 0.6) rgba(51, 65, 85, 0.3);
  }
  
  /* 커스텀 select 박스 스타일 */
  select {
    appearance: none;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.75rem center;
    background-repeat: no-repeat;
    background-size: 1.5em 1.5em;
    padding-right: 2.5rem;
  }
  
  /* 다크 테마에 맞는 select 옵션 스타일 - 강제 폰트 적용 */
  select option {
    background-color: rgb(30, 41, 59) !important;
    color: rgb(226, 232, 240) !important;
    padding: 0.5rem !important;
    font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, 'Helvetica Neue', 'Segoe UI', 'Apple SD Gothic Neo', 'Noto Sans KR', 'Malgun Gothic', sans-serif !important;
  }
  
  /* 날짜 입력 필드 커스텀 스타일 */
  input[type="date"] {
    position: relative;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236b7280'%3e%3cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z'/%3e%3c/svg%3e");
    background-position: right 0.75rem center;
    background-repeat: no-repeat;
    background-size: 1.25em 1.25em;
    padding-right: 2.5rem;
  }
  
  /* 웹킷 브라우저의 날짜 선택기 버튼 숨기기 */
  input[type="date"]::-webkit-calendar-picker-indicator {
    opacity: 0;
    position: absolute;
    right: 0;
    width: 2.5rem;
    height: 100%;
    cursor: pointer;
  }
  
  /* 파이어폭스의 날짜 입력 필드 스타일 */
  input[type="date"]::-moz-focus-inner {
    border: 0;
  }
  
  /* 파일 업로드 input 커스터마이징 */
  input[type="file"] {
    display: none;
  }
  
  /* 플레이스홀더 텍스트 폰트 적용 */
  ::placeholder {
    font-family: 'Poppins', 'Noto Sans KR', 'System Fallback', -apple-system, BlinkMacSystemFont, system-ui, sans-serif !important;
  }
  
  /* 드롭다운 애니메이션 */
  .dropdown-enter {
    opacity: 0;
    transform: translateY(-10px) scale(0.95);
  }
  
  .dropdown-enter-active {
    opacity: 1;
    transform: translateY(0) scale(1);
    transition: all 200ms ease-out;
  }
  
  .dropdown-exit {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  
  .dropdown-exit-active {
    opacity: 0;
    transform: translateY(-10px) scale(0.95);
    transition: all 150ms ease-in;
  }
  
  @keyframes slide-in-left {
    from {
      transform: translateX(-100%);
    }
    to {
      transform: translateX(0);
    }
  }
  
  @keyframes slide-in-right {
    from {
      transform: translateX(100%);
    }
    to {
      transform: translateX(0);
    }
  }
  
  .animate-slide-in-left {
    animation: slide-in-left 0.3s ease-out;
  }
  
  .animate-slide-in-right {
    animation: slide-in-right 0.3s ease-out;
  }
  
  /* 포커스 상태 개선 */
  input:focus,
  select:focus,
  textarea:focus,
  button:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
  }
  
  /* 버튼 호버 효과 개선 */
  button {
    transition: all 0.2s ease-in-out;
  }
  
  button:hover {
    transform: translateY(-1px);
  }
  
  button:active {
    transform: translateY(0);
  }
  
  /* 카드 호버 효과 */
  .card-hover {
    transition: all 0.3s ease-in-out;
  }
  
  .card-hover:hover {
    transform: translateY(-2px);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.1);
  }
`,wE=async t=>{console.log("PDF 변환 시작:",t.name,"Size:",t.size);try{console.log("PDF.js 라이브러리 로드 중...");const e=await bE();if(!e)throw new Error("PDF.js 라이브러리를 로드할 수 없습니다");console.log("PDF.js 라이브러리 로드 완료"),console.log("PDF 파일 읽기 중...");const r=await t.arrayBuffer();console.log("PDF ArrayBuffer 크기:",r.byteLength),console.log("PDF 문서 로드 중...");const s=await e.getDocument({data:r,cMapUrl:"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/cmaps/",cMapPacked:!0,verbosity:0}).promise;console.log("PDF 로드 완료. 페이지 수:",s.numPages),console.log("첫 번째 페이지 렌더링 시작...");const l=await s.getPage(1),i=l.getViewport({scale:2});console.log("뷰포트 크기:",i.width,"x",i.height);const u=document.createElement("canvas"),d=u.getContext("2d");u.height=i.height,u.width=i.width,d.fillStyle="white",d.fillRect(0,0,u.width,u.height);const m={canvasContext:d,viewport:i,intent:"print"};await l.render(m).promise,console.log("PDF 렌더링 완료");const h=await new Promise(_=>{u.toBlob(S=>{_(S)},"image/png",.95)});if(!h)throw new Error("Canvas를 이미지로 변환하는데 실패했습니다");const x=new File([h],`${t.name.replace(".pdf","")}_page1.png`,{type:"image/png"});return console.log("PDF → 이미지 변환 완료:",x.name,"Size:",x.size),x}catch(e){throw console.error("PDF 변환 실패:",e),e.message.includes("Invalid PDF")?new Error("유효하지 않은 PDF 파일입니다"):e.message.includes("Password")?new Error("패스워드로 보호된 PDF는 지원되지 않습니다"):e.message.includes("network")?new Error("네트워크 오류: PDF.js 라이브러리를 로드할 수 없습니다"):new Error(`PDF 변환 오류: ${e.message}`)}},bE=async()=>{try{return window.pdfjsLib?(console.log("PDF.js 이미 로드됨"),window.pdfjsLib):(console.log("PDF.js 라이브러리 로드 시작..."),new Promise((t,e)=>{const r=setTimeout(()=>{e(new Error("PDF.js 로드 시간 초과 (10초)"))},1e4),n=document.createElement("script");if(n.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js",n.async=!0,n.onload=()=>{clearTimeout(r),window.pdfjsLib?(window.pdfjsLib.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js",console.log("PDF.js 라이브러리 로드 성공"),t(window.pdfjsLib)):e(new Error("PDF.js 객체를 찾을 수 없습니다"))},n.onerror=()=>{clearTimeout(r),e(new Error("PDF.js 스크립트 로드 실패 - 네트워크를 확인해주세요"))},document.querySelector('script[src*="pdf.min.js"]')){setTimeout(()=>{window.pdfjsLib?(clearTimeout(r),t(window.pdfjsLib)):e(new Error("기존 PDF.js 로드가 완료되지 않았습니다"))},2e3);return}document.head.appendChild(n)}))}catch(t){throw console.error("PDF.js 로드 오류:",t),new Error(`PDF.js 라이브러리 로드 실패: ${t.message}`)}},G={getKoreaTime:()=>{const t=new Date;return new Date(t.getTime()+9*60*60*1e3)},parseKoreaDate:t=>{if(!t)return null;try{const[e,r,n]=t.split("-").map(Number);return e&&r&&n?new Date(e,r-1,n,0,0,0,0):null}catch(e){return console.warn("parseKoreaDate error:",e,"input:",t),null}},formatKoreaDate:t=>{try{if(!t)return"";const e=new Date(t.getTime()+9*60*60*1e3),r=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${r}-${n}-${s}`}catch(e){return console.warn("formatKoreaDate error:",e,"input:",t),""}},getKoreaToday:()=>{const t=G.getKoreaTime();return G.formatKoreaDate(t)},getDaysDifference:(t,e)=>{try{const r=G.parseKoreaDate(t)||new Date(t),n=G.parseKoreaDate(e)||new Date(e);if(isNaN(r.getTime())||isNaN(n.getTime()))return 0;const s=r.getTime()-n.getTime();return Math.ceil(s/(1e3*60*60*24))}catch(r){return console.warn("getDaysDifference error:",r),0}}},le={config:{get apiKey(){if(typeof window<"u"&&window.SENDGRID_API_KEY)return window.SENDGRID_API_KEY;try{const t=localStorage.getItem("sendgrid_api_key");if(t)return typeof window<"u"&&(window.SENDGRID_API_KEY=t),t}catch(t){console.warn("localStorage 접근 실패:",t)}return"YOUR_SENDGRID_API_KEY"},get fromEmail(){try{return localStorage.getItem("sendgrid_from_email")||"noreply@watercharging.com"}catch{return"noreply@watercharging.com"}},get fromName(){try{return localStorage.getItem("sendgrid_from_name")||"Water TT 관리시스템"}catch{return"Water TT 관리시스템"}},endpoint:"https://api.sendgrid.com/v3/mail/send"},setConfig:(t,e,r)=>{try{return console.log("SendGrid 설정 저장 시도"),typeof window<"u"&&(window.SENDGRID_API_KEY=t),localStorage.setItem("sendgrid_api_key",t),localStorage.setItem("sendgrid_from_email",e),localStorage.setItem("sendgrid_from_name",r),console.log("SendGrid 설정이 저장되었습니다."),!0}catch(n){return console.error("SendGrid 설정 저장 실패:",n),!1}},hasValidApiKey:()=>{const t=le.config.apiKey;return t&&t!=="YOUR_SENDGRID_API_KEY"&&t.startsWith("SG.")},templates:{taxReminder:t=>{const{stationName:e,taxType:r,amount:n,dueDate:s,daysLeft:l,priority:o}=t;let i,u;return o==="high"?(i=`🚨 [긴급] ${e} ${r} 납부 기한 임박 (${l}일 남음)`,u=`
안녕하세요.

${e}의 ${r} 납부 기한이 ${l}일 남았습니다.

⚠️ 긴급 알림 ⚠️
• 충전소: ${e}
• 세금 종류: ${r}
• 납부 금액: ${n}
• 납부 기한: ${s}

즉시 납부 처리를 진행해주세요.

Water TT 관리시스템
        `.trim()):o==="medium"?(i=`⏰ ${e} ${r} 납부 준비 알림 (${l}일 남음)`,u=`
안녕하세요.

${e}의 ${r} 납부 기한이 다가오고 있습니다.

📋 납부 정보
• 충전소: ${e}
• 세금 종류: ${r}
• 납부 금액: ${n}
• 납부 기한: ${s}

미리 준비해주세요.

Water TT 관리시스템
        `.trim()):(i=`📅 ${e} ${r} 사전 알림 (${l}일 남음)`,u=`
안녕하세요.

${e}의 ${r} 납부 예정일을 안내드립니다.

📌 예정 정보
• 충전소: ${e}
• 세금 종류: ${r}
• 납부 금액: ${n}
• 납부 기한: ${s}

참고해주세요.

Water TT 관리시스템
        `.trim()),{subject:i,content:u}},stationInfoMissing:t=>{const{stationName:e,missingType:r,daysSinceRegistered:n}=t,s=r==="approval"?"사용 승인일":"전기 안전 점검일",l=`📝 ${e} ${s} 정보 입력 요청`,o=`
안녕하세요.

${e}의 ${s} 정보가 입력되지 않았습니다.

🔍 확인 정보
• 충전소: ${e}
• 미입력 항목: ${s}
• 등록 경과일: ${n}일

충전소 관리 화면에서 정보를 입력해주세요.

Water TT 관리시스템
      `.trim();return{subject:l,content:o}},stationInfoAdded:t=>{const{stationName:e,infoType:r,date:n,hasAutoTax:s}=t,l=r==="approval"?"사용 승인일":"전기 안전 점검일",o=r==="approval"?"캐노피 취득세":"충전기 취득세",i=`✅ ${e} ${l} 정보 입력 완료`,u=`
안녕하세요.

${e}의 ${l}이 입력되었습니다.

✅ 입력 완료 정보
• 충전소: ${e}
• 항목: ${l}
• 날짜: ${n}
${s?`📋 자동 처리 안내
• ${o}이 자동으로 등록되었습니다
• 납부 기한: ${n}로부터 60일 후
• 세금 현황에서 확인 가능합니다`:""}
Water TT 관리시스템
      `.trim();return{subject:i,content:u}}},sendEmail:async(t,e,r)=>{if(!le.hasValidApiKey())throw new Error("SendGrid API 키가 설정되지 않았습니다.");const s={personalizations:[{to:(Array.isArray(t)?t:[t]).map(l=>({email:l})),subject:e}],from:{email:le.config.fromEmail,name:le.config.fromName},content:[{type:"text/plain",value:r}]};try{const l=await fetch(le.config.endpoint,{method:"POST",headers:{Authorization:`Bearer ${le.config.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify(s)});if(!l.ok){const o=await l.text();return{success:!1,error:`HTTP ${l.status}: ${o}`,statusCode:l.status,isNetworkError:!1}}return{success:!0,message:"이메일이 성공적으로 전송되었습니다."}}catch(l){return console.error("SendGrid API 호출 실패:",l),{success:!1,error:l.message,isNetworkError:!0}}},sendTemplateEmail:async(t,e,r)=>{try{let n;if(e==="taxReminder")n=le.templates.taxReminder(r);else if(e==="stationInfoMissing")n=le.templates.stationInfoMissing(r);else if(e==="stationInfoAdded")n=le.templates.stationInfoAdded(r);else throw new Error(`알 수 없는 템플릿 타입: ${e}`);return await le.sendEmail(t,n.subject,n.content)}catch(n){return console.error("템플릿 이메일 발송 실패:",n),{success:!1,error:n.message}}},sendTestEmail:async t=>{if(!le.hasValidApiKey())throw new Error("SendGrid API 키가 설정되지 않았습니다.");const e={personalizations:[{to:[{email:t}],subject:"Water TT 관리시스템 테스트 이메일"}],from:{email:le.config.fromEmail,name:le.config.fromName},content:[{type:"text/html",value:`
          <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
            <h2 style="color: #2563eb;">Water TT 관리시스템</h2>
            <p>안녕하세요!</p>
            <p>SendGrid 이메일 설정이 성공적으로 완료되었습니다.</p>
            <p>이 테스트 이메일은 ${new Date().toLocaleString("ko-KR")}에 전송되었습니다.</p>
            <hr style="border: 1px solid #e5e7eb; margin: 20px 0;">
            <p style="color: #6b7280; font-size: 14px;">
              이 이메일은 시스템 테스트용으로 발송되었습니다.
            </p>
          </div>
        `}]};try{const r=await fetch(le.config.endpoint,{method:"POST",headers:{Authorization:`Bearer ${le.config.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){const n=await r.text();return{success:!1,error:`HTTP ${r.status}: ${n}`,statusCode:r.status,isNetworkError:!1}}return{success:!0,message:"테스트 이메일이 성공적으로 전송되었습니다."}}catch(r){return console.error("SendGrid API 호출 실패:",r),{success:!1,error:r.message,isNetworkError:!0}}}},V={getAmount:t=>{try{if(!t||t===""||t==="미정")return 0;const e=t.toString().replace(/,/g,""),r=parseInt(e);return isNaN(r)?0:Math.max(0,r)}catch(e){return console.error("getAmount error:",e,"input:",t),0}},formatAmount:t=>{try{if(!t||t===""||t==="미정")return"미정";const e=t.toString().replace(/,/g,""),r=parseInt(e);return isNaN(r)?"미정":new Intl.NumberFormat("ko-KR").format(r)}catch(e){return console.warn("formatAmount error:",e,"input:",t),"미정"}},normalizeAmount:t=>{try{return!t||t===""||t.toString().trim()===""?"미정":t}catch(e){return console.warn("normalizeAmount error:",e,"input:",t),"미정"}},getDaysUntilDue:t=>{try{if(!t)return 999;const e=G.getKoreaToday();return G.getDaysDifference(t,e)}catch(e){return console.warn("getDaysUntilDue error:",e,"input:",t),999}},formatKoreanCurrency:t=>{try{if(!t&&t!==0)return"0";const e=typeof t=="string"?parseInt(t.replace(/,/g,"")):t;return isNaN(e)?"0":new Intl.NumberFormat("ko-KR").format(e)}catch(e){return console.warn("formatKoreanCurrency error:",e,"input:",t),"0"}},safeDate:t=>{try{return t&&G.parseKoreaDate(t)||G.getKoreaTime()}catch(e){return console.warn("safeDate error:",e,"input:",t),G.getKoreaTime()}}},hs={save:(t,e)=>(console.log(`[Vercel Mode] Would save data for key: ${t}`),!0),load:(t,e=null)=>(console.log(`[Vercel Mode] Would load data for key: ${t}, returning default`),e),remove:t=>(console.log(`[Vercel Mode] Would remove data for key: ${t}`),!0),backup:(t=["tax_bills","charging_stations","user_accounts"])=>(console.log("[Vercel Mode] Would create backup for keys:",t),null)},Gr={getDueDateRange:()=>{const t=new Date,e=new Date;e.setFullYear(t.getFullYear()-1);const r=new Date;return r.setFullYear(t.getFullYear()+5),{min:e.toISOString().split("T")[0],max:r.toISOString().split("T")[0]}},getGeneralDateRange:()=>({min:"1950-01-01",max:"2050-12-31"})},Ve={extractNumbers:t=>t?t.toString().replace(/[^0-9]/g,""):"",formatWithCommas:t=>{if(!t||t==="")return"";const e=Ve.extractNumbers(t);if(!e)return"";try{const r=parseInt(e);return isNaN(r)?"":new Intl.NumberFormat("ko-KR").format(r)}catch(r){return console.warn("Format error:",r),t}},isValidAmount:t=>{if(!t||t===""||t==="미정")return!0;try{const e=Ve.extractNumbers(t);if(!e)return!1;const r=parseInt(e);return!(isNaN(r)||r<0||r>1e11)}catch(e){return console.warn("Amount validation error:",e),!1}},getAmountErrorMessage:t=>{if(!t||t===""||t==="미정")return"";try{const e=Ve.extractNumbers(t);if(!e)return"올바른 숫자를 입력해주세요.";const r=parseInt(e);return isNaN(r)?"유효하지 않은 숫자입니다.":r<0?"금액은 0원 이상이어야 합니다.":r>1e11?"금액은 1000억원 이하여야 합니다.":""}catch(e){return console.warn("Amount error message generation failed:",e),"금액 형식을 확인해주세요."}},sanitizeInput:t=>{if(!t||t==="미정")return t;try{const e=Ve.extractNumbers(t);return e?Ve.formatWithCommas(e):""}catch(e){return console.warn("Sanitize input error:",e),t}}},be={primary:{bg:"bg-slate-700",text:"text-slate-200"},secondary:{bg:"bg-slate-600",bgHover:"hover:bg-slate-500",text:"text-slate-300",border:"border-slate-500"},accent:{bg:"bg-slate-500"},categories:{취득세:{bg:"bg-slate-600/40",text:"text-slate-200",border:"border-slate-500/40"},재산세:{bg:"bg-slate-700/40",text:"text-slate-200",border:"border-slate-600/40"},기타세:{bg:"bg-slate-500/40",text:"text-slate-200",border:"border-slate-400/40"}},cards:{primary:"bg-gradient-to-br from-slate-800/50 to-slate-700/30 border-slate-600/30"}},nc=({title:t,value:e,subtitle:r,icon:n,progressWidth:s=100,progressColor:l="bg-slate-500"})=>a.createElement("div",{className:`${be.cards.primary} backdrop-blur-md rounded-2xl p-6 border hover:shadow-lg transition-all duration-300 card-hover`},a.createElement("div",{className:"flex items-center justify-between mb-4"},a.createElement("div",{className:"p-3 bg-slate-600/30 rounded-xl"},a.createElement(n,{className:"w-8 h-8 text-slate-400"})),a.createElement("div",{className:"text-right"},a.createElement("div",{className:"text-xs text-slate-400 font-medium"},"TOTAL"),a.createElement("div",{className:"text-slate-300 text-sm"},r))),a.createElement("div",{className:"text-3xl font-bold text-gray-100 mb-1 font-mono"},e),a.createElement("div",{className:"text-xs text-gray-400"},t),a.createElement("div",{className:"mt-4 w-full bg-slate-700/50 rounded-full h-2"},a.createElement("div",{className:`${l} h-2 rounded-full transition-all duration-1000`,style:{width:`${s}%`}}))),EE=({monthlyStats:t,formatKoreanCurrency:e})=>a.createElement("div",{className:`${be.cards.primary} backdrop-blur-md rounded-2xl p-8 mb-12 border`},a.createElement("div",{className:"flex items-center justify-between mb-8"},a.createElement("div",null,a.createElement("h3",{className:"text-xl font-bold text-gray-100 mb-2"},"월별 세금 현황"),a.createElement("p",{className:"text-xs text-gray-400"},"최근 12개월 납부 현황")),a.createElement("div",{className:"p-3 bg-slate-600/30 rounded-xl"},a.createElement(Jx,{className:"w-6 h-6 text-slate-400"}))),a.createElement("div",{className:"space-y-6"},t.map((r,n)=>{const s=Math.max(...t.map(o=>o.total)),l=r.total>0?r.completed/r.total*100:0;return a.createElement("div",{key:n,className:"relative"},a.createElement("div",{className:"flex justify-between items-center mb-3"},a.createElement("span",{className:"text-lg font-semibold text-gray-200"},r.month),a.createElement("div",{className:"text-right"},a.createElement("div",{className:`text-lg font-bold ${be.primary.text} font-mono`},"₩",e(r.total)),a.createElement("div",{className:"text-xs text-gray-400"},r.count,"건 • ",Math.round(l),"% 완료"))),a.createElement("div",{className:"relative bg-slate-800/50 rounded-xl h-4 overflow-hidden"},a.createElement("div",{className:`absolute left-0 top-0 h-full ${be.primary.bg} rounded-xl transition-all duration-1000`,style:{width:`${s>0?r.total/s*100:0}%`}}),a.createElement("div",{className:`absolute left-0 top-0 h-full ${be.accent.bg} rounded-xl transition-all duration-1000 delay-300`,style:{width:`${s>0?r.completed/s*100:0}%`}})))})),a.createElement("div",{className:"mt-6 flex items-center space-x-6 pt-6 border-t border-slate-600/30"},a.createElement("div",{className:"flex items-center space-x-2"},a.createElement("div",{className:"w-3 h-3 bg-slate-600 rounded-full"}),a.createElement("span",{className:"text-xs text-gray-400"},"총 금액")),a.createElement("div",{className:"flex items-center space-x-2"},a.createElement("div",{className:"w-3 h-3 bg-slate-500 rounded-full"}),a.createElement("span",{className:"text-xs text-gray-400"},"완료 금액")))),Pf={취득세:`${be.categories.취득세.bg} ${be.categories.취득세.text} ${be.categories.취득세.border}`,재산세:`${be.categories.재산세.bg} ${be.categories.재산세.text} ${be.categories.재산세.border}`,기타세:`${be.categories.기타세.bg} ${be.categories.기타세.text} ${be.categories.기타세.border}`},NE="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",Be="bg-gradient-to-br from-slate-800/50 to-slate-700/30 backdrop-blur-md rounded-2xl border border-slate-600/30",ps={statusOptions:[{value:"all",label:"전체 상태"},{value:"operating",label:"운영 중"},{value:"preparing",label:"오픈 예정"},{value:"closed",label:"운영 종료"}],dateFilterOptions:[{value:"all",label:"전체"},{value:"approval",label:"승인일"},{value:"safety",label:"점검일"},{value:"missing",label:"미입력"}],applyFilters:(t,e)=>{var o;let r=[...t];if((o=e.search)!=null&&o.trim()){const i=e.search.toLowerCase();r=r.filter(u=>u.name.toLowerCase().includes(i)||u.address.toLowerCase().includes(i))}e.status!=="all"&&(r=r.filter(i=>i.status===e.status));const{dateFilter:n,startDate:s,endDate:l}=e;return n==="approval"?r=r.filter(i=>i.approvalDate&&i.approvalDate.trim()!==""):n==="safety"?r=r.filter(i=>i.safetyCheckDate&&i.safetyCheckDate.trim()!==""):n==="missing"&&(r=r.filter(i=>!i.approvalDate||i.approvalDate.trim()===""||!i.safetyCheckDate||i.safetyCheckDate.trim()==="")),(s||l)&&n!=="missing"&&(r=r.filter(i=>{var x,_;const u=s?new Date(s):null,d=l?new Date(l):null;let m=!1,h=!1;if((x=i.approvalDate)!=null&&x.trim()){const S=new Date(i.approvalDate);(n==="all"||n==="approval")&&(m=(!u||S>=u)&&(!d||S<=d))}if((_=i.safetyCheckDate)!=null&&_.trim()){const S=new Date(i.safetyCheckDate);(n==="all"||n==="safety")&&(h=(!u||S>=u)&&(!d||S<=d))}return n==="all"?m||h:n==="approval"?m:h})),r}},Ds=({type:t,label:e,value:r,onChange:n,placeholder:s,disabled:l=!1,options:o=[],className:i="",inputClassName:u="",showLabel:d=!0,...m})=>{const h=`h-9 px-3 border rounded-lg text-sm transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-transparent ${l?"bg-slate-600/30 border-slate-600/30 text-gray-500 cursor-not-allowed":"bg-slate-700/50 border-slate-600/50 text-gray-200"}`;return a.createElement("div",{className:i},d&&e&&a.createElement("label",{className:"block text-xs font-medium text-gray-300 mb-1"},e),t==="select"?a.createElement("select",{value:r,onChange:n,disabled:l,className:`w-full ${h} ${u}`,...m},o.map(x=>a.createElement("option",{key:x.value,value:x.value},x.label))):a.createElement("input",{type:t,value:r,onChange:n,placeholder:s,disabled:l,className:`w-full ${h} ${t==="text"?"placeholder-gray-400":""} ${u}`,...m}))},pp=({startDate:t,endDate:e,onStartDateChange:r,onEndDateChange:n,disabled:s=!1,className:l="",showQuickButtons:o=!1})=>a.createElement("div",{className:l},a.createElement("div",{className:"grid grid-cols-2 gap-2"},a.createElement("div",null,a.createElement("input",{type:"date",value:t,onChange:r,disabled:s,className:"w-full h-9 px-3 border rounded-lg text-xs transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-transparent bg-slate-700/50 border-slate-600/50 text-gray-200 disabled:opacity-50",placeholder:"시작일"})),a.createElement("div",null,a.createElement("input",{type:"date",value:e,onChange:n,disabled:s,className:"w-full h-9 px-3 border rounded-lg text-xs transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-transparent bg-slate-700/50 border-slate-600/50 text-gray-200 disabled:opacity-50",placeholder:"종료일"}))),o&&a.createElement("div",{className:"flex space-x-1 mt-2"},a.createElement("button",{type:"button",onClick:()=>{const i=new Date,u=new Date(i.getFullYear(),i.getMonth(),1),d=new Date(i.getFullYear(),i.getMonth()+1,0);r({target:{value:u.toISOString().split("T")[0]}}),n({target:{value:d.toISOString().split("T")[0]}})},className:"px-2 py-1 text-xs bg-emerald-600/20 text-emerald-300 rounded hover:bg-emerald-600/30 transition-colors border border-emerald-500/30"},"이번달"),a.createElement("button",{type:"button",onClick:()=>{const i=new Date,u=new Date(i.getFullYear(),0,1),d=new Date(i.getFullYear(),11,31);r({target:{value:u.toISOString().split("T")[0]}}),n({target:{value:d.toISOString().split("T")[0]}})},className:"px-2 py-1 text-xs bg-purple-600/20 text-purple-300 rounded hover:bg-purple-600/30 transition-colors border border-purple-500/30"},"올해"))),kE=({globalFilters:t,setGlobalFilters:e,resetFilters:r,setVisibleCounts:n,isMobile:s,showMobileFilters:l,setShowMobileFilters:o})=>{const i=(d,m)=>{e(h=>({...h,[d]:m}))},u=[{value:"all",label:"전체 분류"},{value:"취득세",label:"취득세"},{value:"재산세",label:"재산세"},{value:"기타세",label:"기타세"}];return s?a.createElement("div",{className:`${Be} overflow-hidden mb-6`},a.createElement("div",{className:"p-4"},a.createElement("div",{className:"flex items-center justify-between mb-3"},a.createElement("h3",{className:"text-sm font-medium text-gray-300"},"필터 설정"),a.createElement(pe,{onClick:()=>o(!l),variant:"primary",size:"sm",icon:l?td:rd,iconPosition:"left"},l?"접기":"펼치기")),l&&a.createElement("div",{className:"border-t border-slate-600/30 pt-4 space-y-3"},a.createElement(pp,{startDate:t.startDate,endDate:t.endDate,onStartDateChange:d=>i("startDate",d.target.value),onEndDateChange:d=>i("endDate",d.target.value),showQuickButtons:!1}),a.createElement(Ds,{type:"select",label:"세금 분류",value:t.category,onChange:d=>i("category",d.target.value),options:u}),a.createElement(Ds,{type:"text",label:"충전소 검색",value:t.stationSearch,onChange:d=>i("stationSearch",d.target.value),placeholder:"충전소명이나 주소로 검색..."}),a.createElement(pe,{onClick:()=>o(!1),variant:"primary",size:"sm",className:"w-full"},"적용")))):a.createElement("div",{className:`${Be} overflow-hidden mb-6`},a.createElement("div",{className:"p-6"},a.createElement("div",{className:"grid grid-cols-12 gap-4 items-end"},a.createElement("div",{className:"col-span-4"},a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"조회 기간"),a.createElement("div",{className:"grid grid-cols-2 gap-2"},a.createElement("input",{type:"date",value:t.startDate,onChange:d=>i("startDate",d.target.value),className:"w-full h-10 px-3 border rounded-lg text-sm bg-slate-700/50 border-slate-600/50 text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-transparent"}),a.createElement("input",{type:"date",value:t.endDate,onChange:d=>i("endDate",d.target.value),className:"w-full h-10 px-3 border rounded-lg text-sm bg-slate-700/50 border-slate-600/50 text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-transparent"}))),a.createElement("div",{className:"col-span-3"},a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"세금 분류"),a.createElement("select",{value:t.category,onChange:d=>i("category",d.target.value),className:"w-full h-10 px-3 border rounded-lg text-sm bg-slate-700/50 border-slate-600/50 text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-transparent"},u.map(d=>a.createElement("option",{key:d.value,value:d.value},d.label)))),a.createElement("div",{className:"col-span-5"},a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"충전소 검색"),a.createElement("input",{type:"text",value:t.stationSearch,onChange:d=>i("stationSearch",d.target.value),placeholder:"충전소명이나 주소로 검색...",className:"w-full h-10 px-3 border rounded-lg text-sm bg-slate-700/50 border-slate-600/50 text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-transparent"})))))},_E=({filters:t,onFiltersChange:e,onReset:r,isMobile:n,showMobileFilters:s,setShowMobileFilters:l})=>{const o=(i,u)=>{e(d=>({...d,[i]:u,...i==="dateFilter"&&u==="missing"&&{startDate:"",endDate:""}}))};return n?a.createElement("div",{className:`${Be} overflow-hidden mb-6`},a.createElement("div",{className:"p-4"},a.createElement("div",{className:"flex items-center justify-between mb-3"},a.createElement("h3",{className:"text-sm font-medium text-gray-300"},"필터 설정"),a.createElement(pe,{onClick:()=>l(!s),variant:"primary",size:"sm",icon:s?td:rd,iconPosition:"left"},s?"접기":"펼치기")),s&&a.createElement("div",{className:"border-t border-slate-600/30 pt-4 space-y-3"},a.createElement(Ds,{type:"select",label:"날짜 필터",value:t.dateFilter,onChange:i=>o("dateFilter",i.target.value),options:ps.dateFilterOptions}),a.createElement(pp,{startDate:t.startDate,endDate:t.endDate,onStartDateChange:i=>o("startDate",i.target.value),onEndDateChange:i=>o("endDate",i.target.value),disabled:t.dateFilter==="missing"}),a.createElement(Ds,{type:"select",label:"운영 상태",value:t.status,onChange:i=>o("status",i.target.value),options:ps.statusOptions}),a.createElement(Ds,{type:"text",label:"충전소 검색",value:t.search,onChange:i=>o("search",i.target.value),placeholder:"충전소명이나 주소로 검색..."}),a.createElement(pe,{onClick:()=>l(!1),variant:"primary",size:"sm",className:"w-full"},"적용")))):a.createElement("div",{className:`${Be} overflow-hidden mb-6`},a.createElement("div",{className:"p-6"},a.createElement("div",{className:"grid grid-cols-12 gap-4 items-end"},a.createElement("div",{className:"col-span-2"},a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"날짜 필터"),a.createElement("select",{value:t.dateFilter,onChange:i=>o("dateFilter",i.target.value),className:"w-full h-10 px-3 border rounded-lg text-sm bg-slate-700/50 border-slate-600/50 text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-transparent"},ps.dateFilterOptions.map(i=>a.createElement("option",{key:i.value,value:i.value},i.label)))),a.createElement("div",{className:"col-span-3"},a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"기간 설정"),a.createElement("div",{className:"grid grid-cols-2 gap-2"},a.createElement("input",{type:"date",value:t.startDate,onChange:i=>o("startDate",i.target.value),disabled:t.dateFilter==="missing",className:"w-full h-10 px-3 border rounded-lg text-sm transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-transparent bg-slate-700/50 border-slate-600/50 text-gray-200 disabled:opacity-50"}),a.createElement("input",{type:"date",value:t.endDate,onChange:i=>o("endDate",i.target.value),disabled:t.dateFilter==="missing",className:"w-full h-10 px-3 border rounded-lg text-sm transition-all focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-transparent bg-slate-700/50 border-slate-600/50 text-gray-200 disabled:opacity-50"}))),a.createElement("div",{className:"col-span-2"},a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"운영 상태"),a.createElement("select",{value:t.status,onChange:i=>o("status",i.target.value),className:"w-full h-10 px-3 border rounded-lg text-sm bg-slate-700/50 border-slate-600/50 text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-transparent"},ps.statusOptions.map(i=>a.createElement("option",{key:i.value,value:i.value},i.label)))),a.createElement("div",{className:"col-span-5"},a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"충전소 검색"),a.createElement("input",{type:"text",value:t.search,onChange:i=>o("search",i.target.value),placeholder:"충전소명이나 주소로 검색...",className:"w-full h-10 px-3 border rounded-lg text-sm bg-slate-700/50 border-slate-600/50 text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-transparent"})))))},SE=t=>({caption:t?"text-sm":"text-xs",body:t?"text-base":"text-sm",subtitle:t?"text-lg":"text-base",title:t?"text-xl":"text-lg",heading:t?"text-2xl":"text-xl",display:t?"text-3xl":"text-2xl",hero:t?"text-4xl":"text-3xl"}),pe=({children:t,variant:e="primary",size:r="md",disabled:n=!1,loading:s=!1,icon:l,iconPosition:o="left",className:i="",...u})=>{const{isMobile:d}=gp(),m=SE(d),h={primary:"bg-gradient-to-r from-slate-700 to-slate-600 hover:from-slate-600 hover:to-slate-500 text-white shadow-lg hover:shadow-slate-500/25",secondary:"bg-slate-600/20 text-slate-300 border border-slate-500/30 hover:bg-slate-600/30 hover:text-slate-200",accent:"bg-gradient-to-r from-slate-800 to-slate-700 hover:from-slate-700 hover:to-slate-600 text-white shadow-lg hover:shadow-slate-600/25",danger:"bg-gradient-to-r from-red-600 to-red-500 hover:from-red-500 hover:to-red-400 text-white shadow-lg hover:shadow-red-500/25",success:"bg-gradient-to-r from-emerald-600 to-emerald-500 hover:from-emerald-500 hover:to-emerald-400 text-white shadow-lg hover:shadow-emerald-500/25",ghost:"text-slate-300 hover:text-slate-200 hover:bg-slate-700/30",outline:"border border-slate-600/50 text-slate-300 hover:bg-slate-700/30 hover:text-slate-200"},x={sm:`px-3 py-2 ${m.caption}`,md:`px-4 py-2 ${m.body}`,lg:`px-5 py-3 ${m.subtitle}`,xl:`px-6 py-4 ${m.title}`},_={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5",xl:"w-6 h-6"},S=`
    inline-flex items-center justify-center font-medium rounded-xl 
    transition-all duration-200 
    focus:outline-none focus:ring-2 focus:ring-slate-500/50 
    disabled:opacity-50 disabled:cursor-not-allowed
    hover:transform hover:-translate-y-0.5 active:transform active:translate-y-0
    ${x[r]} 
    ${h[e]} 
    ${i}
  `;return a.createElement("button",{className:S,disabled:n||s,...u},s&&a.createElement("div",{className:`animate-spin rounded-full border-2 border-current border-t-transparent mr-2 ${_[r]}`}),l&&o==="left"&&!s&&a.createElement(l,{className:`${_[r]} ${t?"mr-2":""}`}),t,l&&o==="right"&&!s&&a.createElement(l,{className:`${_[r]} ${t?"ml-2":""}`}))},gp=()=>{const[t,e]=k.useState("desktop");return k.useEffect(()=>{const r=()=>{const n=window.innerWidth;n<768?e("mobile"):n<1024?e("tablet"):e("desktop")};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),{breakpoint:t,isMobile:t==="mobile",isTablet:t==="tablet",isDesktop:t==="desktop",isMobileOrTablet:t==="mobile"||t==="tablet"}},CE=t=>{const[e,r]=k.useState(t),n=k.useCallback((i,u)=>{r(d=>d.map(m=>{if(m.id===i){const h={...m,status:u};return u==="completed"?h.completedDate=G.getKoreaToday():m.status==="completed"&&(h.completedDate=null),h}return m}))},[]),s=k.useCallback(i=>new Promise((u,d)=>{try{if(console.log("=== addBill 함수 시작 ==="),console.log("받은 newBill:",i),console.log("현재 bills 상태:",e),console.log("bills 배열 길이:",e.length),!i||!i.name||!i.dueDate||!i.category||!i.stationName){console.error("addBill: 필수 필드 누락",{newBill:!!i,name:!!(i!=null&&i.name),dueDate:!!(i!=null&&i.dueDate),category:!!(i!=null&&i.category),stationName:!!(i!=null&&i.stationName)}),d(new Error("필수 정보가 누락되었습니다."));return}if(i.isRecurring&&(i.category==="재산세"||i.category==="기타세")){console.log("반복 납부 세금 생성 시작");const m=[],h=new Date(i.dueDate),x=Date.now();for(let _=0;_<6;_++){const S=new Date(h);S.setFullYear(h.getFullYear()+_);const A={id:Date.now()+_+Math.random()*1e3,...i,dueDate:S.toISOString().split("T")[0],amount:_===0?i.amount:"미정",status:_===0?i.status:i.category==="취득세"?"accounting_review":"pending",uploadedAt:G.getKoreaToday(),completedDate:_===0&&i.status==="completed"?i.completedDate:null,isRecurring:!0,recurringGroup:x,isOriginal:_===0};m.push(A),console.log(`반복 납부 ${_+1}번째 생성:`,A)}console.log("setBills 호출 전 bills 상태:",e.length),console.log("추가할 bills:",m.length),r(_=>{console.log("setBills 콜백 실행 - prevBills:",_.length);const S=[..._,...m];console.log("반복 납부 bills 업데이트:",{이전개수:_.length,추가개수:m.length,최종개수:S.length});try{const A=hs.save("tax_bills",S);console.log("즉시 localStorage 저장 결과:",A);const M=hs.load("tax_bills",[]);console.log("저장 확인 - 읽어온 데이터 개수:",M.length),u(!0)}catch(A){console.error("localStorage 저장 실패:",A),d(A)}return S}),console.log(`반복 납부 ${m.length}개 생성 완료`)}else{console.log("일반 납부 세금 생성 시작");const m={id:Date.now()+Math.random()*1e3,...i,uploadedAt:G.getKoreaToday(),completedDate:null,isRecurring:!1};console.log("일반 납부 bill 생성:",m),console.log("setBills 호출 전 bills 상태:",e.length),r(h=>{console.log("setBills 콜백 실행 - prevBills:",h.length);const x=[...h,m];console.log("일반 납부 bills 업데이트:",{이전개수:h.length,추가된bill:m,최종개수:x.length});try{const _=hs.save("tax_bills",x);console.log("즉시 localStorage 저장 결과:",_);const S=hs.load("tax_bills",[]);console.log("저장 확인 - 읽어온 데이터 개수:",S.length),u(!0)}catch(_){console.error("localStorage 저장 실패:",_),d(_)}return x}),console.log("일반 납부 생성 완료")}}catch(m){console.error("❌ addBill 실행 중 오류:",m),console.error("Error details:",{message:m.message,stack:m.stack,newBill:i}),d(m)}}),[e,r]),l=k.useCallback((i,u)=>{r(d=>d.map(m=>{if(m.id===i){const h={...m,...u};if(m.isOriginal&&u.hasOwnProperty("isRecurring"))if(u.isRecurring&&!m.isRecurring){const x=new Date(h.dueDate),_=[];for(let S=1;S<6;S++){const A=new Date(x);A.setFullYear(x.getFullYear()+S);const M={id:Date.now()+S,...h,dueDate:A.toISOString().split("T")[0],amount:"미정",isRecurring:!0,recurringGroup:m.recurringGroup||Date.now(),isOriginal:!1};_.push(M)}setTimeout(()=>{r(S=>[...S,..._])},0)}else!u.isRecurring&&m.isRecurring&&setTimeout(()=>{r(x=>x.filter(_=>!(_.recurringGroup===m.recurringGroup&&!_.isOriginal)))},0);return h}return m}))},[]),o=k.useCallback(i=>{r(u=>{const d=u.find(m=>m.id===i);return d!=null&&d.isRecurring&&(d!=null&&d.isOriginal)?u.filter(m=>m.recurringGroup!==d.recurringGroup):u.filter(m=>m.id!==i)})},[]);return{bills:e,setBills:r,updateBillStatus:n,addBill:s,updateBill:l,deleteBill:o}},DE=t=>{const[e,r]=k.useState(t),n=k.useCallback(o=>{const i={...o,registeredDate:o.registeredDate||G.getKoreaToday()};r(u=>[i,...u])},[]),s=k.useCallback((o,i)=>{r(u=>u.map(d=>d.name===o?i:d))},[]),l=k.useCallback(o=>{r(i=>i.filter(u=>u.name!==o))},[]);return{stations:e,setStations:r,addStation:n,updateStation:s,deleteStation:l}},TE=()=>{const[t,e]=k.useState({category:"all",stationSearch:"",startDate:"",endDate:""}),[r,n]=k.useState({sortBy:"dueDate",sortOrder:"asc"}),[s,l]=k.useState({search:"",status:"all",dateFilter:"all",startDate:"",endDate:""}),o=k.useCallback(()=>{const u=new Date,d=u.getFullYear(),m=u.getMonth(),h=new Date(d,m-1,1),x=new Date(d,m+2,0);e({category:"all",stationSearch:"",startDate:h.toISOString().split("T")[0],endDate:x.toISOString().split("T")[0]})},[]),i=k.useCallback(()=>{l({search:"",status:"all",dateFilter:"all",startDate:"",endDate:""})},[]);return{globalFilters:t,setGlobalFilters:e,filters:r,setFilters:n,resetFilters:o,stationFilters:s,setStationFilters:l,resetStationFilters:i}},AE=()=>{const[t,e]=k.useState([]);k.useEffect(()=>{const o=()=>{const u=G.getKoreaTime();e(d=>d.filter(h=>{const x=new Date(h.deletedAt);return(u-x)/(1e3*60*60*24)<3}))};o();const i=setInterval(o,24*60*60*1e3);return()=>clearInterval(i)},[]);const r=k.useCallback(o=>{e(i=>[...i,{...o,deletedAt:G.getKoreaTime().toISOString()}])},[]),n=k.useCallback(o=>{e(d=>d.filter(m=>m.id!==o.id));const{deletedAt:i,...u}=o;return u},[]),s=k.useCallback(o=>{e(i=>i.filter(u=>u.id!==o))},[]),l=k.useCallback(()=>e([]),[]);return{trash:t,moveToTrash:r,restoreFromTrash:n,permanentDelete:s,emptyTrash:l}},xa=({category:t})=>a.createElement("span",{className:`px-2 py-1 rounded-lg text-xs font-medium border ${Pf[t]||Pf.기타세}`},t),xt=({isOpen:t,onClose:e,title:r,children:n,size:s="md",heightMode:l="auto"})=>{if(!t)return null;const o={sm:"max-w-md",md:"max-w-md",lg:"max-w-2xl",xl:"max-w-4xl"},i={auto:"max-h-[90vh]",fixed:"h-[80vh]",fullscreen:"h-[95vh]"};return a.createElement("div",{className:NE},a.createElement("div",{className:`bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl shadow-2xl w-full ${o[s]} border border-slate-700/50 ${i[l]} flex flex-col overflow-hidden m-4`},a.createElement("div",{className:"flex justify-between items-center p-6 pb-4 border-b border-slate-700/50 flex-shrink-0"},a.createElement("h2",{className:"text-lg font-medium text-gray-100"},r),a.createElement("button",{onClick:e,className:"text-gray-400 hover:text-gray-200 transition-colors flex-shrink-0"},a.createElement(ms,{className:"w-5 h-5"}))),a.createElement("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 pt-4 min-h-0"},n)))},jf=a.memo(({bill:t,onStatusChange:e,onClick:r})=>{const s=V.getDaysUntilDue(t.dueDate)<0&&t.status==="pending",l=t.status==="completed"?"bg-gradient-to-br from-gray-900/30 to-gray-800/20 backdrop-blur-md rounded-lg shadow-md p-3 mb-2 group hover:shadow-gray-500/20 hover:shadow-lg transition-all duration-300 border border-gray-500/20"+(r?" cursor-pointer":""):`bg-gradient-to-br backdrop-blur-md rounded-lg shadow-md p-3 mb-2 hover:shadow-lg transition-all duration-300 border ${s?"from-red-900/40 to-red-800/30 border-red-500/30 hover:shadow-red-500/20":"from-slate-800/50 to-slate-700/30 border-slate-600/30 hover:shadow-slate-500/20"}`+(r?" cursor-pointer":"");return a.createElement("div",{onClick:r,className:l},t.status==="completed"?a.createElement(a.Fragment,null,a.createElement("div",{className:"flex items-center justify-between mb-2"},a.createElement("div",{className:"flex items-center space-x-2"},a.createElement(xa,{category:t.category}),a.createElement("h3",{className:"font-medium text-gray-100 text-xs truncate max-w-[120px]"},t.name),t.isRecurring&&!t.isOriginal&&a.createElement("span",{className:"text-xs px-1.5 py-0.5 bg-blue-500/20 text-blue-300 rounded border border-blue-500/30"},"🔗"))),a.createElement("div",{className:"text-xs text-gray-300 mb-1 font-medium truncate"},t.stationName),t.completedDate&&a.createElement("div",{className:"text-xs text-gray-300 flex items-center mb-1"},a.createElement(fe,{className:"w-3 h-3 mr-1"}),t.completedDate," 완료"),a.createElement("div",{className:"text-xs text-gray-400 mb-2 font-mono"},"₩ ",V.formatAmount(t.amount)),e&&a.createElement("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity"},a.createElement("div",{className:"flex justify-end space-x-1"},a.createElement("button",{onClick:o=>{o.stopPropagation(),e(t.id,"pending")},className:"text-xs bg-blue-600/50 text-blue-200 px-2 py-1 rounded hover:bg-blue-500/50 transition-colors backdrop-blur-sm"},"예정으로"),t.category==="취득세"&&a.createElement("button",{onClick:o=>{o.stopPropagation(),e(t.id,"accounting_review")},className:"text-xs bg-amber-600/50 text-amber-200 px-2 py-1 rounded hover:bg-amber-500/50 transition-colors backdrop-blur-sm"},"검토로")))):a.createElement(a.Fragment,null,a.createElement("div",{className:"flex items-center justify-between mb-2"},a.createElement("div",{className:"flex items-center space-x-2 flex-1 min-w-0"},a.createElement(xa,{category:t.category}),a.createElement("h3",{className:"font-medium text-gray-100 text-xs truncate"},t.name),t.isRecurring&&a.createElement("span",{className:"text-xs px-1.5 py-0.5 bg-blue-500/20 text-blue-300 rounded border border-blue-500/30 flex-shrink-0"},t.isOriginal?"🔄":"🔗")),s&&a.createElement("span",{className:"bg-red-500/30 text-red-200 px-1.5 py-0.5 rounded text-xs font-medium border border-red-500/50 flex-shrink-0"},"지연")),a.createElement("div",{className:"text-xs text-gray-300 mb-1 font-medium truncate"},t.stationName),a.createElement("div",{className:"text-xs text-gray-400 mb-1 truncate"},t.address),a.createElement("div",{className:"flex items-center space-x-2 mb-1"},a.createElement(no,{className:"w-3 h-3 text-gray-400 flex-shrink-0"}),a.createElement("span",{className:"text-xs text-gray-300"},t.dueDate)),a.createElement("div",{className:"text-xs text-gray-400 mb-2 font-mono"},"₩ ",V.formatAmount(t.amount)),e&&a.createElement("div",{className:"flex justify-end"},a.createElement("div",{className:"flex space-x-1"},t.status==="pending"&&(t.category==="취득세"?a.createElement(a.Fragment,null,a.createElement("button",{onClick:o=>{o.stopPropagation(),e(t.id,"accounting_review")},className:"bg-gradient-to-r from-amber-600 to-amber-500 text-white px-2 py-1 rounded text-xs hover:from-amber-500 hover:to-amber-400 transition-all duration-200 shadow"},"검토"),a.createElement("button",{onClick:o=>{o.stopPropagation(),e(t.id,"completed")},className:"bg-gradient-to-r from-emerald-600 to-emerald-500 text-white px-2 py-1 rounded text-xs hover:from-emerald-500 hover:to-emerald-400 transition-all duration-200 shadow"},"완료")):a.createElement("button",{onClick:o=>{o.stopPropagation(),e(t.id,"completed")},className:"bg-gradient-to-r from-emerald-600 to-emerald-500 text-white px-2 py-1 rounded text-xs hover:from-emerald-500 hover:to-emerald-400 transition-all duration-200 shadow"},"완료")),t.status==="accounting_review"&&a.createElement(a.Fragment,null,t.category==="취득세"&&(t.amount==="미정"||t.amount===""||!t.amount)?a.createElement("div",{className:"bg-amber-900/20 border border-amber-500/30 rounded px-2 py-1 text-xs"},a.createElement("div",{className:"text-amber-200 font-medium mb-1"},"금액 입력 필요"),a.createElement("div",{className:"text-amber-300 text-xs"},"금액을 입력해야 다음 단계로 진행할 수 있습니다")):a.createElement("button",{onClick:o=>{o.stopPropagation(),e(t.id,"pending")},className:"bg-gradient-to-r from-blue-600 to-blue-500 text-white px-2 py-1 rounded text-xs hover:from-blue-500 hover:to-blue-400 transition-all duration-200 shadow"},"완료"))))))}),$E=()=>{var Od,Ld,Md,Fd,zd,Ud,Bd,Kd,Vd,Wd,Hd,Gd,qd,Yd,Qd,Jd,Xd;const[t,e]=k.useState(!1),[r,n]=k.useState(null),[s,l]=k.useState({email:"",password:""}),[o,i]=k.useState(!1),[u,d]=k.useState(!1),[m,h]=k.useState(""),[x,_]=k.useState(!1),[S,A]=k.useState(""),M=[],N=[],{bills:y,setBills:b,updateBillStatus:T,addBill:j,updateBill:I,deleteBill:O}=CE(M),{isMobile:L,isDesktop:Ne,isMobileOrTablet:ne}=gp(),{stations:ot,addStation:ir,updateStation:Er,deleteStation:Fa}=DE(N),{globalFilters:Ze,setGlobalFilters:Nr,filters:Ur,resetFilters:z,stationFilters:Y,setStationFilters:X,resetStationFilters:ke}=TE();k.useEffect(()=>{const c=new Date,f=new Date(c);f.setDate(c.getDate()-30);const p=new Date(c);p.setDate(c.getDate()+60),!Ze.startDate&&!Ze.endDate&&Nr(v=>({...v,startDate:f.toISOString().split("T")[0],endDate:p.toISOString().split("T")[0]}))},[]);const{trash:we,moveToTrash:Kn,restoreFromTrash:kr,permanentDelete:za,emptyTrash:_r}=AE(),[Re,qe]=k.useState(()=>hs.load("is_logged_in",!1)?"dashboard":"login"),[yn,Xo]=k.useState(!1),[yp,vn]=k.useState(!1),[vp,id]=k.useState(!1),[cd,ud]=k.useState(!1),[$e,Ua]=k.useState(()=>({apiKey:"",fromEmail:"noreply@watercharging.com",fromName:"Water TT 관리시스템"})),[Zo,dd]=k.useState(!1),[ei,md]=k.useState(!1),[kt,fd]=k.useState(""),[Ft,tl]=k.useState(()=>[{id:1,email:"contact@watercharging.com",password:"watercontact!@",role:"super_admin",name:"시스템 관리자",createdAt:G.getKoreaToday(),status:"active"}]),[xp,rl]=k.useState(!1),[re,Sr]=k.useState({email:"",password:"",confirmPassword:"",name:"",role:"viewer"}),[wp,ti]=k.useState(!1),[bp,nl]=k.useState(!1),[cr,al]=k.useState(null),[Ep,hd]=k.useState(!1),[Np,sl]=k.useState(!1),[Ba,ll]=k.useState(null),[de,Br]=k.useState({name:"",role:"",newPassword:"",confirmPassword:""}),[kp,pd]=k.useState(!1);k.useEffect(()=>{const c=()=>{window.innerWidth<768?Xo(!0):window.innerWidth<1024&&(yn||Xo(!0))};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]);const[_p,Sp]=k.useState(new Date),[RE,Cp]=k.useState({accounting_review:8,pending:8,completed:8}),[Dp,Tp]=k.useState({accounting_review:1,pending:1,completed:1}),[IE,ri]=k.useState(!1),[ni,ai]=k.useState(1),[Ka]=k.useState(10),[OE,LE]=k.useState(1),[ME]=k.useState(10),gd=(c,f)=>{k.useEffect(()=>{const p=v=>{c.current&&!c.current.contains(v.target)&&f()};return document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[c,f])},yd=k.useRef(null),vd=k.useRef(null);gd(yd,()=>ze(!1)),gd(vd,()=>ze(!1));const[si,ol]=k.useState(!1),[li,xn]=k.useState(!1),[Ap,Qt]=k.useState(!1),[$p,xd]=k.useState(!1),[Pp,il]=k.useState(!1),[jp,wd]=k.useState(!1),[Rp,Va]=k.useState(!1),[zt,Ip]=k.useState(null),[bd,Vn]=k.useState(!1),[R,wn]=k.useState(null),[FE,oi]=k.useState(!1),[ee,Jt]=k.useState({}),[Op,Wa]=k.useState(!1),[Le,Ed]=k.useState(()=>new Set),[Lp,cl]=k.useState(!1),[ul,Mp]=k.useState(!1),[et,Ha]=k.useState({googleVisionApiKey:""}),[Me,ii]=k.useState(""),[ci,Nd]=k.useState(!1),[Fp,zp]=k.useState(1),[Up]=k.useState(5),[dl,kd]=k.useState("users"),[Bp,ml]=k.useState(!1),[Wn,fl]=k.useState(null),[tt,Kp]=k.useState(null),[Vp,Wp]=k.useState(!1),[zE,Hp]=k.useState(1),[UE,Gp]=k.useState(""),[BE]=k.useState(5),[_d,ui]=k.useState([]),[KE,qp]=k.useState(!1),Hn=k.useCallback((c,f="info",p=3e3)=>{const v=Date.now(),w={id:v,message:c,type:f,timestamp:new Date};ui(g=>[...g,w]),qp(!0),setTimeout(()=>{ui(g=>g.filter(E=>E.id!==v))},p)},[]),te=k.useCallback(c=>Hn(c,"success"),[Hn]),W=k.useCallback(c=>Hn(c,"error",5e3),[Hn]),Ga=k.useCallback(c=>Hn(c,"warning",4e3),[Hn]),[pt,qa]=k.useState({currentPassword:"",newPassword:"",confirmPassword:""});k.useEffect(()=>{ul&&(()=>{try{const f=le.config.apiKey,p=le.config.fromEmail,v=le.config.fromName;Ua({apiKey:f==="YOUR_SENDGRID_API_KEY"?"":f,fromEmail:p,fromName:v})}catch(f){console.warn("SendGrid 설정 로드 실패:",f)}})()},[ul]);const Yp=k.useCallback(async()=>{var f,p,v;if(!((f=$e.apiKey)!=null&&f.trim())||!((p=$e.fromEmail)!=null&&p.trim())||!((v=$e.fromName)!=null&&v.trim())){W("모든 필드를 입력해주세요.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test($e.fromEmail)){W("올바른 이메일 형식을 입력해주세요.");return}if(!$e.apiKey.startsWith("SG.")){W('SendGrid API 키는 "SG."로 시작해야 합니다.');return}dd(!0);try{if(le.setConfig($e.apiKey,$e.fromEmail,$e.fromName))te("SendGrid 설정이 저장되었습니다.");else throw new Error("설정 저장에 실패했습니다.")}catch(w){W(w.message||"SendGrid 설정 저장 중 오류가 발생했습니다.")}finally{dd(!1)}},[$e,W,te]),Qp=k.useCallback(()=>{try{le.setConfig("","",""),Ua({apiKey:"",fromEmail:"noreply@watercharging.com",fromName:"Water TT 관리시스템"}),te("SendGrid 설정이 삭제되었습니다.")}catch{W("SendGrid 설정 삭제 중 오류가 발생했습니다.")}},[W,te]),Jp=k.useCallback(async()=>{if(!(kt!=null&&kt.trim())){W("테스트 이메일 주소를 입력해주세요.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(kt)){W("올바른 이메일 형식을 입력해주세요.");return}if(!le.hasValidApiKey()){W("먼저 SendGrid API 키를 설정해주세요.");return}md(!0);try{const f=await le.sendTestEmail(kt);f.success?(te(`테스트 이메일이 ${kt}로 전송되었습니다.`),fd("")):f.isNetworkError?W("네트워크 오류가 발생했습니다. 인터넷 연결을 확인해주세요."):f.statusCode===401?W("API 키가 유효하지 않습니다. SendGrid API 키를 확인해주세요."):f.statusCode===403?W("API 키 권한이 부족합니다. SendGrid에서 Mail Send 권한을 확인해주세요."):W(`이메일 전송 실패: ${f.error}`)}catch(f){W(`테스트 이메일 전송 중 오류가 발생했습니다: ${f.message}`)}finally{md(!1)}},[kt,W,te]);k.useEffect(()=>{ul&&(()=>{try{const f=Ke.apiConfig.apiKey;ii(f==="YOUR_API_KEY_HERE"?"":f),Ha({googleVisionApiKey:f==="YOUR_API_KEY_HERE"?"":f})}catch(f){console.warn("Failed to load API key:",f)}})()},[ul]);const Xp=k.useCallback(async()=>{var c;if(!((c=et.googleVisionApiKey)!=null&&c.trim())){W("API 키를 입력해주세요.");return}Nd(!0);try{if(et.googleVisionApiKey.length<20)throw new Error("유효하지 않은 API 키 형식입니다.");Ke.setApiKey(et.googleVisionApiKey),ii(et.googleVisionApiKey),te("API 키가 성공적으로 업데이트되었습니다."),Mp(!1)}catch(f){W(f.message||"API 키 업데이트 중 오류가 발생했습니다.")}finally{Nd(!1)}},[et.googleVisionApiKey,W,te]),Zp=k.useCallback(()=>{try{Ke.setApiKey(""),ii(""),Ha({googleVisionApiKey:""}),te("API 키가 삭제되었습니다.")}catch{W("API 키 삭제 중 오류가 발생했습니다.")}},[W,te]),q=Ft.find(c=>c.id===r)||null,Ya=(q==null?void 0:q.role)==="super_admin"||(q==null?void 0:q.role)==="admin";(q==null?void 0:q.role)==="super_admin"||(q==null?void 0:q.role)==="admin"||(q==null||q.role);const di=(q==null?void 0:q.role)==="super_admin"||(q==null?void 0:q.role)==="admin",ye=(q==null?void 0:q.role)==="viewer";k.useEffect(()=>{ye&&Re==="accounts"&&qe("dashboard"),(q==null?void 0:q.role)==="editor"&&Re==="accounts"&&qe("dashboard")},[ye,Re,q]);const[Gn,Cr]=k.useState(null),[qn,bn]=k.useState([]),[gt,hl]=k.useState(()=>({tax_alerts:[],station_alerts:[]}));k.useEffect(()=>{const c=()=>{const p=G.getKoreaTime();bn(v=>v.filter(w=>{const g=G.parseKoreaDate(w.createdAt)||new Date(w.createdAt);return(p-g)/(1e3*60*60*24)<3}))};c();const f=setInterval(c,24*60*60*1e3);return()=>clearInterval(f)},[]);const[eg,pl]=k.useState(!1),[tg,Sd]=k.useState(!1),[$,yt]=k.useState(null),[Fe,Yn]=k.useState(null),[it,ur]=k.useState(null),[mi,rg]=k.useState([]),[Cd,ng]=k.useState([]),[fi,ag]=k.useState([]),[H,rt]=k.useState({name:"",amount:"",dueDate:"",category:"",stationName:"",address:"",isRecurring:!1}),[F,nt]=k.useState({name:"",address:"",status:"operating",approvalDate:"",safetyCheckDate:"",registeredDate:"",needsApproval:!1}),[Ye,Dr]=k.useState(""),[Dd,ze]=k.useState(!1),[VE,WE]=k.useState([]),[Ut,hi]=k.useState([]),[sg,Td]=k.useState(!1),[lg,gl]=k.useState(!1),[Bt,pi]=k.useState([]),[og,gi]=k.useState(!1),oe=k.useMemo(()=>ot.map(c=>{const f=y.filter(E=>E.stationName===c.name),p=f.length,v=f.filter(E=>E.status==="pending"||E.status==="accounting_review").length,w=f.filter(E=>E.status==="completed").length,g=f.reduce((E,C)=>E+V.getAmount(C.amount),0);return{...c,totalBills:p,pendingBills:v,completedBills:w,totalAmount:g}}),[ot,y]),Qn=k.useMemo(()=>{let c=0;c+=qn.filter(v=>!Le.has(v.id)).length;const f=[60,15,3],p=y.filter(v=>{const w=V.getDaysUntilDue(v.dueDate);return f.includes(w)&&v.status==="pending"});return c+=p.filter(v=>!Le.has(`upcoming-${v.id}-${V.getDaysUntilDue(v.dueDate)}`)).length,oe.forEach(v=>{if(!v.registeredDate)return;const w=new Date(v.registeredDate),g=Math.floor((new Date-w)/(1e3*60*60*24));if(!v.approvalDate||v.approvalDate.trim()===""){const E=`missing-approval-${v.name}`;!Le.has(E)&&g>=1&&c++}if(!v.safetyCheckDate||v.safetyCheckDate.trim()===""){const E=`missing-safety-${v.name}`;!Le.has(E)&&g>=1&&c++}}),console.log("📊 알림 개수 계산:",{manualNotifications:qn.filter(v=>!Le.has(v.id)).length,upcomingBills:p.filter(v=>!Le.has(`upcoming-${v.id}-${V.getDaysUntilDue(v.dueDate)}`)).length,missingData:c-qn.filter(v=>!Le.has(v.id)).length-p.filter(v=>!Le.has(`upcoming-${v.id}-${V.getDaysUntilDue(v.dueDate)}`)).length,totalCount:c,readNotifications:Array.from(Le)}),c},[y,oe,qn,Le]),[dr,yi]=k.useState(()=>({enabled:!1,taxAlerts:!0,stationAlerts:!0})),[Ad,ig]=k.useState(()=>({})),yl=k.useCallback(async c=>{if(console.log("📧 이메일 발송 시도:",{type:c.type,station:c.stationName,settings:dr}),!dr.enabled){console.log("📧 이메일 설정이 비활성화됨 - 발송 취소");return}if(!le.hasValidApiKey()){console.warn("📧 SendGrid API 키가 설정되지 않아 이메일을 발송하지 않습니다.");return}const f=G.getKoreaToday(),p=`${c.id}-${f}`;if(Ad[p]){console.log("📧 이미 오늘 발송된 알림입니다:",c.id);return}try{let v=[];if(c.type.includes("missing_")||c.type.includes("_added")?dr.stationAlerts&&(v=(gt.station_alerts||[]).map(C=>Ft.find(D=>D.id===C)).filter(C=>C&&C.status==="active").map(C=>C.email)):dr.taxAlerts&&(v=(gt.tax_alerts||[]).map(C=>Ft.find(D=>D.id===C)).filter(C=>C&&C.status==="active").map(C=>C.email)),v.length===0){console.log("📧 이메일 수신자가 없습니다:",c.type);return}let w,g;if(c.type==="prepare_notice"||c.type==="ready_notice"||c.type==="final_notice"?(w="taxReminder",g={stationName:c.stationName,taxType:c.data.bill.category,amount:V.formatAmount(c.data.bill.amount),dueDate:c.data.bill.dueDate,daysLeft:c.data.daysLeft,priority:c.priority}):c.type==="missing_approval"||c.type==="missing_safety"?(w="stationInfoMissing",g={stationName:c.stationName,missingType:c.type==="missing_approval"?"approval":"safety",daysSinceRegistered:c.data.daysSinceRegistered}):(c.type==="approval_added"||c.type==="safety_added")&&(w="stationInfoAdded",g={stationName:c.stationName,infoType:c.type==="approval_added"?"approval":"safety",date:c.date,hasAutoTax:c.message&&c.message.includes("자동 등록")}),w&&g){console.log("📧 이메일 발송 시작:",{type:w,recipients:v,data:g});const E=await le.sendTemplateEmail(v,w,g);E.success?(ig(C=>({...C,[p]:{sentAt:new Date().toISOString(),recipients:v,type:w}})),console.log("✅ 이메일 발송 성공:",c.id)):console.error("❌ 이메일 발송 실패:",E.error)}}catch(v){console.error("💥 이메일 발송 중 오류:",v)}},[dr,Ad,gt,Ft]),vl=k.useMemo(()=>{const c=[],f=[60,15,3];y.filter(w=>{const g=V.getDaysUntilDue(w.dueDate);return f.includes(g)&&(w.status==="pending"||w.status==="accounting_review")}).forEach(w=>{const g=V.getDaysUntilDue(w.dueDate),E=`upcoming-${w.id}-${g}`;let C,D,U;g===60?(C="prepare_notice",D="low",U=`${w.stationName} ${w.category} 사전 준비 알림 (60일 전)`):g===15?(C="ready_notice",D="medium",U=`${w.stationName} ${w.category} 준비 완료 알림 (15일 전)`):g===3&&(C="final_notice",D="high",U=`${w.stationName} ${w.category} 최종 확인 알림 (3일 전)`);const K={id:E,type:C,priority:D,stationName:w.stationName,title:U,data:{bill:w,daysLeft:g},createdAt:w.dueDate,isRead:Le.has(E)};c.push(K),!K.isRead&&g===3&&setTimeout(()=>yl(K),100)}),oe.forEach(w=>{let g;w.registeredDate?g=new Date(w.registeredDate):(g=new Date,g.setDate(g.getDate()-30));const E=G.getKoreaTime(),C=Math.floor((E-g)/(1e3*60*60*24));if(!w.approvalDate||w.approvalDate.trim()===""){const D=`missing-approval-${w.name}`;if(!Le.has(D)&&C>=30&&(C-30)%7===0){const U={id:D,type:"missing_approval",priority:C>30?"high":"medium",stationName:w.name,title:`${w.name} 사용 승인일 미입력`,data:{station:w,daysSinceRegistered:C},createdAt:w.registeredDate||G.getKoreaToday(),isRead:!1};c.push(U),C>=30&&setTimeout(()=>yl(U),200)}}if(!w.safetyCheckDate||w.safetyCheckDate.trim()===""){const D=`missing-safety-${w.name}`;if(!Le.has(D)&&C===30){const U={id:D,type:"missing_safety",priority:"high",stationName:w.name,title:`${w.name} 안전 점검일 미입력`,data:{station:w,daysSinceRegistered:C},createdAt:w.registeredDate||G.getKoreaToday(),isRead:!1};c.push(U),setTimeout(()=>yl(U),300)}}}),qn.forEach(w=>{const g=w.id;c.push({id:g,type:w.type,priority:"medium",stationName:w.stationName,title:w.type==="approval_added"?`${w.stationName} 사용 승인일 추가됨`:`${w.stationName} 안전 점검일 추가됨`,data:{notification:w},createdAt:w.createdAt,isRead:Le.has(g)})});const v=c.sort((w,g)=>{if(w.isRead!==g.isRead)return w.isRead?1:-1;const E={high:3,medium:2,low:1},C=E[g.priority]-E[w.priority];return C!==0?C:new Date(g.createdAt)-new Date(w.createdAt)});return{notifications:v,unreadCount:v.filter(w=>!w.isRead).length,highPriorityCount:v.filter(w=>w.priority==="high"&&!w.isRead).length}},[y,oe,qn,Le,yl]),xl=k.useMemo(()=>Ye?oe.filter(c=>c.name.toLowerCase().includes(Ye.toLowerCase())||c.address.toLowerCase().includes(Ye.toLowerCase())):oe,[oe,Ye]),Qa=k.useMemo(()=>ps.applyFilters(oe,Y),[oe,Y]),cg=k.useMemo(()=>{const c=(ni-1)*Ka,f=c+Ka;return Qa.slice(c,f)},[Qa,ni,Ka]),ug=Math.ceil(Qa.length/Ka),Jn=k.useCallback(c=>{let f=y.filter(p=>p.status===c);return Ze.category!=="all"&&(f=f.filter(p=>p.category===Ze.category)),Ze.stationSearch&&(f=f.filter(p=>{var v,w;return((v=p.stationName)==null?void 0:v.toLowerCase().includes(Ze.stationSearch.toLowerCase()))||((w=p.address)==null?void 0:w.toLowerCase().includes(Ze.stationSearch.toLowerCase()))})),(Ze.startDate||Ze.endDate)&&(f=f.filter(p=>{const v=new Date(p.dueDate),w=Ze.startDate?new Date(Ze.startDate):null,g=Ze.endDate?new Date(Ze.endDate):null;return w&&g?v>=w&&v<=g:w?v>=w:g?v<=g:!0})),f.sort((p,v)=>{let w,g;switch(Ur.sortBy){case"amount":w=V.getAmount(p.amount),g=V.getAmount(v.amount);break;case"uploadedAt":w=new Date(p.uploadedAt),g=new Date(v.uploadedAt);break;case"stationName":w=p.stationName||"",g=v.stationName||"";break;default:w=new Date(p.dueDate),g=new Date(v.dueDate);break}return w<g?Ur.sortOrder==="asc"?-1:1:w>g?Ur.sortOrder==="asc"?1:-1:0}),f},[y,Ze,Ur]),mr=k.useMemo(()=>{const c=y.reduce((w,g)=>w+V.getAmount(g.amount),0),f=y.filter(w=>w.status==="completed").reduce((w,g)=>w+V.getAmount(g.amount),0),p=y.filter(w=>w.status==="pending"||w.status==="accounting_review").reduce((w,g)=>w+V.getAmount(g.amount),0),v=y.filter(w=>V.getDaysUntilDue(w.dueDate)<0&&w.status==="pending");return{totalAmount:c,completedAmount:f,pendingAmount:p,completionRate:y.length>0?Math.round(y.filter(w=>w.status==="completed").length/y.length*100):0,overdueCount:v.length,totalBills:y.length,stationsCount:oe.length}},[y,oe]),dg=k.useMemo(()=>{const c=[],f=new Date;for(let p=0;p<12;p++){const v=new Date(f.getFullYear(),f.getMonth()-p,1),w=`${v.getFullYear()}-${String(v.getMonth()+1).padStart(2,"0")}`,g=v.toLocaleDateString("ko-KR",{year:"numeric",month:"short"}),E=y.filter(U=>{const K=new Date(U.dueDate);return`${K.getFullYear()}-${String(K.getMonth()+1).padStart(2,"0")}`===w}),C=E.reduce((U,K)=>U+V.getAmount(K.amount),0),D=E.filter(U=>U.status==="completed").reduce((U,K)=>U+V.getAmount(K.amount),0);c.push({month:g,total:C,completed:D,pending:C-D,count:E.length})}return c},[y]);k.useMemo(()=>["취득세","재산세","기타세"].map(f=>{const p=y.filter(g=>g.category===f),v=p.reduce((g,E)=>g+V.getAmount(E.amount),0),w=p.filter(g=>g.status==="completed").reduce((g,E)=>g+V.getAmount(E.amount),0);return{category:f,total:v,completed:w,pending:v-w,count:p.length,completionRate:p.length>0?Math.round(p.filter(g=>g.status==="completed").length/p.length*100):0}}),[y]),k.useMemo(()=>oe.sort((c,f)=>f.totalAmount-c.totalAmount).slice(0,5).map(c=>({...c,completionRate:c.totalBills>0?Math.round(c.completedBills/c.totalBills*100):0})),[oe]);const mg=k.useCallback(c=>{const f=G.formatKoreaDate(c);return y.filter(p=>p.dueDate===f&&(p.status==="pending"||p.status==="accounting_review"))},[y]),fg=k.useCallback(c=>{const f=G.formatKoreaDate(c),p=[];return oe.forEach(v=>{v.approvalDate===f&&p.push({type:"approval",stationName:v.name,title:"사용 승인일"}),v.safetyCheckDate===f&&p.push({type:"safety",stationName:v.name,title:"전기 안전 점검일"})}),p},[oe]),hg=k.useCallback(c=>{const f=G.formatKoreaDate(c);return y.filter(p=>p.status==="completed"&&p.completedDate===f)},[y]),vi=({type:c,title:f,count:p,amount:v,icon:w,colorClass:g})=>a.createElement("div",{className:`${g} rounded-xl p-4`},a.createElement("div",{className:"flex items-center justify-between mb-2"},a.createElement("div",{className:"flex items-center space-x-2"},a.createElement(w,{className:"w-5 h-5"}),a.createElement("span",{className:"font-medium"},f)),a.createElement("span",{className:"text-2xl font-bold"},p)),v!==void 0&&a.createElement("div",{className:"text-sm"},"총 ₩",v)),pg=({bill:c,utils:f})=>a.createElement("div",{className:"bg-amber-900/10 rounded-xl p-4 border border-amber-500/20 hover:bg-amber-900/20 transition-colors"},a.createElement("div",{className:"flex items-start justify-between mb-3"},a.createElement("div",{className:"flex-1"},a.createElement("div",{className:"flex items-center space-x-2 mb-2"},a.createElement(xa,{category:c.category}),a.createElement("span",{className:`px-2 py-1 rounded text-xs font-medium border ${f.getDaysUntilDue(c.dueDate)<0?"bg-red-500/20 text-red-300 border-red-500/30":c.status==="accounting_review"?"bg-amber-500/20 text-amber-300 border-amber-500/30":"bg-blue-500/20 text-blue-300 border-blue-500/30"}`},f.getDaysUntilDue(c.dueDate)<0?"지연":c.status==="accounting_review"?"검토 중":"예정")),a.createElement("h4",{className:"font-medium text-gray-100 mb-1",title:c.name},c.name),a.createElement("div",{className:"text-sm text-gray-300 mb-1 truncate",title:c.stationName},c.stationName),a.createElement("div",{className:"text-xs text-gray-400 truncate"},c.address)),a.createElement("div",{className:"text-right ml-3"},a.createElement("div",{className:"text-lg font-bold text-amber-300 font-mono"},"₩",f.formatAmount(c.amount))))),gg=({bill:c,utils:f})=>a.createElement("div",{className:"bg-emerald-900/10 rounded-xl p-3 border border-emerald-500/20"},a.createElement("div",{className:"flex items-center justify-between mb-2"},a.createElement(xa,{category:c.category}),a.createElement(fe,{className:"w-4 h-4 text-emerald-400"})),a.createElement("h4",{className:"text-sm font-medium text-gray-200 mb-1 truncate",title:c.name},c.name),a.createElement("div",{className:"text-xs text-gray-400 mb-1 truncate",title:c.stationName},c.stationName),a.createElement("div",{className:"text-sm font-mono text-emerald-300 mb-1"},"₩",f.formatAmount(c.amount)),a.createElement("div",{className:"text-xs text-gray-500"},"완료: ",c.completedDate)),yg=({event:c,index:f})=>a.createElement("div",{className:"bg-blue-900/10 rounded-xl p-4 border border-blue-500/20"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",{className:"flex items-center space-x-3"},a.createElement("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${c.type==="approval"?"bg-emerald-500/20":"bg-purple-500/20"}`},c.type==="approval"?a.createElement(fe,{className:"w-5 h-5 text-emerald-400"}):a.createElement(Wr,{className:"w-5 h-5 text-purple-400"})),a.createElement("div",null,a.createElement("h4",{className:"font-medium text-gray-100 mb-1"},c.stationName),a.createElement("p",{className:"text-sm text-gray-400"},c.type==="approval"?"충전소 사용 승인 날짜입니다":"전기 안전 점검 예정일입니다"))),a.createElement("span",{className:`px-4 py-2 rounded-lg text-sm font-medium ${c.type==="approval"?"bg-emerald-500/20 text-emerald-300 border border-emerald-500/30":"bg-purple-500/20 text-purple-300 border border-purple-500/30"}`},c.title))),vg=({selectedDateBills:c,selectedCompletedBills:f,selectedStationEvents:p,utils:v})=>{const w=v.formatKoreanCurrency(c.reduce((E,C)=>E+v.getAmount(C.amount),0)),g=v.formatKoreanCurrency(f.reduce((E,C)=>E+v.getAmount(C.amount),0));return a.createElement("div",{className:"h-full flex flex-col"},a.createElement("div",{className:"flex-shrink-0 mb-6"},a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},c.length>0&&a.createElement(vi,{type:"pending",title:"납부 예정",count:c.length,amount:w,icon:Ml,colorClass:"bg-amber-900/20 border border-amber-500/30 text-amber-200"}),f.length>0&&a.createElement(vi,{type:"completed",title:"납부 완료",count:f.length,amount:g,icon:fe,colorClass:"bg-emerald-900/20 border border-emerald-500/30 text-emerald-200"}),p.length>0&&a.createElement(vi,{type:"events",title:"충전소 일정",count:p.length,icon:Wr,colorClass:"bg-blue-900/20 border border-blue-500/30 text-blue-200"}))),a.createElement("div",{className:"flex-1 overflow-y-auto custom-scrollbar min-h-0"},a.createElement("div",{className:"space-y-6"},c.length>0&&a.createElement("div",null,a.createElement("h3",{className:"text-lg font-semibold text-amber-300 mb-4 flex items-center"},a.createElement(Ml,{className:"w-5 h-5 mr-2"}),"납부 예정 세금 (",c.length,"건)"),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},c.slice(0,8).map(E=>a.createElement(pg,{key:E.id,bill:E,utils:v}))),c.length>8&&a.createElement("div",{className:"text-center p-3 bg-slate-800/30 rounded-lg border border-slate-600/30"},a.createElement("p",{className:"text-sm text-gray-400"},"처음 8개만 표시됩니다. 전체 ",c.length,"건 중 ",c.length-8,"건이 더 있습니다."))),f.length>0&&a.createElement("div",null,a.createElement("h3",{className:"text-lg font-semibold text-emerald-300 mb-4 flex items-center"},a.createElement(fe,{className:"w-5 h-5 mr-2"}),"납부 완료 세금 (",f.length,"건)"),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-4"},f.slice(0,9).map(E=>a.createElement(gg,{key:E.id,bill:E,utils:v}))),f.length>9&&a.createElement("div",{className:"text-center p-3 bg-slate-800/30 rounded-lg border border-slate-600/30"},a.createElement("p",{className:"text-sm text-gray-400"},"처음 9개만 표시됩니다. 전체 ",f.length,"건 중 ",f.length-9,"건이 더 있습니다."))),p.length>0&&a.createElement("div",null,a.createElement("h3",{className:"text-lg font-semibold text-blue-300 mb-4 flex items-center"},a.createElement(Wr,{className:"w-5 h-5 mr-2"}),"충전소 일정 (",p.length,"건)"),a.createElement("div",{className:"space-y-3"},p.map((E,C)=>a.createElement(yg,{key:C,event:E,index:C})))),c.length===0&&f.length===0&&p.length===0&&a.createElement("div",{className:"text-center py-12"},a.createElement(no,{className:"w-16 h-16 mx-auto mb-4 text-gray-500"}),a.createElement("p",{className:"text-gray-400 text-lg mb-2"},"이 날짜에는 일정이 없습니다"),a.createElement("p",{className:"text-gray-500 text-sm"},"다른 날짜를 선택해보세요")))))};k.useCallback(c=>V.getDaysUntilDue(c.dueDate)<0&&c.status==="pending"?"overdue":c.status,[]),k.useCallback(c=>({pending:"bg-blue-500",review:"bg-orange-500",overdue:"bg-red-500"})[c]||"bg-gray-500",[]);const xg=k.useCallback(async()=>{if(!re.email||!re.password||!re.confirmPassword||!re.name){W("모든 필드를 입력해주세요.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(re.email)){W("올바른 이메일 형식을 입력해주세요.");return}if(re.password!==re.confirmPassword){W("패스워드가 일치하지 않습니다.");return}if(re.password.length<6){W("패스워드는 최소 6자 이상이어야 합니다.");return}if(Ft.some(f=>f.email===re.email)){W("이미 사용 중인 이메일입니다.");return}ti(!0);try{setTimeout(()=>{const f={id:Date.now(),email:re.email,password:re.password,name:re.name,role:re.role,createdAt:new Date().toISOString().split("T")[0],status:"active"};tl(p=>[...p,f]),Sr({email:"",password:"",confirmPassword:"",name:"",role:"viewer"}),rl(!1),ti(!1),te(`${f.name} 계정이 성공적으로 생성되었습니다.`)},1e3)}catch(f){console.error("Account creation failed:",f),W("계정 생성 중 오류가 발생했습니다. 다시 시도해주세요."),ti(!1)}},[re,Ft,W,te]),wg=k.useCallback(async()=>{if(!Ba||!de.name){alert("이름을 입력해주세요.");return}if(de.newPassword){if(de.newPassword.length<6){alert("패스워드는 최소 6자 이상이어야 합니다.");return}if(de.newPassword!==de.confirmPassword){alert("패스워드가 일치하지 않습니다.");return}}pd(!0),setTimeout(()=>{tl(f=>f.map(p=>p.id===Ba.id?{...p,name:de.name,role:de.role}:p)),sl(!1),ll(null),Br({name:"",role:"",newPassword:"",confirmPassword:""}),pd(!1);const c=de.newPassword?" (패스워드 변경됨)":"";alert(`${de.name} 계정이 수정되었습니다${c}.`)},1e3)},[Ba,de,tl]),bg=k.useCallback(async()=>{cr&&(hd(!0),setTimeout(()=>{tl(c=>c.filter(f=>f.id!==cr.id)),nl(!1),al(null),hd(!1),alert(`${cr.name} 계정이 삭제되었습니다.`)},1e3))},[cr]),xi=k.useCallback(async()=>{if(!s.email||!s.password){A("이메일과 패스워드를 모두 입력해주세요.");return}i(!0),A(""),setTimeout(()=>{const c=Ft.find(f=>f.email===s.email&&f.password===s.password&&f.status==="active");c?(e(!0),n(c.id),l({email:"",password:""}),A("")):A("이메일 또는 패스워드가 올바르지 않습니다."),i(!1)},1e3)},[s,Ft]),$d=k.useCallback(async()=>{!m||!m.trim()||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m)||setTimeout(()=>{_(!0)},1e3)},[m]),Eg=k.useCallback((c,f,p)=>{Ed(v=>new Set([...v,p])),Wa(!1),c==="approval_added"||c==="safety_added"||c==="missing_approval"||c==="missing_safety"?(qe("stations"),Vn(!1),wn(null),X(v=>({...v,search:f})),ai(1)):(qe("kanban"),Nr(v=>({...v,stationSearch:f,category:"all"})))},[]),Ng=k.useCallback(()=>{const c=new Set(Le);vl.notifications.forEach(f=>{c.add(f.id)}),console.log("📖 모든 알림 읽음 처리:",{이전읽음개수:Le.size,새로운읽음개수:c.size,추가된알림:Array.from(c).filter(f=>!Le.has(f))}),Ed(c)},[vl.notifications,Le]),kg=k.useCallback(c=>{if((c==null?void 0:c.length)>0){const f=c[0],p=new FileReader;p.onload=v=>{var w,g;try{const C=v.target.result.split(`
`).filter(Q=>Q.trim()),K=(((w=C[0])==null?void 0:w.toLowerCase().includes("충전소"))||((g=C[0])==null?void 0:g.toLowerCase().includes("name"))?C.slice(1):C).map((Q,ie)=>{var ue;const De=Q.split(",").map(Z=>Z.trim().replace(/"/g,""));if(De.length>=2){const Z=De[0]||`충전소 ${ie+1}`,ct=De[1]||"",hr=oe.some(_t=>_t.name.toLowerCase()===Z.toLowerCase());let Pt=[],Xt=!0;(!Z||Z.trim()==="")&&(Pt.push("충전소명이 필요합니다"),Xt=!1),(!ct||ct.trim()==="")&&(Pt.push("주소가 필요합니다"),Xt=!1),hr&&(Pt.push("이미 존재하는 충전소명입니다"),Xt=!1),Z.length>30&&(Pt.push("충전소명은 30자 이하여야 합니다"),Xt=!1);let pr="operating";const Ie=((ue=De[2])==null?void 0:ue.trim())||"",En=Ie,ut=Ie.toLowerCase();return console.log(`CSV 행 ${ie+1}: 원본 상태 텍스트 = "${En}"`),Ie.includes("종료")||Ie.includes("closed")||ut==="closed"?pr="closed":Ie.includes("예정")||Ie.includes("준비")||Ie.includes("오픈")||Ie.includes("preparing")||ut==="preparing"||Ie.includes("개장")||Ie.includes("개업")?pr="preparing":(Ie.includes("운영")||Ie.includes("operating")||ut==="operating"||Ie==="")&&(pr="operating"),console.log(`CSV 행 ${ie+1}: "${En}" -> ${pr}`),{id:`bulk_${ie}`,name:Z,address:ct,status:pr,originalStatus:En,isValid:Xt,validationErrors:Pt,isDuplicate:hr}}return null}).filter(Boolean);hi(K),pl(!0)}catch{W("CSV 파일을 읽는 중 오류가 발생했습니다. 파일 형식을 확인해주세요.")}},p.readAsText(f,"UTF-8")}},[oe,W]),_g=k.useCallback(c=>{if((c==null?void 0:c.length)>0){const f=c[0],p=new FileReader;p.onload=v=>{var w,g,E;try{const D=v.target.result.split(`
`).filter(ie=>ie.trim()),Q=(((w=D[0])==null?void 0:w.toLowerCase().includes("세금"))||((g=D[0])==null?void 0:g.toLowerCase().includes("충전소"))||((E=D[0])==null?void 0:E.toLowerCase().includes("name"))?D.slice(1):D).map((ie,De)=>{var Z;const ue=ie.split(",").map(ct=>ct.trim().replace(/"/g,""));if(ue.length>=4){const ct=ue[0]||"",hr=ue[1]||"",Pt=ue[2]||"",Xt=ue[3]||"",pr=ue[4]||"미정",Ie=ue[5]||"",En=ue[6]||"";let ut=[],_t=!0;const HE=["회계사 검토","납부 예정","납부 완료","accounting_review","pending","completed"];let Ja="pending";if(Ie&&Ie.trim()!==""){const Te=Ie.toLowerCase().trim();Ie==="회계사 검토"||Te==="accounting_review"?Ja="accounting_review":Ie==="납부 예정"||Te==="pending"?Ja="pending":Ie==="납부 완료"||Te==="completed"?Ja="completed":(ut.push('상태는 "회계사 검토", "납부 예정", "납부 완료" 중 하나여야 합니다'),_t=!1)}else Ja=Pt==="취득세"?"accounting_review":"pending";let Xa=!1;if(Pt==="취득세")Xa=!1;else if(En&&En.trim()!==""){const Te=En.toLowerCase().trim();Te==="y"||Te==="yes"||Te==="예"||Te==="true"?Xa=!0:Te==="n"||Te==="no"||Te==="아니오"||Te==="false"?Xa=!1:(ut.push("반복 납부는 Y/N, 예/아니오, true/false 중 하나여야 합니다"),_t=!1)}Xa&&Pt!=="재산세"&&Pt!=="기타세"&&(ut.push("반복 납부는 재산세와 기타세만 설정할 수 있습니다"),_t=!1),(!ct||ct.trim()==="")&&(ut.push("세금 제목이 필요합니다"),_t=!1),(!hr||hr.trim()==="")&&(ut.push("충전소명이 필요합니다"),_t=!1);const Zd=oe.some(Te=>Te.name.toLowerCase()===hr.toLowerCase());if(hr&&!Zd&&(ut.push("존재하지 않는 충전소입니다"),_t=!1),(!Pt||!["취득세","재산세","기타세"].includes(Pt))&&(ut.push("올바른 세금 분류가 필요합니다 (취득세/재산세/기타세)"),_t=!1),!Xt||!/^\d{4}-\d{2}-\d{2}$/.test(Xt))ut.push("날짜는 YYYY-MM-DD 형식이어야 합니다"),_t=!1;else{const Te=new Date(Xt);isNaN(Te.getTime())&&(ut.push("유효하지 않은 날짜입니다"),_t=!1)}pr&&pr!=="미정"&&!Ve.isValidAmount(pr)&&(ut.push("올바르지 않은 금액 형식입니다"),_t=!1);const em=y.some(Te=>Te.name.toLowerCase()===ct.toLowerCase()&&Te.stationName.toLowerCase()===hr.toLowerCase()&&Te.dueDate===Xt);return em&&(ut.push("이미 존재하는 세금입니다"),_t=!1),{id:`tax_bulk_${De}`,name:ct,stationName:hr,category:Pt,dueDate:Xt,amount:pr||"미정",status:Ja,isRecurring:Xa,address:Zd?(Z=oe.find(Te=>Te.name.toLowerCase()===hr.toLowerCase()))==null?void 0:Z.address:"",isValid:_t,validationErrors:ut,isDuplicate:em}}return null}).filter(Boolean);pi(Q),gl(!0)}catch{W("CSV 파일을 읽는 중 오류가 발생했습니다. 파일 형식을 확인해주세요.")}},p.readAsText(f,"UTF-8")}},[oe,y,W]),Sg=k.useCallback(()=>{Td(!0),setTimeout(()=>{const c=Ut.filter(p=>p.isValid),f=Ut.length-c.length;c.forEach(p=>{const{id:v,isValid:w,validationErrors:g,isDuplicate:E,...C}=p;ir(C)}),hi([]),pl(!1),Td(!1),te(f===0?`${c.length}개의 충전소가 성공적으로 등록되었습니다!`:`${c.length}개의 충전소가 등록되었습니다. ${f}개 항목은 오류로 인해 제외되었습니다.`)},1e3)},[Ut,ir,te]),Cg=k.useCallback(async()=>{gi(!0);try{const c=Bt.filter(p=>p.isValid),f=Bt.length-c.length;for(const p of c){const{id:v,isValid:w,validationErrors:g,isDuplicate:E,...C}=p,D={...C};await j(D)}pi([]),gl(!1),gi(!1),te(f===0?`${c.length}개의 세금이 성공적으로 등록되었습니다!`:`${c.length}개의 세금이 등록되었습니다. ${f}개 항목은 오류로 인해 제외되었습니다.`)}catch(c){gi(!1),W("세금 일괄등록 중 오류가 발생했습니다: "+c.message)}},[Bt,j,te,W]),wi=k.useCallback(async c=>{if(!(c!=null&&c.length))return;const f=c[0];if(f.size>10*1024*1024){W("파일 크기가 너무 큽니다. 10MB 이하의 파일을 업로드해주세요.");return}if(!["image/jpeg","image/jpg","image/png","image/webp","application/pdf"].includes(f.type)){W("지원되지 않는 파일 형식입니다. JPG, PNG, WEBP, PDF 파일만 지원합니다.");return}Sd(!0),ol(!0),yt(null);try{if(f.type==="application/pdf"){te("PDF 파일을 처리하고 있습니다. 첫 번째 페이지를 분석합니다.");try{console.log("PDF 변환 시작:",f.name);const g=await wE(f);if(!g)throw new Error("PDF를 이미지로 변환하는데 실패했습니다.");console.log("PDF → 이미지 변환 성공:",g.name),te("PDF → 이미지 변환 완료. OCR 분석을 시작합니다.");const E=await rc.analyze(g,(C,D)=>{const K={googleVisionOCR:"PDF → 이미지 변환 완료, 구글 비전 API 분석",localAnalysis:"로컬 이미지 분석",fallbackAnalysis:"기본 분석 처리",완료:"분석 완료"}[C]||C;console.log(`${K} 진행률: ${Math.round(D*100)}%`)});E.fileName=f.name,E.sourceType="pdf",yt(E),E.confidence>.8?te(`PDF 분석 완료! (${Math.round(E.confidence*100)}% 신뢰도)`):E.confidence>.6?Ga(`PDF 분석 완료 (${Math.round(E.confidence*100)}% 신뢰도). 내용을 확인해주세요.`):Ga(`PDF 기본 분석 완료 (${Math.round(E.confidence*100)}% 신뢰도). 내용을 꼼꼼히 확인하고 수정해주세요.`);return}catch(g){console.error("PDF 처리 중 오류:",g),W(`PDF 처리 실패: ${g.message}`);const E={fileName:f.name,category:"재산세",name:"PDF 세금 고지서",amount:"미정",dueDate:G.formatKoreaDate(new Date(G.getKoreaTime().getTime()+90*24*60*60*1e3)),confidence:.3,stationName:"",address:"서울특별시 강남구 테헤란로 123",error:`PDF 분석 실패: ${g.message}. 아래 정보를 확인하고 수정해주세요.`,sourceType:"pdf"};yt(E);return}}if(!await new Promise(g=>{const E=new Image;E.onload=()=>g(!0),E.onerror=()=>g(!1),E.src=URL.createObjectURL(f)}))throw new Error("유효하지 않은 이미지 파일입니다.");te("파일 업로드 완료. 다중 분석 시스템을 시작합니다.");const w=await rc.analyze(f,(g,E)=>{const D={googleVisionOCR:"구글 비전 API로 고정밀 분석",localAnalysis:"로컬 패턴 분석",fallbackAnalysis:"기본 분석 처리",완료:"분석 완료"}[g]||g;console.log(`${D} 진행률: ${Math.round(E*100)}%`)});if(w.confidence>.8?te(`고신뢰도 분석 완료! (${Math.round(w.confidence*100)}% 신뢰도)`):w.confidence>.6?Ga(`중간 신뢰도 분석 완료 (${Math.round(w.confidence*100)}% 신뢰도). 내용을 확인해주세요.`):Ga(`기본 분석 완료 (${Math.round(w.confidence*100)}% 신뢰도). 내용을 꼼꼼히 확인하고 수정해주세요.`),!w.stationName&&w.address){const g=oe.find(E=>{const C=E.address.split(" ").slice(0,3).join(" "),D=w.address.split(" ").slice(0,3).join(" ");return C===D});g&&(w.stationName=g.name,w.address=g.address,w.confidence=Math.min(w.confidence+.1,.98),te(`충전소 자동 매칭 완료: ${g.name}`))}yt(w)}catch(v){console.error("파일 업로드 실패:",v),W(v.message||"파일 분석 중 오류가 발생했습니다.");const w=rc.generateFallbackResult(f);w.error=`분석 실패: ${v.message}. 아래 정보를 확인하고 수정해주세요.`,yt(w)}finally{Sd(!1)}},[oe,W,te,Ga]);k.useCallback(c=>{const f=new Date(c);return f.setDate(f.getDate()+60),f.toISOString().split("T")[0]},[]),k.useCallback((c,f,p)=>y.some(v=>v.stationName===c&&v.name===f&&v.dueDate===p&&v.category==="취득세"),[y]),k.useCallback(c=>{const f=c.toLowerCase();let p={fileName:c,category:"재산세",name:"충전소 재산세",amount:"2,350,000",dueDate:G.formatKoreaDate(new Date(G.getKoreaTime().getTime()+90*24*60*60*1e3)),confidence:.75,stationName:"",address:""};f.includes("충전기")||f.includes("charger")?p={...p,category:"취득세",name:"충전기 취득세",amount:"미정"}:f.includes("캐노피")||f.includes("canopy")?p={...p,category:"취득세",name:"캐노피 취득세",amount:"미정"}:(f.includes("공유")||f.includes("사용료"))&&(p={...p,category:"기타세",name:"공유재산 사용료"});const v=["서울특별시 강남구 테헤란로 123","서울특별시 마포구 양화로 234","서울특별시 송파구 올림픽로 345","경기도 수원시 팔달구 덕영대로 456","부산광역시 동구 중앙대로 567"],w=v[Math.floor(Math.random()*v.length)],g=oe.find(E=>{const C=E.address.split(" ").slice(0,3).join(" "),D=w.split(" ").slice(0,3).join(" ");return C===D});return g?(p.stationName=g.name,p.address=g.address):p.address=w,p},[oe]),k.useCallback(async(c,f,p)=>ao.analyzeText(c,f),[]),k.useCallback(c=>{c.preventDefault(),c.stopPropagation(),c.type==="dragenter"||c.type==="dragover"?ri(!0):c.type==="dragleave"&&ri(!1)},[]),k.useCallback(c=>{c.preventDefault(),c.stopPropagation(),ri(!1),wi(Array.from(c.dataTransfer.files))},[wi]);const Pd=k.useCallback(c=>{Yn(c),rt({name:c.name,amount:c.amount,dueDate:c.dueDate,category:c.category,stationName:c.stationName||"",address:c.address||"",isRecurring:c.isRecurring||!1}),Dr(""),ze(!1),xn(!0)},[]),Dg=k.useCallback((c,f,p=[],v=[])=>{f.length===0&&p.length===0&&v.length===0||(rg(f),ng(p||[]),ag(v||[]),Hp(1),Gp(""),xd(!0))},[]),Tg=k.useCallback(async()=>{var w,g;if(console.log("=== confirmAnalysis 시작 ==="),console.log("analyzedData:",$),console.log("현재 bills 개수:",y.length),console.log("현재 bills 상태:",y),!$){console.error("analyzedData가 없음"),W("분석된 데이터가 없습니다.");return}const c={name:(w=$.name)==null?void 0:w.trim(),dueDate:$.dueDate,stationName:(g=$.stationName)==null?void 0:g.trim(),category:$.category};console.log("필수 필드 검증:",c);const f=[];if(c.name||f.push("세금 제목"),c.dueDate||f.push("납부 기한"),c.stationName||f.push("충전소"),c.category||f.push("세금 분류"),f.length>0){console.error("필수 필드가 누락됨:",f),W(`필수 정보가 누락되었습니다: ${f.join(", ")}`);return}console.log("충전소 존재 여부 확인 중..."),console.log("등록된 충전소 목록:",oe.map(E=>E.name));const p=oe.some(E=>E.name===c.stationName);if(console.log("충전소 존재 여부:",p),!p){console.error("충전소를 찾을 수 없음:",c.stationName),W("선택된 충전소를 찾을 수 없습니다. 충전소를 다시 선택해주세요.");return}if($.amount&&!Ve.isValidAmount($.amount)){console.error("유효하지 않은 금액:",$.amount),W("입력된 금액이 유효하지 않습니다.");return}const v={name:c.name,amount:V.normalizeAmount($.amount),dueDate:c.dueDate,category:c.category,stationName:c.stationName,address:$.address?$.address.trim():"",status:c.category==="취득세"?"accounting_review":"pending",isRecurring:c.category==="재산세"||c.category==="기타세"};console.log("생성될 bill 객체:",v);try{console.log("addBill 호출 시작..."),console.log("addBill 함수 타입:",typeof j),console.log("addBill 함수:",j);const E=await j(v);console.log("addBill 호출 결과:",E),console.log("addBill 호출 완료 - 즉시 bills 상태:",y.length),console.log("✅ 세금이 성공적으로 등록되었습니다"),te(`${v.category} "${v.name}"이(가) 성공적으로 등록되었습니다.`),ol(!1),yt(null),console.log("=== confirmAnalysis 완료 ===")}catch(E){console.error("❌ addBill 실행 중 오류:",E),console.error("Error stack:",E.stack),W(`세금 등록 중 오류가 발생했습니다: ${E.message}`)}},[$,j,oe,W,te,y]),Ag=k.useCallback(()=>{if(H.name&&H.dueDate&&H.stationName){const c={...H,amount:V.normalizeAmount(H.amount),status:H.category==="취득세"?"accounting_review":"pending"};j(c),rt({name:"",amount:"",dueDate:"",category:"",stationName:"",address:"",isRecurring:!1}),xn(!1)}},[H,j]),$g=k.useCallback(()=>{if(Fe&&H.name&&H.dueDate&&H.stationName){const c={...H,amount:V.normalizeAmount(H.amount)};I(Fe.id,c),Yn(null),rt({name:"",amount:"",dueDate:"",category:"",stationName:"",address:""}),xn(!1)}},[Fe,H,I]);k.useCallback(c=>{Ip(c),Va(!0)},[]);const Pg=k.useCallback(c=>{ur(c),nt({...c}),Qt(!0)},[]),jg=k.useCallback(async()=>{if(F.name&&F.address){console.log("=== handleAddStation 실행 ==="),console.log("newStation:",F);const c=g=>{const E=new Date(g);return E.setDate(E.getDate()+60),E.toISOString().split("T")[0]},f=(g,E,C)=>y.some(D=>D.stationName===g&&D.name===E&&D.dueDate===C&&D.category==="취득세");ir(F);const p={...F},v=[];if(p.approvalDate&&p.approvalDate.trim()!==""){console.log("승인일이 입력됨:",p.approvalDate);const g=c(p.approvalDate),E="캐노피 취득세";console.log("계산된 캐노피 세금 납부일:",g);const C=f(p.name,E,g);if(console.log("캐노피 세금 중복 여부:",C),!C){const D={name:E,amount:"미정",dueDate:g,category:"취득세",stationName:p.name,address:p.address,status:"accounting_review",isRecurring:!1,uploadedAt:G.getKoreaToday(),completedDate:null,autoGenerated:!0,sourceType:"station_approval",sourceDate:p.approvalDate};v.push(D),console.log("캐노피 취득세 생성 준비:",D)}}if(p.safetyCheckDate&&p.safetyCheckDate.trim()!==""){console.log("점검일이 입력됨:",p.safetyCheckDate);const g=c(p.safetyCheckDate),E="충전기 취득세";console.log("계산된 충전기 세금 납부일:",g);const C=f(p.name,E,g);if(console.log("충전기 세금 중복 여부:",C),!C){const D={name:E,amount:"미정",dueDate:g,category:"취득세",stationName:p.name,address:p.address,status:"accounting_review",isRecurring:!1,uploadedAt:G.getKoreaToday(),completedDate:null,autoGenerated:!0,sourceType:"station_safety",sourceDate:p.safetyCheckDate};v.push(D),console.log("충전기 취득세 생성 준비:",D)}}const w=[];for(const g of v)try{console.log(`${g.name} addBill 실행...`);const E=await j(g);console.log(`${g.name} addBill 성공:`,E),w.push(g)}catch(E){console.error(`${g.name} addBill 실패:`,E),W(`${g.name} 자동 등록에 실패했습니다: ${E.message}`)}if(p.approvalDate&&p.approvalDate.trim()!==""&&p.needsApproval){const g=w.find(E=>E.name==="캐노피 취득세");bn(E=>[...E,{id:`approval-${Date.now()}-${Math.random()}`,type:"approval_added",stationName:p.name,date:p.approvalDate,createdAt:G.getKoreaToday(),message:g?`${p.name} 사용 승인일 추가됨
캐노피 취득세 자동 등록 완료 (납부 기한: ${g.dueDate})`:`${p.name} 사용 승인일 추가됨`}]),console.log("승인일 알림 생성됨")}if(p.safetyCheckDate&&p.safetyCheckDate.trim()!==""){const g=w.find(E=>E.name==="충전기 취득세");bn(E=>[...E,{id:`safety-${Date.now()}-${Math.random()}`,type:"safety_added",stationName:p.name,date:p.safetyCheckDate,createdAt:G.getKoreaToday(),message:g?`${p.name} 전기 안전 점검일 추가됨
충전기 취득세 자동 등록 완료 (납부 기한: ${g.dueDate})`:`${p.name} 전기 안전 점검일 추가됨`}]),console.log("점검일 알림 생성됨")}if(si&&$?yt({...$,stationName:F.name,address:F.address}):li&&rt({...H,stationName:F.name,address:F.address}),nt({name:"",address:"",status:"operating",approvalDate:"",safetyCheckDate:"",registeredDate:G.getKoreaToday()}),Qt(!1),w.length>0){const g=w.map(E=>E.name).join(", ");te(`충전소가 추가되었습니다. ${g}이(가) 자동 등록되었습니다.`)}else te("충전소가 추가되었습니다.")}},[F,ir,si,$,li,H,te,W,y]),Rg=k.useCallback(async()=>{if(it&&F.name&&F.address){const c=g=>{const E=new Date(g);return E.setDate(E.getDate()+60),E.toISOString().split("T")[0]},f=(g,E,C)=>y.some(D=>D.stationName===g&&D.name===E&&D.dueDate===C&&D.category==="취득세"),p=it;Er(it.name,F),b(g=>g.map(E=>E.stationName===it.name?{...E,stationName:F.name,address:F.address}:E));const v=[];if(F.approvalDate&&F.approvalDate.trim()!==""&&(!p.approvalDate||p.approvalDate.trim()===""||p.approvalDate!==F.approvalDate)){const g=c(F.approvalDate),E="캐노피 취득세";if(!f(F.name,E,g)){const D={name:E,amount:"미정",dueDate:g,category:"취득세",stationName:F.name,address:F.address,status:"accounting_review",isRecurring:!1,uploadedAt:G.getKoreaToday(),completedDate:null,autoGenerated:!0,sourceType:"station_approval",sourceDate:F.approvalDate};v.push(D),console.log("캐노피 취득세 생성 준비 (편집):",D)}if(F.needsApproval){const D=v.find(U=>U.name==="캐노피 취득세");bn(U=>[...U,{id:`approval-${Date.now()}-${Math.random()}`,type:"approval_added",stationName:F.name,date:F.approvalDate,createdAt:G.getKoreaToday(),message:D?`${F.name} 사용 승인일이 추가되었습니다: ${F.approvalDate}
캐노피 취득세 자동 등록 완료 (납부 기한: ${D.dueDate})`:`${F.name} 사용 승인일이 추가되었습니다: ${F.approvalDate}`}]),console.log("사용 승인일 알림 생성 (알림 체크됨):",F.name,F.approvalDate)}}if(F.safetyCheckDate&&F.safetyCheckDate.trim()!==""&&(!p.safetyCheckDate||p.safetyCheckDate.trim()===""||p.safetyCheckDate!==F.safetyCheckDate)){const g=c(F.safetyCheckDate),E="충전기 취득세";if(!f(F.name,E,g)){const U={name:E,amount:"미정",dueDate:g,category:"취득세",stationName:F.name,address:F.address,status:"accounting_review",isRecurring:!1,uploadedAt:G.getKoreaToday(),completedDate:null,autoGenerated:!0,sourceType:"station_safety",sourceDate:F.safetyCheckDate};v.push(U),console.log("충전기 취득세 생성 준비 (편집):",U)}const D=v.find(U=>U.name==="충전기 취득세");bn(U=>[...U,{id:`safety-${Date.now()}-${Math.random()}`,type:"safety_added",stationName:F.name,date:F.safetyCheckDate,createdAt:G.getKoreaToday(),message:D?`${F.name} 전기 안전 점검일이 추가되었습니다: ${F.safetyCheckDate}
충전기 취득세 자동 등록 완료 (납부 기한: ${D.dueDate})`:`${F.name} 전기 안전 점검일이 추가되었습니다: ${F.safetyCheckDate}`}]),console.log("안전 점검일 알림 생성:",F.name,F.safetyCheckDate)}const w=[];for(const g of v)try{console.log(`${g.name} addBill 실행 (편집)...`);const E=await j(g);console.log(`${g.name} addBill 성공 (편집):`,E),w.push(g)}catch(E){console.error(`${g.name} addBill 실패 (편집):`,E),W(`${g.name} 자동 등록에 실패했습니다: ${E.message}`)}if(ur(null),nt({name:"",address:"",status:"operating",approvalDate:"",safetyCheckDate:"",registeredDate:G.getKoreaToday()}),Qt(!1),w.length>0){const g=w.map(E=>E.name).join(", ");te(`충전소 정보가 수정되었습니다. ${g}이(가) 자동 등록되었습니다.`)}else te("충전소 정보가 수정되었습니다.")}},[it,F,Er,b,te,W,y]),Ig=({title:c,status:f,icon:p,billsCount:v})=>a.createElement("div",{className:"flex items-center justify-between mb-6"},a.createElement("h2",{className:"font-medium text-gray-100 flex items-center"},a.createElement(p,{className:"w-5 h-5 mr-3 text-slate-400"}),c,a.createElement("span",{className:"ml-3 bg-slate-600/30 text-slate-300 px-3 py-1 rounded-full text-sm font-medium"},v))),Og=({currentPage:c,totalPages:f,onPageChange:p,status:v,totalItems:w,itemsPerPage:g})=>{if(f<=1)return null;const E=(c-1)*g,C=Math.min(E+g,w);return a.createElement(a.Fragment,null,a.createElement("div",{className:"flex items-center justify-center mt-4 pt-4 border-t border-slate-600/30"},a.createElement("div",{className:"flex items-center space-x-2"},a.createElement("button",{onClick:()=>p(v,Math.max(c-1,1)),disabled:c===1,className:`px-3 py-1 text-sm rounded-lg transition-colors ${c===1?"bg-slate-700/30 text-gray-500 cursor-not-allowed":`${be.secondary.bg} ${be.secondary.text} ${be.secondary.bgHover} border ${be.secondary.border}/30`}`},"이전"),a.createElement("div",{className:"flex items-center space-x-1"},Array.from({length:Math.min(5,f)},(D,U)=>{let K;return f<=5||c<=3?K=U+1:c>=f-2?K=f-4+U:K=c-2+U,a.createElement("button",{key:K,onClick:()=>p(v,K),className:`w-8 h-8 text-sm rounded-lg transition-colors ${c===K?`${be.primary.bg} text-white`:"bg-slate-700/50 text-gray-300 hover:bg-slate-600/50"}`},K)})),a.createElement("button",{onClick:()=>p(v,Math.min(c+1,f)),disabled:c===f,className:`px-3 py-1 text-sm rounded-lg transition-colors ${c===f?"bg-slate-700/30 text-gray-500 cursor-not-allowed":`${be.secondary.bg} ${be.secondary.text} ${be.secondary.bgHover} border ${be.secondary.border}/30`}`},"다음"))),a.createElement("div",{className:"text-center mt-2 text-xs text-slate-400"},w>0?a.createElement(a.Fragment,null,E+1,"-",C," / ",w,"개",f>1&&` (${c}/${f} 페이지)`):`총 ${w}개`))},Lg=({title:c,status:f,icon:p,bills:v,onStatusChange:w,onBillClick:g,isViewerOnly:E,currentPage:C,onPageChange:D})=>{const U=p,K=5,Q=Math.ceil(v.length/K),ie=(C-1)*K,De=ie+K,ue=v.slice(ie,De);return a.createElement("div",{className:`${be.cards.primary} backdrop-blur-md rounded-2xl p-6 border`},a.createElement(Ig,{title:c,status:f,icon:U,billsCount:v.length}),a.createElement("div",{className:"space-y-3 min-h-[400px]"},ue.map(Z=>a.createElement(jf,{key:Z.id,bill:Z,onStatusChange:E?null:w,onClick:E?null:()=>g(Z)})),v.length===0&&a.createElement("div",{className:"text-center py-8 text-gray-500 text-sm"},"조회된 세금 정보가 없습니다")),a.createElement(Og,{currentPage:C,totalPages:Q,onPageChange:D,status:f,totalItems:v.length,itemsPerPage:K}))},Mg=({getBillsByStatus:c,updateBillStatus:f,handleBillClick:p,isViewerOnly:v,kanbanPages:w,setKanbanPages:g})=>{const E=(D,U)=>{g(K=>({...K,[D]:U}))},C=[{title:"회계사 검토",status:"accounting_review",icon:Qe,bills:c("accounting_review")},{title:"납부 예정",status:"pending",icon:Ml,bills:c("pending")},{title:"납부 완료",status:"completed",icon:fe,bills:c("completed")}];return a.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 lg:gap-8 mb-6"},C.map(D=>a.createElement(Lg,{key:D.status,title:D.title,status:D.status,icon:D.icon,bills:D.bills,onStatusChange:f,onBillClick:p,isViewerOnly:v,currentPage:w[D.status]||1,onPageChange:E})))},Fg=()=>a.createElement("div",{className:"w-full px-6 py-8 min-h-screen"},a.createElement("div",{className:"mb-6"},a.createElement("div",{className:"mb-4"},a.createElement("h1",{className:"text-4xl font-bold text-gray-100 mb-2"},"대시보드"),a.createElement("div",{className:"text-sm text-gray-400 mb-4"},"최종 업데이트: ",new Date().toLocaleDateString("ko-KR",{timeZone:"Asia/Seoul",year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\./g,"-").replace(/ /g,"").slice(0,-1)),a.createElement("div",{className:"flex items-center space-x-3"},a.createElement(pe,{onClick:()=>qe("kanban"),variant:"primary",icon:fe,size:"sm"},"세금 관리"),a.createElement(pe,{onClick:()=>qe("stations"),variant:"secondary",icon:Wr,size:"sm"},"충전소 관리"),a.createElement(pe,{onClick:()=>qe("calendar"),variant:"accent",icon:no,size:"sm"},"캘린더 보기")))),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12"},a.createElement(nc,{title:"총 세금액",value:`₩${V.formatKoreanCurrency(mr.totalAmount)}`,subtitle:`${mr.totalBills}건`,icon:df,progressWidth:100,progressColor:"bg-slate-500"}),a.createElement(nc,{title:"납부 완료",value:`₩${V.formatKoreanCurrency(mr.completedAmount)}`,subtitle:`${y.filter(c=>c.status==="completed").length}건`,icon:fe,progressWidth:mr.totalAmount>0?mr.completedAmount/mr.totalAmount*100:0,progressColor:"bg-slate-600"}),a.createElement(nc,{title:"납부 예정",value:`₩${V.formatKoreanCurrency(mr.pendingAmount)}`,subtitle:`${y.filter(c=>c.status==="pending"||c.status==="accounting_review").length}건`,icon:Ml,progressWidth:mr.totalAmount>0?mr.pendingAmount/mr.totalAmount*100:0,progressColor:"bg-slate-700"})),a.createElement(EE,{monthlyStats:dg,formatKoreanCurrency:V.formatKoreanCurrency})),zg=({currentDate:c,setCurrentDate:f,koreaTimeUtils:p})=>a.createElement("div",{className:Be+" p-6 mb-6"},a.createElement("div",{className:"flex items-center justify-between mb-6"},a.createElement("h2",{className:"text-2xl font-bold text-gray-100"},c.toLocaleDateString("ko-KR",{year:"numeric",month:"long"})),a.createElement("div",{className:"flex items-center space-x-4"},a.createElement(pe,{onClick:()=>f(new Date(c.getFullYear(),c.getMonth()-1)),variant:"ghost",size:"sm",className:"!p-2",title:"이전 달"},"←"),a.createElement("div",{className:"text-center"},a.createElement(pe,{onClick:()=>f(p.getKoreaTime()),variant:"primary",size:"sm"},"오늘")),a.createElement(pe,{onClick:()=>f(new Date(c.getFullYear(),c.getMonth()+1)),variant:"ghost",size:"sm",className:"!p-2",title:"다음 달"},"→")))),Ug=()=>a.createElement("div",{className:"grid grid-cols-7 gap-2 mb-4"},["일","월","화","수","목","금","토"].map(c=>a.createElement("div",{key:c,className:"text-center text-gray-400 font-medium py-2"},c))),Bg=({date:c,currentDate:f,koreaTimeUtils:p,dateBills:v,completedBills:w,stationEvents:g,handleDateClick:E,utils:C})=>{const D=c.getMonth()===f.getMonth(),U=p.formatKoreaDate(c)===p.getKoreaToday(),K={};return["취득세","재산세","기타세"].forEach(Q=>{const ie=v.filter(Z=>Z.category===Q),De=ie.reduce((Z,ct)=>Z+C.getAmount(ct.amount),0),ue=ie.some(Z=>Z.amount==="미정"||Z.amount===""||!Z.amount);K[Q]={amount:De,hasUndefined:ue,count:ie.length}}),v.length>0||w.length>0||g.length>0,a.createElement("div",{className:`min-h-[100px] p-2 rounded-lg border transition-all duration-200 ${D?"border-slate-600/50 hover:border-slate-500/50 hover:bg-slate-700/30":"border-slate-700/30 opacity-50"} ${U?"bg-blue-900/30 border-blue-500/50":""}`},a.createElement("div",{className:`text-sm font-medium mb-2 ${D?"text-gray-200":"text-gray-500"} ${U?"text-blue-300":""}`},c.getDate()),a.createElement("div",{className:"space-y-1"},Object.entries(K).map(([Q,ie])=>{if(ie.count===0)return null;const De={취득세:"bg-orange-500/80 hover:bg-orange-500 border-orange-400/50",재산세:"bg-blue-500/80 hover:bg-blue-500 border-blue-400/50",기타세:"bg-purple-500/80 hover:bg-purple-500 border-purple-400/50"}[Q];return a.createElement("button",{key:Q,onClick:()=>E(c,v.filter(ue=>ue.category===Q),g,w),className:`w-full ${De} text-white text-xs px-2 py-1 rounded border transition-all duration-200 font-medium cursor-pointer hover:shadow-md`},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("span",{className:"text-[10px] opacity-90"},Q),a.createElement("span",{className:"font-mono text-[10px]"},ie.hasUndefined&&ie.amount===0?"미정":ie.hasUndefined&&ie.amount>0?`₩${C.formatKoreanCurrency(ie.amount)}+미정`:`₩${C.formatKoreanCurrency(ie.amount)}`)))}),w.length>0&&a.createElement(pe,{onClick:()=>E(c,[],g,w),variant:"ghost",size:"sm",className:"w-full bg-gray-500/10 hover:bg-gray-500/20 text-white text-xs border border-gray-400/50 font-medium cursor-pointer hover:shadow-md !p-2"},a.createElement("div",{className:"flex items-center justify-between w-full"},a.createElement("span",{className:"text-[10px] opacity-90"},"완료"),a.createElement("span",{className:"font-mono text-[10px]"},"₩",C.formatKoreanCurrency(w.reduce((Q,ie)=>Q+C.getAmount(ie.amount),0))))),g.length>0&&a.createElement(pe,{onClick:()=>E(c,v,g,w),variant:"ghost",size:"sm",className:"w-full bg-emerald-500/10 hover:bg-emerald-500/20 text-white text-xs border border-emerald-400/50 font-medium cursor-pointer hover:shadow-md !p-2"},a.createElement("div",{className:"text-center w-full"},a.createElement("span",{className:"text-[10px]"},"충전소 일정 ",g.length,"건")))))},Kg=({currentDate:c,koreaTimeUtils:f,getBillsForDate:p,getCompletedBillsForDate:v,getStationEventsForDate:w,handleDateClick:g,utils:E})=>{const C=()=>{const D=c.getFullYear(),U=c.getMonth(),K=new Date(D,U,1),Q=new Date(K);Q.setDate(Q.getDate()-K.getDay());const ie=[],De=new Date(Q);De.setDate(De.getDate()+42);for(let ue=new Date(Q);ue<De;ue.setDate(ue.getDate()+1)){const Z=new Date(ue.getFullYear(),ue.getMonth(),ue.getDate(),12,0,0);ie.push(Z)}return ie};return a.createElement("div",{className:"grid grid-cols-7 gap-2"},C().map((D,U)=>{const K=p(D),Q=v(D),ie=w(D);return a.createElement(Bg,{key:U,date:D,currentDate:c,koreaTimeUtils:f,dateBills:K,completedBills:Q,stationEvents:ie,handleDateClick:g,utils:E})}))},Vg=()=>a.createElement("div",{className:"flex justify-end mt-4"},a.createElement("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-lg p-3 border border-slate-600/50"},a.createElement("div",{className:"flex items-center space-x-4 text-xs"},a.createElement("div",{className:"flex items-center space-x-2"},a.createElement("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),a.createElement("span",{className:"text-gray-300"},"취득세")),a.createElement("div",{className:"flex items-center space-x-2"},a.createElement("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),a.createElement("span",{className:"text-gray-300"},"재산세")),a.createElement("div",{className:"flex items-center space-x-2"},a.createElement("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),a.createElement("span",{className:"text-gray-300"},"기타세")),a.createElement("div",{className:"flex items-center space-x-2"},a.createElement("div",{className:"w-2 h-2 bg-gray-500 rounded-full"}),a.createElement("span",{className:"text-gray-300"},"완료")),a.createElement("div",{className:"flex items-center space-x-2"},a.createElement("div",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),a.createElement("span",{className:"text-gray-300"},"충전소 일정"))))),Wg=({currentDate:c,setCurrentDate:f,bills:p,enhancedStations:v,koreaTimeUtils:w,utils:g,getBillsForDate:E,getStationEventsForDate:C,getCompletedBillsForDate:D,handleDateClick:U})=>a.createElement("div",{className:"w-full px-6 py-8"},a.createElement("div",{className:"mb-8"},a.createElement("h2",{className:"text-2xl font-bold text-gray-100 mb-2"},"캘린더")),a.createElement(zg,{currentDate:c,setCurrentDate:f,koreaTimeUtils:w}),a.createElement("div",{className:Be+" p-6"},a.createElement(Ug,null),a.createElement(Kg,{currentDate:c,koreaTimeUtils:w,getBillsForDate:E,getCompletedBillsForDate:D,getStationEventsForDate:C,handleDateClick:U,utils:g})),a.createElement(Vg,null)),Hg=({station:c,bills:f,onStationSelect:p,utils:v})=>a.createElement("tr",{className:"hover:bg-slate-700/30 transition-colors"},a.createElement("td",{className:"px-4 py-4 min-w-[180px]"},a.createElement("button",{onClick:()=>p(c),className:"font-semibold text-blue-400 hover:text-blue-300 transition-colors text-left max-w-[160px] truncate block",title:c.name},c.name)),a.createElement("td",{className:"px-4 py-4 text-center min-w-[100px]"},a.createElement("span",{className:"inline-flex items-center justify-center w-10 h-8 bg-blue-500/20 text-blue-300 rounded-lg text-sm font-medium whitespace-nowrap"},c.totalBills)),a.createElement("td",{className:"px-4 py-4 text-right min-w-[140px]"},a.createElement("div",{className:"font-mono text-emerald-300 font-medium whitespace-nowrap"},"₩",v.formatKoreanCurrency(f.filter(w=>w.stationName===c.name&&w.status==="completed").reduce((w,g)=>w+v.getAmount(g.amount),0)))),a.createElement("td",{className:"px-4 py-4 text-center min-w-[120px]"},a.createElement("span",{className:`text-sm whitespace-nowrap ${c.approvalDate?"text-blue-300 font-mono":"text-gray-500"}`},c.approvalDate||"미입력")),a.createElement("td",{className:"px-4 py-4 text-center min-w-[140px]"},a.createElement("span",{className:`text-sm whitespace-nowrap ${c.safetyCheckDate?"text-blue-300 font-mono":"text-gray-500"}`},c.safetyCheckDate||"미입력")),a.createElement("td",{className:"px-4 py-4 text-center min-w-[100px]"},a.createElement("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border whitespace-nowrap ${c.status==="operating"?"bg-emerald-500/20 text-emerald-300 border-emerald-500/30":c.status==="preparing"?"bg-amber-500/20 text-amber-300 border-amber-500/30":"bg-gray-500/20 text-gray-300 border-gray-500/30"}`},a.createElement("div",{className:`w-2 h-2 rounded-full mr-1 flex-shrink-0 ${c.status==="operating"?"bg-emerald-500 animate-pulse":c.status==="preparing"?"bg-amber-500":"bg-gray-500"}`}),a.createElement("span",{className:"truncate"},c.status==="operating"?"운영 중":c.status==="preparing"?"오픈 예정":"운영 종료")))),Gg=({currentPage:c,totalPages:f,onPageChange:p,filteredCount:v,totalCount:w,itemsPerPage:g})=>{if(f<=1)return null;const E=(c-1)*g,C=Math.min(E+g,v);return a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",{className:"text-sm text-gray-400"},v>0&&a.createElement(a.Fragment,null,E+1,"-",C," / ",v,"개 표시",v!==w&&` (전체 ${w}개 중)`)),a.createElement("div",{className:"flex items-center space-x-2"},a.createElement("button",{onClick:()=>p(1),disabled:c===1,className:"px-3 py-1 text-sm bg-slate-600/50 text-gray-300 rounded-lg hover:bg-slate-500/50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},"처음"),a.createElement("button",{onClick:()=>p(Math.max(c-1,1)),disabled:c===1,className:"px-3 py-1 text-sm bg-slate-600/50 text-gray-300 rounded-lg hover:bg-slate-500/50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},"이전"),a.createElement("div",{className:"flex items-center space-x-1"},Array.from({length:Math.min(5,f)},(D,U)=>{let K;return f<=5||c<=3?K=U+1:c>=f-2?K=f-4+U:K=c-2+U,a.createElement("button",{key:K,onClick:()=>p(K),className:`w-8 h-8 text-sm rounded-lg transition-colors ${c===K?"bg-blue-600 text-white":"bg-slate-600/50 text-gray-300 hover:bg-slate-500/50"}`},K)})),a.createElement("button",{onClick:()=>p(Math.min(c+1,f)),disabled:c===f,className:"px-3 py-1 text-sm bg-slate-600/50 text-gray-300 rounded-lg hover:bg-slate-500/50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},"다음"),a.createElement("button",{onClick:()=>p(f),disabled:c===f,className:"px-3 py-1 text-sm bg-slate-600/50 text-gray-300 rounded-lg hover:bg-slate-500/50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},"마지막")))},qg=({hasFilters:c,isViewerOnly:f,onAddStation:p})=>a.createElement("div",{className:"text-center py-12"},a.createElement("div",{className:"text-gray-400 mb-4"},c?"검색 조건에 맞는 충전소가 없습니다":"등록된 충전소가 없습니다"),!c&&!f&&a.createElement(pe,{onClick:p,variant:"primary",size:"md"},"첫 충전소 추가하기")),Yg=()=>{const c=w=>{wn(w),Vn(!0)},f=()=>{try{if(oe.length===0){W("다운로드할 충전소 데이터가 없습니다.");return}const w=va.formatStationsForExcel(oe,y),E=`충전소현황_${G.getKoreaToday().replace(/-/g,"")}.csv`;va.downloadCSVInstant(w,E),te("CSV 파일 다운로드가 시작되었습니다.")}catch(w){W(w.message||"CSV 다운로드에 실패했습니다.")}},p=()=>{Qt(!0),ur(null),nt({name:"",address:"",status:"operating",approvalDate:"",safetyCheckDate:"",registeredDate:G.getKoreaToday()})},v=Y.search||Y.status!=="all";return a.createElement("div",{className:"w-full px-6 py-8"},a.createElement("div",{className:"mb-8"},a.createElement("h2",{className:"text-2xl font-bold text-gray-100 mb-2"},"충전소 관리")),a.createElement(_E,{filters:Y,onFiltersChange:X,onReset:()=>{ke(),ai(1)},isMobile:L,showMobileFilters:cd,setShowMobileFilters:ud}),Qa.length===0?a.createElement(qg,{hasFilters:v,isViewerOnly:ye,onAddStation:p}):a.createElement(a.Fragment,null,a.createElement("div",{className:Be+" overflow-hidden"},a.createElement("div",{className:"border border-slate-600/50 rounded-lg mx-4 my-4 overflow-hidden"},a.createElement("div",{className:"overflow-x-auto custom-scrollbar"},a.createElement("table",{className:"w-full min-w-[1000px] bg-slate-800/30"},a.createElement("thead",{className:"bg-slate-700/70 border-b border-slate-600/50"},a.createElement("tr",null,a.createElement("th",{className:"px-4 py-4 text-left text-sm font-medium text-gray-300 min-w-[180px] whitespace-nowrap"},"충전소명"),a.createElement("th",{className:"px-4 py-4 text-center text-sm font-medium text-gray-300 min-w-[100px] whitespace-nowrap"},"납부 완료 건수"),a.createElement("th",{className:"px-4 py-4 text-right text-sm font-medium text-gray-300 min-w-[140px] whitespace-nowrap"},"총 납부 금액"),a.createElement("th",{className:"px-4 py-4 text-center text-sm font-medium text-gray-300 min-w-[120px] whitespace-nowrap"},"사용 승인일"),a.createElement("th",{className:"px-4 py-4 text-center text-sm font-medium text-gray-300 min-w-[140px] whitespace-nowrap"},"전기 안전 점검일"),a.createElement("th",{className:"px-4 py-4 text-center text-sm font-medium text-gray-300 min-w-[100px] whitespace-nowrap"},"상태"))),a.createElement("tbody",{className:"divide-y divide-slate-600/30"},cg.map((w,g)=>a.createElement(Hg,{key:w.name||g,station:w,bills:y,onStationSelect:c,utils:V})))))),a.createElement("div",{className:"px-6 py-4 bg-slate-700/30 border-t border-slate-600/50"},a.createElement(Gg,{currentPage:ni,totalPages:ug,onPageChange:ai,filteredCount:Qa.length,totalCount:oe.length,itemsPerPage:Ka}))),a.createElement("div",{className:"flex justify-end items-center space-x-3 mt-4"},a.createElement(pe,{onClick:f,variant:"secondary",size:"sm",icon:w=>a.createElement("svg",{...w,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}))},"CSV 다운로드"),!ye&&a.createElement(a.Fragment,null,a.createElement(pe,{onClick:()=>document.getElementById("station-csv-upload").click(),variant:"accent",size:"sm",icon:qi},"CSV 일괄등록",a.createElement("input",{id:"station-csv-upload",type:"file",accept:".csv",onChange:w=>kg(w.target.files),className:"hidden"})),a.createElement(pe,{onClick:p,variant:"primary",size:"sm",icon:Nn},"충전소 추가")))))};if(k.useEffect(()=>{t?Re==="login"&&qe("dashboard"):qe("login")},[t,Re]),!t)return a.createElement("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-slate-800 flex items-center justify-center p-4"},a.createElement("style",null,$f),a.createElement("div",{className:"w-full max-w-md"},a.createElement("div",{className:"text-center mb-8"},a.createElement("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent mb-2"},"Water TT"),a.createElement("p",{className:"text-gray-400 text-sm"},"세금 관리 시스템")),a.createElement("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-700/30 backdrop-blur-md rounded-2xl p-8 border border-slate-600/30 shadow-2xl"},u?a.createElement(a.Fragment,null,a.createElement("h2",{className:"text-xl font-semibold text-gray-100 mb-6 text-center"},"패스워드 찾기"),x?a.createElement(a.Fragment,null,a.createElement("div",{className:"bg-emerald-900/20 border border-emerald-500/30 rounded-xl p-4 mb-6"},a.createElement("div",{className:"flex items-center"},a.createElement(fe,{className:"w-5 h-5 text-emerald-300 mr-2"}),a.createElement("p",{className:"text-emerald-200 text-sm"},a.createElement("strong",null,m),"로",a.createElement("br",null),"임시 패스워드를 전송했습니다."))),a.createElement("div",{className:"text-sm text-gray-400 mb-6"},"• 이메일을 확인해주세요",a.createElement("br",null),"• 임시 패스워드로 로그인 후 패스워드를 변경하세요",a.createElement("br",null),"• 이메일이 오지 않으면 스팸함을 확인해주세요")):a.createElement(a.Fragment,null,a.createElement("div",{className:"space-y-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"아이디"),a.createElement("input",{type:"email",value:m,onChange:c=>h(c.target.value),onKeyPress:c=>c.key==="Enter"&&$d(),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm",placeholder:"이메일을 입력하세요"})),a.createElement("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-xl p-3"},a.createElement("p",{className:"text-blue-200 text-sm"},m&&m.trim()?"입력하신 아이디로 임시 패스워드를 보내드립니다.":"아이디 입력 후 패스워드 전송을 눌러주세요."))),a.createElement("button",{onClick:$d,disabled:!m||!m.trim()||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m),className:"w-full mt-6 px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-xl hover:from-blue-500 hover:to-blue-400 transition-all duration-200 font-medium shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"},"패스워드 전송")),a.createElement("button",{onClick:()=>{d(!1),h(""),_(!1)},className:"w-full px-4 py-3 border border-slate-600/50 rounded-xl text-gray-300 hover:bg-slate-700/30 transition-all duration-200 font-medium"},"로그인으로 돌아가기")):a.createElement(a.Fragment,null,a.createElement("h2",{className:"text-xl font-semibold text-gray-100 mb-6 text-center"},"로그인"),a.createElement("div",{className:"space-y-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"아이디"),a.createElement("input",{type:"email",value:s.email,onChange:c=>l({...s,email:c.target.value}),onKeyPress:c=>c.key==="Enter"&&xi(),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm",placeholder:"이메일을 입력하세요",disabled:o})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"패스워드"),a.createElement("input",{type:"password",value:s.password,onChange:c=>l({...s,password:c.target.value}),onKeyPress:c=>c.key==="Enter"&&xi(),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm",placeholder:"••••••••",disabled:o})),S&&a.createElement("div",{className:"bg-red-900/20 border border-red-500/30 rounded-xl p-3"},a.createElement("p",{className:"text-red-200 text-sm"},S))),a.createElement("button",{onClick:xi,disabled:o||!s.email||!s.password,className:"w-full mt-6 px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-xl hover:from-blue-500 hover:to-blue-400 transition-all duration-200 font-medium shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"},o?a.createElement(a.Fragment,null,a.createElement("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent mr-2"}),"로그인 중..."):"로그인"),a.createElement("div",{className:"mt-4 text-center"},a.createElement("button",{onClick:()=>d(!0),className:"text-sm text-gray-400 hover:text-gray-200 transition-colors"},"패스워드를 잊으셨나요?"))))));const fr={config:{super_admin:{label:"시스템 최고 관리자",shortLabel:"슈퍼 관리자",bgColor:"bg-gradient-to-br from-purple-600 to-purple-500",badgeColor:"bg-purple-500/20 text-purple-300 border-purple-500/30",textColor:"text-purple-300"},admin:{label:"관리자",shortLabel:"관리자",bgColor:"bg-gradient-to-br from-red-600 to-red-500",badgeColor:"bg-red-500/20 text-red-300 border-red-500/30",textColor:"text-red-300"},editor:{label:"편집자",shortLabel:"편집자",bgColor:"bg-gradient-to-br from-blue-600 to-blue-500",badgeColor:"bg-blue-500/20 text-blue-300 border-blue-500/30",textColor:"text-blue-300"},viewer:{label:"뷰어",shortLabel:"뷰어",bgColor:"bg-gradient-to-br from-gray-600 to-gray-500",badgeColor:"bg-gray-500/20 text-gray-300 border-gray-500/30",textColor:"text-gray-300"}},getRoleConfig:c=>fr.config[c]||fr.config.viewer,getRoleBadgeClass:c=>`text-xs px-2 py-1 rounded font-medium border ${fr.getRoleConfig(c).badgeColor}`,getAvatarClass:(c,f="md")=>`${{sm:"w-8 h-8",md:"w-10 h-10",lg:"w-16 h-16"}[f]} rounded-lg flex items-center justify-center ${fr.getRoleConfig(c).bgColor}`},jd=({type:c,accountId:f,isChecked:p,onChange:v,icon:w,label:g,color:E})=>a.createElement("label",{className:"flex items-center space-x-2 cursor-pointer"},a.createElement("input",{type:"checkbox",checked:p,onChange:v,className:`w-4 h-4 bg-slate-700 border-slate-600 rounded focus:ring-2 focus:ring-${E}-500`,style:{accentColor:`var(--${E}-600)`}}),a.createElement("div",{className:"flex items-center space-x-1"},a.createElement(w,{className:`w-3 h-3 text-${E}-400`}),a.createElement("span",{className:`text-xs text-${E}-300`},g))),Qg=({account:c,onEdit:f,onDelete:p,notificationAssignments:v,onNotificationChange:w,canManage:g=!0})=>{const E=fr.getRoleConfig(c.role);return a.createElement("div",{className:"bg-slate-700/30 rounded-xl p-4 border border-slate-600/30 hover:bg-slate-600/20 transition-colors"},a.createElement("div",{className:"flex items-start justify-between mb-3"},a.createElement("div",{className:"flex items-center space-x-3"},a.createElement("div",{className:fr.getAvatarClass(c.role)},a.createElement(Vr,{className:"w-5 h-5 text-white"})),a.createElement("div",null,a.createElement("div",{className:"font-medium text-gray-100"},c.name),a.createElement("div",{className:"text-sm text-gray-400 font-mono"},c.email),a.createElement("div",{className:"flex items-center space-x-2 mt-1"},a.createElement("span",{className:fr.getRoleBadgeClass(c.role)},E.shortLabel),a.createElement("span",{className:`text-xs px-2 py-1 rounded font-medium border ${c.status==="active"?"bg-emerald-500/20 text-emerald-300 border-emerald-500/30":"bg-gray-500/20 text-gray-300 border-gray-500/30"}`},c.status==="active"?"활성":"비활성"),a.createElement("span",{className:"text-xs text-gray-500"},c.createdAt)))),a.createElement("div",{className:"flex items-center space-x-2"},c.role==="super_admin"?a.createElement("span",{className:"text-xs text-purple-400 font-medium"},"시스템 최고 관리자"):g?a.createElement(a.Fragment,null,a.createElement(pe,{onClick:()=>f(c),variant:"secondary",size:"sm"},"수정"),a.createElement(pe,{onClick:()=>p(c),variant:"outline",size:"sm",className:"!text-red-300 !border-red-500/30 hover:!bg-red-600/20"},"삭제")):null)),a.createElement("div",{className:"border-t border-slate-600/30 pt-4"},a.createElement("div",{className:"flex items-center justify-between mb-2"},a.createElement("div",{className:"text-sm font-medium text-gray-300"},"알림 설정"),a.createElement("div",{className:"flex items-center space-x-4"},a.createElement(jd,{type:"tax_alerts",accountId:c.id,isChecked:v.tax_alerts.includes(c.id),onChange:C=>w("tax_alerts",c.id,C.target.checked),icon:Qe,label:"세금",color:"orange"}),a.createElement(jd,{type:"station_alerts",accountId:c.id,isChecked:v.station_alerts.includes(c.id),onChange:C=>w("station_alerts",c.id,C.target.checked),icon:Wr,label:"충전소",color:"blue"})))))},Jg=({currentPage:c,totalPages:f,totalAccounts:p,activeAccounts:v,itemsPerPage:w,onPageChange:g})=>f<=1?null:a.createElement("div",{className:"flex items-center justify-center space-x-2 mb-4"},a.createElement("button",{onClick:()=>g(1),disabled:c===1,className:"px-3 py-1 text-sm bg-slate-600/50 text-gray-300 rounded-lg hover:bg-slate-500/50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},"처음"),a.createElement("button",{onClick:()=>g(E=>Math.max(E-1,1)),disabled:c===1,className:"px-3 py-1 text-sm bg-slate-600/50 text-gray-300 rounded-lg hover:bg-slate-500/50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},"이전"),a.createElement("div",{className:"flex items-center space-x-1"},Array.from({length:Math.min(5,f)},(E,C)=>{let D;return f<=5||c<=3?D=C+1:c>=f-2?D=f-4+C:D=c-2+C,a.createElement("button",{key:D,onClick:()=>g(D),className:`w-8 h-8 text-sm rounded-lg transition-colors ${c===D?"bg-blue-600 text-white":"bg-slate-600/50 text-gray-300 hover:bg-slate-500/50"}`},D)})),a.createElement("button",{onClick:()=>g(E=>Math.min(E+1,f)),disabled:c===f,className:"px-3 py-1 text-sm bg-slate-600/50 text-gray-300 rounded-lg hover:bg-slate-500/50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},"다음"),a.createElement("button",{onClick:()=>g(f),disabled:c===f,className:"px-3 py-1 text-sm bg-slate-600/50 text-gray-300 rounded-lg hover:bg-slate-500/50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},"마지막")),Xg=({currentPage:c,totalPages:f,totalAccounts:p,activeAccounts:v,itemsPerPage:w,taxAlertsCount:g,stationAlertsCount:E})=>{const C=(c-1)*w,D=Math.min(C+w,p);return a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",{className:"text-sm text-gray-400"},C+1,"-",D," / ",p,"개 계정",f>1&&` (${c}/${f} 페이지)`," • 활성 ",v,"개"),a.createElement("div",{className:"flex items-center space-x-6"},a.createElement("div",{className:"text-sm text-gray-400"},a.createElement("span",{className:"text-orange-300 font-medium"},g)," 세금 알림"),a.createElement("div",{className:"text-sm text-gray-400"},a.createElement("span",{className:"text-blue-300 font-medium"},E)," 충전소 알림")))},Zg=({accounts:c,notificationAssignments:f,accountsPage:p,accountsPerPage:v,canManageAccounts:w,onPageChange:g,onNotificationChange:E,onEditAccount:C,onDeleteAccount:D,onCreateAccount:U})=>{const K=(p-1)*v,Q=K+v,ie=c.slice(K,Q),De=Math.ceil(c.length/v),ue=c.filter(Z=>Z.status==="active").length;return a.createElement("div",{className:Be+" overflow-hidden mb-6"},a.createElement("div",{className:"p-6 border-b border-slate-600/30"},a.createElement("div",{className:"flex items-center justify-between"},a.createElement("h3",{className:"text-lg font-semibold text-gray-100"},"사용자 계정 및 알림 설정"),w&&a.createElement("button",{onClick:U,className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-lg hover:from-blue-500 hover:to-blue-400 transition-all duration-200 font-medium shadow-lg"},a.createElement(Nn,{className:"w-4 h-4 mr-2"}),"계정 생성")),!w&&a.createElement("p",{className:"text-xs text-gray-500 mt-2"},"계정 관리 권한이 없습니다")),a.createElement("div",{className:"p-6"},a.createElement("div",{className:"space-y-4 mb-6"},ie.map(Z=>a.createElement(Qg,{key:Z.id,account:Z,onEdit:C,onDelete:D,notificationAssignments:f,onNotificationChange:E,canManage:w}))),a.createElement(Jg,{currentPage:p,totalPages:De,totalAccounts:c.length,activeAccounts:ue,itemsPerPage:v,onPageChange:g})),a.createElement("div",{className:"px-6 py-4 bg-slate-700/30 border-t border-slate-600/50"},a.createElement(Xg,{currentPage:p,totalPages:De,totalAccounts:c.length,activeAccounts:ue,itemsPerPage:v,taxAlertsCount:f.tax_alerts.length,stationAlertsCount:f.station_alerts.length})))},Rd=({currentUser:c,canManageAccounts:f})=>[{id:"kanban",label:"세금 현황",icon:fe},{id:"calendar",label:"캘린더",icon:no},{id:"stations",label:"충전소 관리",icon:Wr},...f?[{id:"accounts",label:"계정 관리",icon:mf}]:[],...(c==null?void 0:c.role)==="super_admin"?[{id:"api-settings",label:"API 설정",icon:xE}]:[]],Id=({isViewerOnly:c,unreadNotificationCount:f,onReminderClick:p,onTrashClick:v,trash:w,isMobile:g=!1})=>{if(c)return null;const E=[{id:"reminder",icon:Ll,label:"리마인더",onClick:p,badge:f>0?f:null},{id:"trash",icon:Fl,label:"휴지통",onClick:v,badge:w.length>0?w.length:null,iconColor:w.length>0?"text-red-400":"text-gray-400"}];return a.createElement("div",{className:"space-y-3"},E.map(C=>{const D=C.icon;return C.isFileUpload?a.createElement("label",{key:C.id,className:"w-full flex items-center px-4 py-3 text-gray-300 hover:text-white hover:bg-slate-700/50 rounded-xl transition-all duration-200 cursor-pointer"},a.createElement(D,{className:"w-4 h-4 mr-3"}),a.createElement("span",{className:"text-sm"},C.label),a.createElement("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png,.webp",onChange:U=>C.onFileChange(U.target.files),className:"hidden"})):a.createElement("button",{key:C.id,onClick:C.onClick,className:"w-full flex items-center px-4 py-3 text-gray-300 hover:text-white hover:bg-slate-700/50 rounded-xl transition-all duration-200 relative"},a.createElement(D,{className:`w-4 h-4 mr-3 ${C.iconColor||""}`}),a.createElement("span",{className:"text-sm"},C.label),C.badge&&a.createElement("span",{className:"ml-auto bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium"},C.badge))}))},ey=({isViewerOnly:c,unreadNotificationCount:f,onReminderClick:p,onTrashClick:v,trash:w})=>{if(c)return null;const g=[{id:"reminder",icon:Ll,title:"리마인더",onClick:p,hasBadge:f>0},{id:"trash",icon:Fl,title:"휴지통",onClick:v,hasBadge:w.length>0,iconColor:w.length>0?"text-red-400":"text-gray-400"}];return a.createElement(a.Fragment,null,g.map(E=>{const C=E.icon;return E.isFileUpload?a.createElement("label",{key:E.id,className:"w-12 h-12 flex items-center justify-center text-gray-300 hover:text-white hover:bg-slate-700/50 rounded-xl transition-all duration-200 cursor-pointer",title:E.title},a.createElement(C,{className:"w-5 h-5"}),a.createElement("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:D=>E.onFileChange(D.target.files),className:"hidden"})):a.createElement("button",{key:E.id,onClick:E.onClick,className:"w-12 h-12 flex items-center justify-center text-gray-300 hover:text-white hover:bg-slate-700/50 rounded-xl transition-all duration-200 relative",title:E.title},a.createElement(C,{className:`w-5 h-5 ${E.iconColor||""}`}),E.hasBadge&&a.createElement("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse"}))}))},ty=({isCollapsed:c,currentView:f,setCurrentView:p,currentUser:v,canManageAccounts:w,isViewerOnly:g,unreadNotificationCount:E,trash:C,onProfileClick:D,onReminderClick:U,onAddBillClick:K,onAddStationClick:Q,onFileUpload:ie,onTrashClick:De})=>{const ue=Rd({currentUser:v,canManageAccounts:w});return c?a.createElement("div",{className:"flex flex-col items-center space-y-2"},ue.map(Z=>{const ct=Z.icon;return a.createElement("button",{key:Z.id,onClick:()=>p(Z.id),className:`w-12 h-12 flex items-center justify-center rounded-xl transition-all duration-200 ${f===Z.id?"bg-blue-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-slate-700/50"}`,title:Z.label},a.createElement(ct,{className:"w-5 h-5"}))}),a.createElement("div",{className:"w-8 my-4 border-t border-slate-600/30"}),a.createElement(ey,{isViewerOnly:g,unreadNotificationCount:E,onReminderClick:U,onTrashClick:De,trash:C}),a.createElement("button",{onClick:D,className:"w-12 h-12 flex items-center justify-center text-gray-200 hover:text-white hover:bg-slate-600/50 rounded-xl transition-all duration-200 mt-4",title:"내 정보"},a.createElement(Vr,{className:"w-5 h-5"}))):a.createElement(a.Fragment,null,a.createElement("nav",{className:"space-y-2"},ue.map(Z=>{const ct=Z.icon;return a.createElement("button",{key:Z.id,onClick:()=>p(Z.id),className:`w-full flex items-center px-4 py-3 rounded-xl text-left transition-all duration-200 ${f===Z.id?"bg-blue-500 text-white shadow-lg shadow-blue-500/25":"text-gray-200 hover:text-white hover:bg-slate-600/50"}`},a.createElement(ct,{className:"w-5 h-5 mr-3"}),Z.label)})),!g&&a.createElement("div",{className:"my-6 border-t border-slate-600/30"}),a.createElement(Id,{isViewerOnly:g,unreadNotificationCount:E,onReminderClick:U,onAddBillClick:K,onAddStationClick:Q,onFileUpload:ie,onTrashClick:De,trash:C}),a.createElement("div",{className:g?"mt-6 pt-6 border-t border-slate-600/30":"mt-4 pt-4 border-t border-slate-600/30"},a.createElement("button",{onClick:D,className:"w-full flex items-center px-4 py-3 text-gray-200 hover:text-white hover:bg-slate-600/50 rounded-xl transition-all duration-200"},a.createElement(Vr,{className:"w-4 h-4 mr-3"}),a.createElement("span",{className:"text-sm"},"내 정보"))))};return a.createElement("div",{className:"h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-slate-800 flex flex-col"},a.createElement("style",null,$f),ne&&a.createElement("div",{className:"flex items-center justify-between p-4 bg-slate-800/50 border-b border-slate-700/50 lg:hidden"},a.createElement("button",{onClick:()=>vn(!0),className:"p-2 hover:bg-slate-700/50 rounded-lg transition-colors text-gray-400 hover:text-gray-200"},a.createElement(Kx,{className:"w-6 h-6"})),a.createElement("h1",{className:"text-xl font-semibold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>qe("dashboard"),title:"통계 화면으로 이동"},"water tt"),a.createElement("div",{className:"w-10"})," "),a.createElement("div",{className:"flex flex-1 overflow-hidden"},Ne&&a.createElement("div",{className:`${yn?"w-16":"w-64"} bg-gradient-to-b from-slate-700/80 to-slate-800/80 backdrop-blur-xl border-r border-slate-600/50 transition-all duration-300 flex flex-col flex-shrink-0 shadow-xl`},a.createElement("div",{className:"flex items-center px-4 py-3 border-b border-slate-600/50 bg-slate-600/20"},a.createElement("button",{onClick:()=>Xo(!yn),onMouseEnter:()=>id(!0),onMouseLeave:()=>id(!1),className:"p-1.5 hover:bg-slate-600/50 rounded-md transition-colors text-gray-300 hover:text-gray-100 flex-shrink-0",title:yn?"사이드바 확대":"사이드바 축소"},vp?yn?a.createElement(rd,{className:"w-4 h-4"}):a.createElement(td,{className:"w-4 h-4"}):a.createElement(Wx,{className:"w-4 h-4"})),!yn&&a.createElement("h1",{className:"text-2xl font-semibold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent ml-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>qe("dashboard"),title:"통계 화면으로 이동"},"water tt")),a.createElement("div",{className:"flex-1 p-4"},a.createElement(ty,{isCollapsed:yn,currentView:Re,setCurrentView:qe,currentUser:q,canManageAccounts:Ya,isViewerOnly:ye,unreadNotificationCount:Qn,trash:we,onProfileClick:()=>cl(!0),onReminderClick:()=>Wa(!0),onTrashClick:()=>il(!0)}))),yp&&a.createElement("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 lg:hidden"},a.createElement("div",{className:"absolute inset-0",onClick:()=>vn(!1)}),a.createElement("div",{className:"absolute left-0 top-0 h-full w-80 bg-gradient-to-b from-slate-800 to-slate-900 shadow-2xl border-r border-slate-700/50 flex flex-col animate-slide-in-left"},a.createElement("div",{className:"flex items-center justify-between p-4 border-b border-slate-600/50 bg-slate-600/20"},a.createElement("h1",{className:"text-xl font-semibold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent"},"water tt"),a.createElement("button",{onClick:()=>vn(!1),className:"p-2 hover:bg-slate-600/50 rounded-lg transition-colors text-gray-300 hover:text-gray-100"},a.createElement(ms,{className:"w-5 h-5"}))),a.createElement("div",{className:"flex-1 p-4"},a.createElement("nav",{className:"space-y-2"},Rd({currentUser:q,canManageAccounts:Ya}).map(c=>{const f=c.icon;return a.createElement("button",{key:c.id,onClick:()=>{qe(c.id),vn(!1)},className:`w-full flex items-center px-4 py-3 rounded-xl text-left transition-all duration-200 ${Re===c.id?"bg-blue-500 text-white shadow-lg shadow-blue-500/25":"text-gray-200 hover:text-white hover:bg-slate-600/50"}`},a.createElement(f,{className:"w-5 h-5 mr-3"}),c.label)})),!ye&&a.createElement("div",{className:"my-6 border-t border-slate-600/30"}),a.createElement(Id,{isViewerOnly:ye,unreadNotificationCount:Qn,onReminderClick:()=>{Wa(!0),vn(!1)},onTrashClick:()=>{il(!0),vn(!1)},trash:we,isMobile:!0}),a.createElement("div",{className:ye?"mt-6 pt-6 border-t border-slate-600/30":"mt-4 pt-4 border-t border-slate-600/30"},a.createElement("button",{onClick:()=>{cl(!0),vn(!1)},className:"w-full flex items-center px-4 py-3 text-gray-300 hover:text-white hover:bg-slate-700/50 rounded-xl transition-all duration-200"},a.createElement(Vr,{className:"w-4 h-4 mr-3"}),a.createElement("span",{className:"text-sm"},"내 정보")))))),a.createElement("div",{className:"flex-1 overflow-auto"},Re==="dashboard"&&Fg(),Re==="kanban"&&a.createElement("div",{className:"w-full px-6 py-8"},a.createElement("div",{className:"mb-8"},a.createElement("h2",{className:"text-2xl font-bold text-gray-100 mb-2"},"세금 현황")),a.createElement(kE,{globalFilters:Ze,setGlobalFilters:Nr,resetFilters:z,setVisibleCounts:Cp,isMobile:L,showMobileFilters:cd,setShowMobileFilters:ud}),a.createElement(Mg,{getBillsByStatus:Jn,updateBillStatus:T,handleBillClick:Pd,isViewerOnly:ye,kanbanPages:Dp,setKanbanPages:Tp}),a.createElement("div",{className:Be+" p-4 mb-6"},(()=>{const c=["accounting_review","pending","completed"].flatMap(g=>Jn(g)),f=c.filter(g=>g.category==="취득세").reduce((g,E)=>g+V.getAmount(E.amount),0),p=c.filter(g=>g.category==="재산세").reduce((g,E)=>g+V.getAmount(E.amount),0),v=c.filter(g=>g.category==="기타세").reduce((g,E)=>g+V.getAmount(E.amount),0),w=f+p+v;return a.createElement("div",{className:"space-y-2"},a.createElement("div",{className:"flex items-center justify-between text-sm"},a.createElement("div",{className:"flex items-center space-x-2"},a.createElement("div",{className:"w-3 h-3 bg-slate-500 rounded-full"}),a.createElement("span",{className:"text-slate-300 font-medium"},"취득세"),a.createElement("span",{className:"text-gray-400"},"(",c.filter(g=>g.category==="취득세").length,"건)")),a.createElement("span",{className:"text-gray-200 font-mono"},"₩",V.formatKoreanCurrency(f))),a.createElement("div",{className:"flex items-center justify-between text-sm"},a.createElement("div",{className:"flex items-center space-x-2"},a.createElement("div",{className:"w-3 h-3 bg-slate-600 rounded-full"}),a.createElement("span",{className:"text-slate-300 font-medium"},"재산세"),a.createElement("span",{className:"text-gray-400"},"(",c.filter(g=>g.category==="재산세").length,"건)")),a.createElement("span",{className:"text-gray-200 font-mono"},"₩",V.formatKoreanCurrency(p))),a.createElement("div",{className:"flex items-center justify-between text-sm"},a.createElement("div",{className:"flex items-center space-x-2"},a.createElement("div",{className:"w-3 h-3 bg-slate-400 rounded-full"}),a.createElement("span",{className:"text-slate-300 font-medium"},"기타세"),a.createElement("span",{className:"text-gray-400"},"(",c.filter(g=>g.category==="기타세").length,"건)")),a.createElement("span",{className:"text-gray-200 font-mono"},"₩",V.formatKoreanCurrency(v))),a.createElement("div",{className:"border-t border-slate-600/30 pt-2 mt-3"},a.createElement("div",{className:"flex items-center justify-between text-sm"},a.createElement("span",{className:"text-gray-200 font-semibold"},"전체 합계"),a.createElement("span",{className:"text-slate-200 font-bold font-mono"},"₩",V.formatKoreanCurrency(w)))))})()),a.createElement("div",{className:"flex justify-end items-center space-x-3"},a.createElement(pe,{onClick:()=>{try{const c=["accounting_review","pending","completed"].flatMap(w=>Jn(w));if(c.length===0){W("다운로드할 데이터가 없습니다.");return}const f=va.formatBillsForExcel(c,oe),v=`세금현황_${G.getKoreaToday().replace(/-/g,"")}.csv`;va.downloadCSVInstant(f,v),te("CSV 파일 다운로드가 시작되었습니다.")}catch(c){W(c.message||"CSV 다운로드에 실패했습니다.")}},variant:"secondary",size:"sm",icon:c=>a.createElement("svg",{...c,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}))},"CSV 다운로드"),!ye&&a.createElement(a.Fragment,null,a.createElement(pe,{onClick:()=>document.getElementById("tax-csv-upload").click(),variant:"secondary",size:"sm",icon:qi},"CSV 일괄등록",a.createElement("input",{id:"tax-csv-upload",type:"file",accept:".csv",onChange:c=>_g(c.target.files),className:"hidden"})),a.createElement(pe,{onClick:()=>document.getElementById("tax-file-upload").click(),variant:"accent",size:"sm",icon:qi},"고지서 업로드",a.createElement("input",{id:"tax-file-upload",type:"file",accept:".pdf,.jpg,.jpeg,.png,.webp",onChange:c=>wi(c.target.files),className:"hidden"})),a.createElement(pe,{onClick:()=>{xn(!0),Yn(null),rt({name:"",amount:"",dueDate:"",category:"",stationName:"",address:"",isRecurring:!1}),Dr(""),ze(!1)},variant:"primary",size:"sm",icon:Nn},"세금 추가")))),Re==="calendar"&&a.createElement(Wg,{currentDate:_p,setCurrentDate:Sp,bills:y,enhancedStations:oe,koreaTimeUtils:G,utils:V,getBillsForDate:mg,getStationEventsForDate:fg,getCompletedBillsForDate:hg,handleDateClick:Dg}),Re==="stations"&&!bd&&Yg(),Re==="stations"&&bd&&a.createElement("div",{className:"w-full px-6 py-8"},a.createElement("div",{className:"mb-8"},a.createElement("h2",{className:"text-2xl font-bold text-gray-100"},"충전소 상세 정보")),a.createElement("div",{className:"space-y-8"},a.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8"},a.createElement("div",{className:`${Be} p-6`},a.createElement("h3",{className:"text-lg font-semibold text-gray-100 flex items-center mb-6"},a.createElement(Ux,{className:"w-5 h-5 mr-3 text-blue-400"}),"기본 정보"),a.createElement("div",{className:"space-y-5"},a.createElement("div",null,a.createElement("label",{className:"text-sm font-medium text-gray-400 block mb-2"},"충전소명"),ye?a.createElement("div",{className:"text-gray-100 font-medium"},R==null?void 0:R.name):a.createElement("input",{type:"text",value:ee.name||(R==null?void 0:R.name)||"",onChange:c=>Jt({...ee,name:c.target.value}),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-lg text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500/50"})),a.createElement("div",null,a.createElement("label",{className:"text-sm font-medium text-gray-400 block mb-2"},"주소"),ye?a.createElement("div",{className:"text-gray-100 leading-relaxed"},R==null?void 0:R.address):a.createElement("input",{type:"text",value:ee.address||(R==null?void 0:R.address)||"",onChange:c=>Jt({...ee,address:c.target.value}),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-lg text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500/50"})),a.createElement("div",null,a.createElement("label",{className:"text-sm font-medium text-gray-400 block mb-2"},"운영 상태"),ye?a.createElement("span",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium border ${(R==null?void 0:R.status)==="operating"?"bg-emerald-500/20 text-emerald-300 border-emerald-500/30":(R==null?void 0:R.status)==="preparing"?"bg-amber-500/20 text-amber-300 border-amber-500/30":"bg-gray-500/20 text-gray-300 border-gray-500/30"}`},a.createElement("div",{className:`w-2 h-2 rounded-full mr-2 ${(R==null?void 0:R.status)==="operating"?"bg-emerald-500 animate-pulse":(R==null?void 0:R.status)==="preparing"?"bg-amber-500":"bg-gray-500"}`}),(R==null?void 0:R.status)==="operating"?"운영 중":(R==null?void 0:R.status)==="preparing"?"오픈 예정":"운영 종료"):a.createElement("select",{value:ee.status||(R==null?void 0:R.status)||"operating",onChange:c=>Jt({...ee,status:c.target.value}),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-lg text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500/50"},a.createElement("option",{value:"preparing"},"오픈 예정"),a.createElement("option",{value:"operating"},"운영 중"),a.createElement("option",{value:"closed"},"운영 종료"))),a.createElement("div",{className:"space-y-5"},a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5"},a.createElement("div",null,a.createElement("label",{className:"text-sm font-medium text-gray-400 block mb-2"},"사용 승인일"),ye?a.createElement("div",{className:`${R!=null&&R.approvalDate?"text-blue-300 font-mono":"text-gray-500"}`},(R==null?void 0:R.approvalDate)||"미입력"):a.createElement("input",{type:"date",value:ee.approvalDate||(R==null?void 0:R.approvalDate)||"",onChange:c=>Jt({...ee,approvalDate:c.target.value}),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-lg text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500/50"}),!ye&&a.createElement("div",{className:"mt-3 bg-slate-800/30 rounded-lg p-3 border border-slate-600/30"},a.createElement("div",{className:"flex items-center space-x-3"},a.createElement("input",{type:"checkbox",id:"needs-approval-detail",checked:ee.needsApproval!==void 0?ee.needsApproval:(R==null?void 0:R.needsApproval)||!1,onChange:c=>Jt({...ee,needsApproval:c.target.checked}),className:"w-4 h-4 text-blue-600 bg-slate-700 border-slate-600 rounded focus:ring-blue-500 focus:ring-2"}),a.createElement("label",{htmlFor:"needs-approval-detail",className:"text-sm font-medium text-gray-300"},"건축물 사용 승인 알림")),a.createElement("p",{className:"text-xs text-gray-400 ml-7 mt-1"},"체크 시 승인일 미입력 알림을 받습니다")),ye&&((R==null?void 0:R.needsApproval)||ee.needsApproval)&&a.createElement("div",{className:"mt-3 bg-slate-800/30 rounded-lg p-3 border border-slate-600/30"},a.createElement("div",{className:"flex items-center space-x-2"},a.createElement(fe,{className:"w-4 h-4 text-blue-400"}),a.createElement("span",{className:"text-sm text-gray-300"},"건축물 사용 승인 알림 활성화")))),a.createElement("div",null,a.createElement("label",{className:"text-sm font-medium text-gray-400 block mb-2"},"전기 안전 점검일"),ye?a.createElement("div",{className:`${R!=null&&R.safetyCheckDate?"text-blue-300 font-mono":"text-gray-500"}`},(R==null?void 0:R.safetyCheckDate)||"미입력"):a.createElement("input",{type:"date",value:ee.safetyCheckDate||(R==null?void 0:R.safetyCheckDate)||"",onChange:c=>Jt({...ee,safetyCheckDate:c.target.value}),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-lg text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500/50"})))))),a.createElement("div",{className:`${Be} p-6`},a.createElement("div",{className:"flex items-center justify-between mb-6"},a.createElement("h3",{className:"text-lg font-semibold text-gray-100 flex items-center"},a.createElement(Lx,{className:"w-5 h-5 mr-3 text-emerald-400"}),"세금 현황"),a.createElement("button",{onClick:()=>{qe("kanban"),Nr(c=>({...c,stationSearch:R==null?void 0:R.name})),Vn(!1),wn(null)},className:"px-3 py-1.5 bg-emerald-600/20 text-emerald-300 rounded-lg hover:bg-emerald-600/30 transition-colors text-sm font-medium border border-emerald-500/30"},"전체보기")),(()=>{const c=y.filter(g=>g.stationName===(R==null?void 0:R.name)),f={취득세:c.filter(g=>g.category==="취득세"&&(g.status==="pending"||g.status==="accounting_review")),재산세:c.filter(g=>g.category==="재산세"&&(g.status==="pending"||g.status==="accounting_review")),기타세:c.filter(g=>g.category==="기타세"&&(g.status==="pending"||g.status==="accounting_review"))},p={취득세:c.filter(g=>g.category==="취득세"&&g.status==="completed"),재산세:c.filter(g=>g.category==="재산세"&&g.status==="completed"),기타세:c.filter(g=>g.category==="기타세"&&g.status==="completed")},v=c.filter(g=>g.status==="completed").reduce((g,E)=>g+V.getAmount(E.amount),0),w=c.filter(g=>g.status==="pending"||g.status==="accounting_review").reduce((g,E)=>g+V.getAmount(E.amount),0);return a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"bg-slate-800/30 rounded-xl p-4 border border-slate-600/20"},a.createElement("div",{className:"grid grid-cols-2 gap-4"},a.createElement("div",null,a.createElement("div",{className:"text-sm text-gray-400 mb-1"},"납부 완료"),a.createElement("div",{className:"text-xl font-bold text-emerald-300 font-mono"},"₩",V.formatKoreanCurrency(v))),a.createElement("div",null,a.createElement("div",{className:"text-sm text-gray-400 mb-1"},"납부 예정"),a.createElement("div",{className:"text-xl font-bold text-amber-300 font-mono"},"₩",V.formatKoreanCurrency(w))))),a.createElement("div",{className:"space-y-3"},[{category:"취득세",color:"orange",bgColor:"bg-orange-500/10",borderColor:"border-orange-500/20"},{category:"재산세",color:"blue",bgColor:"bg-blue-500/10",borderColor:"border-blue-500/20"},{category:"기타세",color:"gray",bgColor:"bg-gray-500/10",borderColor:"border-gray-500/20"}].map(({category:g,color:E,bgColor:C,borderColor:D})=>a.createElement("div",{key:g,className:`${C} rounded-lg p-3 border ${D}`},a.createElement("div",{className:"flex items-center justify-between mb-2"},a.createElement(xa,{category:g}),a.createElement("div",{className:"text-xs text-gray-400"},f[g].length+p[g].length,"건")),a.createElement("div",{className:"grid grid-cols-2 gap-2 text-xs"},a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-emerald-300"},"완료:"),a.createElement("span",{className:"text-emerald-300 font-medium"},p[g].length)),a.createElement("div",{className:"flex justify-between"},a.createElement("span",{className:"text-amber-300"},"예정:"),a.createElement("span",{className:"text-amber-300 font-medium"},f[g].length)))))))})())),a.createElement("div",{className:`${Be} p-6`},a.createElement("h3",{className:"text-lg font-semibold text-gray-100 mb-6 flex items-center"},a.createElement(df,{className:"w-5 h-5 mr-3 text-purple-400"}),"비고"),ye?a.createElement("div",{className:"bg-slate-800/30 rounded-lg p-4 border border-slate-600/20 min-h-[8rem]"},R!=null&&R.memo?a.createElement("p",{className:"text-gray-300 text-sm whitespace-pre-wrap leading-relaxed"},R.memo):a.createElement("p",{className:"text-gray-500 text-sm italic"},"작성된 비고가 없습니다.")):a.createElement("div",{className:"space-y-4"},a.createElement("textarea",{value:ee.memo||(R==null?void 0:R.memo)||"",onChange:c=>Jt({...ee,memo:c.target.value}),placeholder:"충전소에 대한 메모를 입력하세요...",className:"w-full h-32 px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-lg text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500/50 resize-none custom-scrollbar",maxLength:500}),a.createElement("div",{className:"text-xs text-gray-400 text-right"},(ee.memo||(R==null?void 0:R.memo)||"").length,"/500자"))),!ye&&a.createElement("div",{className:"flex justify-between pt-8 border-t border-slate-600/30"},a.createElement(pe,{onClick:()=>{Vn(!1),wn(null),oi(!1),Jt({})},variant:"secondary",size:"md"},"목록"),a.createElement("div",{className:"flex space-x-3"},di&&a.createElement(pe,{onClick:()=>{if(y.some(f=>f.stationName===R.name)){W(`이 충전소에 연결된 세금이 있어 삭제할 수 없습니다.
먼저 관련 세금을 삭제하거나 다른 충전소로 이전해주세요.`);return}fl(R),ml(!0)},disabled:y.some(c=>c.stationName===(R==null?void 0:R.name)),variant:"danger",size:"md",title:y.some(c=>c.stationName===(R==null?void 0:R.name))?"연결된 세금이 있어 삭제할 수 없습니다":"충전소 삭제"},"삭제"),a.createElement(pe,{onClick:async()=>{if(Object.keys(ee).length>0){const f=R,p={...R,...ee};Er(R.name,p),wn(p),b(C=>C.map(D=>D.stationName===R.name?{...D,stationName:p.name,address:p.address}:D));const v=C=>{const D=new Date(C);return D.setDate(D.getDate()+60),D.toISOString().split("T")[0]},w=(C,D,U)=>y.some(K=>K.stationName===C&&K.name===D&&K.dueDate===U&&K.category==="취득세"),g=[];if(ee.approvalDate&&ee.approvalDate.trim()!==""&&(!f.approvalDate||f.approvalDate.trim()===""||f.approvalDate!==ee.approvalDate)&&(ee.needsApproval!==void 0?ee.needsApproval:p.needsApproval)){const C=v(ee.approvalDate),D="캐노피 취득세";if(!w(p.name,D,C)){const Q={name:D,amount:"미정",dueDate:C,category:"취득세",stationName:p.name,address:p.address,status:"accounting_review",isRecurring:!1,uploadedAt:G.getKoreaToday(),completedDate:null,autoGenerated:!0,sourceType:"station_approval",sourceDate:ee.approvalDate};g.push(Q),console.log("캐노피 취득세 생성 준비 (상세 페이지):",Q)}const K=g.find(Q=>Q.name==="캐노피 취득세");bn(Q=>[...Q,{id:`approval-${Date.now()}-${Math.random()}`,type:"approval_added",stationName:p.name,date:ee.approvalDate,createdAt:G.getKoreaToday(),message:K?`${p.name} 사용 승인일이 추가되었습니다: ${ee.approvalDate}
캐노피 취득세 자동 등록 완료 (납부 기한: ${K.dueDate})`:`${p.name} 사용 승인일이 추가되었습니다: ${ee.approvalDate}`}]),console.log("상세 페이지에서 사용 승인일 알림 생성 (알림 체크됨):",p.name,ee.approvalDate)}if(ee.safetyCheckDate&&ee.safetyCheckDate.trim()!==""&&(!f.safetyCheckDate||f.safetyCheckDate.trim()===""||f.safetyCheckDate!==ee.safetyCheckDate)){const C=v(ee.safetyCheckDate),D="충전기 취득세";if(!w(p.name,D,C)){const Q={name:D,amount:"미정",dueDate:C,category:"취득세",stationName:p.name,address:p.address,status:"accounting_review",isRecurring:!1,uploadedAt:G.getKoreaToday(),completedDate:null,autoGenerated:!0,sourceType:"station_safety",sourceDate:ee.safetyCheckDate};g.push(Q),console.log("충전기 취득세 생성 준비 (상세 페이지):",Q)}const K=g.find(Q=>Q.name==="충전기 취득세");bn(Q=>[...Q,{id:`safety-${Date.now()}-${Math.random()}`,type:"safety_added",stationName:p.name,date:ee.safetyCheckDate,createdAt:G.getKoreaToday(),message:K?`${p.name} 전기 안전 점검일이 추가되었습니다: ${ee.safetyCheckDate}
충전기 취득세 자동 등록 완료 (납부 기한: ${K.dueDate})`:`${p.name} 전기 안전 점검일이 추가되었습니다: ${ee.safetyCheckDate}`}]),console.log("상세 페이지에서 안전 점검일 알림 생성:",p.name,ee.safetyCheckDate)}const E=[];for(const C of g)try{console.log(`${C.name} addBill 실행 (상세 페이지)...`);const D=await j(C);console.log(`${C.name} addBill 성공 (상세 페이지):`,D),E.push(C)}catch(D){console.error(`${C.name} addBill 실패 (상세 페이지):`,D),W(`${C.name} 자동 등록에 실패했습니다: ${D.message}`)}if(Jt({}),E.length>0){const C=E.map(D=>D.name).join(", ");te(`충전소 정보가 저장되었습니다. ${C}이(가) 자동 등록되었습니다.`)}else te("충전소 정보가 저장되었습니다.")}},disabled:Object.keys(ee).length===0,variant:"primary",size:"md"},"저장"))),ye&&a.createElement("div",{className:"flex justify-start pt-8 border-t border-slate-600/30"},a.createElement(pe,{onClick:()=>{Vn(!1),wn(null),oi(!1),Jt({})},variant:"secondary",size:"md"},"목록")))),Re==="accounts"&&!Ya&&a.createElement("div",{className:"w-full px-6 py-8"},a.createElement("div",{className:"mb-8"},a.createElement("h2",{className:"text-2xl font-bold text-gray-100 mb-2"},"계정 관리"),a.createElement("p",{className:"text-gray-400 text-sm"},"계정 관리 권한이 필요합니다.")),a.createElement("div",{className:"text-center py-12"},a.createElement(mf,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),a.createElement("p",{className:"text-gray-300 text-lg mb-4"},"계정 관리 권한이 없습니다"),a.createElement("p",{className:"text-gray-400 text-sm mb-6"},"이 기능은 관리자만 사용할 수 있습니다."),a.createElement("button",{onClick:()=>qe("dashboard"),className:"px-5 py-2 bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-xl hover:from-blue-500 hover:to-blue-400 transition-all duration-200 font-medium shadow-lg text-xs"},"메인으로 돌아가기"))),Re==="accounts"&&Ya&&a.createElement("div",{className:"w-full px-6 py-8"},a.createElement("div",{className:"mb-8"},a.createElement("h2",{className:"text-2xl font-bold text-gray-100 mb-2"},"계정 관리")),a.createElement("div",{className:"mb-8"},a.createElement("div",{className:"border-b border-slate-600/30"},a.createElement("div",{className:"flex space-x-8"},a.createElement("button",{onClick:()=>kd("users"),className:`py-3 px-1 border-b-2 font-medium text-sm transition-colors ${dl==="users"?"border-blue-500 text-blue-300":"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-300"}`},"사용자 계정"),a.createElement("button",{onClick:()=>kd("notifications"),className:`py-3 px-1 border-b-2 font-medium text-sm transition-colors ${dl==="notifications"?"border-blue-500 text-blue-300":"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-300"}`},"이메일 알림 설정")))),dl==="users"&&a.createElement(Zg,{accounts:Ft,notificationAssignments:gt,accountsPage:Fp,accountsPerPage:Up,canManageAccounts:Ya,onPageChange:zp,onNotificationChange:(c,f,p)=>{hl(p?v=>({...v,[c]:[...v[c],f]}):v=>({...v,[c]:v[c].filter(w=>w!==f)}))},onEditAccount:c=>{ll(c),Br({name:c.name,role:c.role,newPassword:"",confirmPassword:""}),sl(!0)},onDeleteAccount:c=>{al(c),nl(!0)},onCreateAccount:()=>{rl(!0),Sr({email:"",password:"",confirmPassword:"",name:"",role:"viewer"})}}),dl==="notifications"&&a.createElement("div",{className:"space-y-8"},a.createElement("div",{className:`${Be} p-6`},a.createElement("h3",{className:"text-lg font-semibold text-gray-100 mb-4 flex items-center"},a.createElement("svg",{className:"w-5 h-5 mr-3 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})),"이메일 알림 설정"),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6"},a.createElement("div",{className:"bg-slate-800/30 rounded-xl p-4 border border-slate-600/30"},a.createElement("div",{className:"flex items-center justify-between mb-3"},a.createElement("label",{className:"text-sm font-medium text-gray-300"},"이메일 알림"),a.createElement("input",{type:"checkbox",checked:dr.enabled,onChange:c=>yi(f=>({...f,enabled:c.target.checked})),className:"w-4 h-4 text-blue-600 bg-slate-700 border-slate-600 rounded focus:ring-blue-500 focus:ring-2"})),a.createElement("p",{className:"text-xs text-gray-400"},"핵심 알림만 이메일로 발송합니다 (MVP 모드)"),le.hasValidApiKey()?a.createElement("div",{className:"mt-2 flex items-center text-xs text-emerald-300"},a.createElement(fe,{className:"w-3 h-3 mr-1"}),"SendGrid 연결됨"):a.createElement("div",{className:"mt-2 flex items-center text-xs text-amber-300"},a.createElement(Qe,{className:"w-3 h-3 mr-1"}),"API 설정 필요")),a.createElement("div",{className:"bg-slate-800/30 rounded-xl p-4 border border-slate-600/30"},a.createElement("div",{className:"flex items-center justify-between mb-3"},a.createElement("label",{className:"text-sm font-medium text-gray-300"},"🚨 긴급 세금 알림"),a.createElement("input",{type:"checkbox",checked:dr.taxAlerts,onChange:c=>yi(f=>({...f,taxAlerts:c.target.checked})),disabled:!dr.enabled,className:"w-4 h-4 text-blue-600 bg-slate-700 border-slate-600 rounded focus:ring-blue-500 focus:ring-2 disabled:opacity-50"})),a.createElement("p",{className:"text-xs text-gray-400"},"납부 기한 3일 전 긴급 알림만 발송"),a.createElement("div",{className:"mt-2 text-xs text-gray-500"},"담당자: ",gt.tax_alerts.length,"명")),a.createElement("div",{className:"bg-slate-800/30 rounded-xl p-4 border border-slate-600/30"},a.createElement("div",{className:"flex items-center justify-between mb-3"},a.createElement("label",{className:"text-sm font-medium text-gray-300"},"🏢 충전소 정보 알림"),a.createElement("input",{type:"checkbox",checked:dr.stationAlerts,onChange:c=>yi(f=>({...f,stationAlerts:c.target.checked})),disabled:!dr.enabled,className:"w-4 h-4 text-blue-600 bg-slate-700 border-slate-600 rounded focus:ring-blue-500 focus:ring-2 disabled:opacity-50"})),a.createElement("div",{className:"text-xs text-gray-400 space-y-1"},a.createElement("div",null,"• 📅 승인일/점검일 최초 입력 완료 알림"),a.createElement("div",null,"• ⚠️ 승인일 미입력 알림 (30일 후)"),a.createElement("div",null,"• ⚠️ 점검일 미입력 알림 (30일 후)"),a.createElement("div",null,"• 🔄 취득세 자동 등록 안내 포함")),a.createElement("div",{className:"mt-2 text-xs text-gray-500"},"담당자: ",gt.station_alerts.length,"명"))),a.createElement("div",{className:"mt-4 p-4 bg-blue-900/20 border border-blue-500/30 rounded-lg"},a.createElement("div",{className:"flex items-start"},a.createElement("svg",{className:"w-5 h-5 text-blue-300 mr-3 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})),a.createElement("div",null,a.createElement("p",{className:"text-blue-200 font-medium text-sm"},"📧 MVP 이메일 알림 정책"),a.createElement("p",{className:"text-blue-300 text-sm mt-1"},"스팸 방지를 위해 핵심 알림만 이메일로 발송합니다:"),a.createElement("ul",{className:"text-blue-300 text-xs mt-2 space-y-1"},a.createElement("li",null,"• 🚨 ",a.createElement("strong",null,"세금 긴급 알림"),": 납부 기한 3일 전만"),a.createElement("li",null,"• 📅 ",a.createElement("strong",null,"승인일/점검일 입력 완료"),": 최초 입력 시 즉시 발송"),a.createElement("li",null,"• ⚠️ ",a.createElement("strong",null,"정보 미입력 알림"),": 승인일 30일 후, 점검일 30일 후"),a.createElement("li",null,"• 🔄 ",a.createElement("strong",null,"취득세 자동 등록"),": 날짜 입력 시 세금 자동 생성 안내"))))),!le.hasValidApiKey()&&a.createElement("div",{className:"mt-4 p-4 bg-amber-900/20 border border-amber-500/30 rounded-lg"},a.createElement("div",{className:"flex items-start"},a.createElement(Qe,{className:"w-5 h-5 text-amber-300 mr-3 flex-shrink-0 mt-0.5"}),a.createElement("div",null,a.createElement("p",{className:"text-amber-200 font-medium text-sm"},"SendGrid API 설정이 필요합니다"),a.createElement("p",{className:"text-amber-300 text-sm mt-1"},"이메일 알림을 사용하려면 API 설정에서 SendGrid를 먼저 설정해주세요."),(q==null?void 0:q.role)==="super_admin"&&a.createElement("button",{onClick:()=>qe("api-settings"),className:"mt-2 px-3 py-1 bg-amber-600/20 text-amber-200 rounded-lg hover:bg-amber-600/30 transition-colors text-sm font-medium border border-amber-500/30"},"API 설정으로 이동"))))))),Re==="api-settings"&&(q==null?void 0:q.role)==="super_admin"&&a.createElement("div",{className:"w-full px-6 py-8"},a.createElement("div",{className:"mb-8"},a.createElement("h2",{className:"text-2xl font-bold text-gray-100 mb-2"},"API 설정"),a.createElement("p",{className:"text-gray-400"},"외부 API 서비스 연동을 관리합니다")),a.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},a.createElement("div",{className:`${Be} p-6 hover:shadow-lg transition-all duration-300`},a.createElement("div",{className:"flex items-start justify-between mb-6"},a.createElement("div",{className:"flex items-center space-x-4"},a.createElement("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${Me?"bg-emerald-500/20":"bg-amber-500/20"}`},a.createElement("svg",{className:`w-6 h-6 ${Me?"text-emerald-400":"text-amber-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"}))),a.createElement("div",null,a.createElement("h3",{className:"text-lg font-semibold text-gray-100"},"Google Vision API"),a.createElement("p",{className:"text-sm text-gray-400"},"OCR 문서 자동 인식"))),a.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${Me?"bg-emerald-500/20 text-emerald-300 border-emerald-500/30":"bg-amber-500/20 text-amber-300 border-amber-500/30"}`},Me?"연결됨":"미설정")),a.createElement("div",{className:"space-y-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"API 키"),a.createElement("div",{className:"relative"},a.createElement("input",{type:Me&&et.googleVisionApiKey===Me?"password":"text",value:et.googleVisionApiKey,onChange:c=>Ha({...et,googleVisionApiKey:c.target.value}),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-gray-100 font-mono text-sm pr-12",placeholder:"Google Cloud Vision API 키를 입력하세요"}),Me&&a.createElement("button",{type:"button",onClick:()=>{et.googleVisionApiKey===Me?Ha({...et,googleVisionApiKey:""}):Ha({...et,googleVisionApiKey:Me})},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-200 transition-colors",title:et.googleVisionApiKey===Me?"숨기기":"표시"},et.googleVisionApiKey===Me?a.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})):a.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"}))))),a.createElement("div",{className:"flex space-x-3"},a.createElement("button",{onClick:Xp,disabled:!((Od=et.googleVisionApiKey)!=null&&Od.trim())||et.googleVisionApiKey===Me||ci,className:`flex-1 px-4 py-2 rounded-lg transition-all duration-200 font-medium ${!((Ld=et.googleVisionApiKey)!=null&&Ld.trim())||et.googleVisionApiKey===Me||ci?"bg-gray-600/50 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-blue-500 text-white hover:from-blue-500 hover:to-blue-400"}`},ci?"저장 중...":Me?"API 키 업데이트":"API 키 설정"),Me&&a.createElement("button",{onClick:Zp,className:"px-4 py-2 bg-red-600/20 text-red-300 rounded-lg hover:bg-red-600/30 transition-colors font-medium border border-red-500/30"},"삭제")),Me&&a.createElement("div",{className:"bg-slate-800/30 rounded-lg p-3 border border-slate-600/20"},a.createElement("div",{className:"text-xs text-gray-400 mb-1"},"현재 설정된 API 키"),a.createElement("div",{className:"text-xs font-mono text-gray-300 bg-slate-900/50 p-2 rounded"},Me.substring(0,8),"...",Me.substring(Me.length-4))))),a.createElement("div",{className:`${Be} p-6 hover:shadow-lg transition-all duration-300`},a.createElement("div",{className:"flex items-start justify-between mb-6"},a.createElement("div",{className:"flex items-center space-x-4"},a.createElement("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${le.hasValidApiKey()?"bg-emerald-500/20":"bg-amber-500/20"}`},a.createElement("svg",{className:`w-6 h-6 ${le.hasValidApiKey()?"text-emerald-400":"text-amber-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"}))),a.createElement("div",null,a.createElement("h3",{className:"text-lg font-semibold text-gray-100"},"SendGrid Email"),a.createElement("p",{className:"text-sm text-gray-400"},"자동 알림 이메일 전송"))),a.createElement("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${le.hasValidApiKey()?"bg-emerald-500/20 text-emerald-300 border-emerald-500/30":"bg-amber-500/20 text-amber-300 border-amber-500/30"}`},le.hasValidApiKey()?"연결됨":"미설정")),a.createElement("div",{className:"space-y-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"SendGrid API 키"),a.createElement("input",{type:"password",value:$e.apiKey,onChange:c=>Ua({...$e,apiKey:c.target.value}),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-gray-100 font-mono text-sm",placeholder:"SG.xxxxxxxxxx"})),a.createElement("div",{className:"grid grid-cols-1 gap-3"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"발신자 이메일"),a.createElement("input",{type:"email",value:$e.fromEmail,onChange:c=>Ua({...$e,fromEmail:c.target.value}),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-gray-100 text-sm",placeholder:"noreply@yourcompany.com"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"발신자 이름"),a.createElement("input",{type:"text",value:$e.fromName,onChange:c=>Ua({...$e,fromName:c.target.value}),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-gray-100 text-sm",placeholder:"Water TT 관리시스템"}))),a.createElement("div",{className:"flex space-x-3"},a.createElement("button",{onClick:Yp,disabled:!((Md=$e.apiKey)!=null&&Md.trim())||!((Fd=$e.fromEmail)!=null&&Fd.trim())||!((zd=$e.fromName)!=null&&zd.trim())||Zo,className:`flex-1 px-4 py-2 rounded-lg transition-all duration-200 font-medium ${!((Ud=$e.apiKey)!=null&&Ud.trim())||!((Bd=$e.fromEmail)!=null&&Bd.trim())||!((Kd=$e.fromName)!=null&&Kd.trim())||Zo?"bg-gray-600/50 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-blue-500 text-white hover:from-blue-500 hover:to-blue-400"}`},Zo?"저장 중...":"설정 저장"),le.hasValidApiKey()&&a.createElement("button",{onClick:Qp,className:"px-4 py-2 bg-red-600/20 text-red-300 rounded-lg hover:bg-red-600/30 transition-colors font-medium border border-red-500/30"},"삭제")),le.hasValidApiKey()&&a.createElement("div",{className:"bg-slate-800/30 rounded-lg p-3 border border-slate-600/20"},a.createElement("div",{className:"text-xs text-gray-400 mb-1"},"현재 설정"),a.createElement("div",{className:"text-xs space-y-1"},a.createElement("div",{className:"text-gray-300"},a.createElement("span",{className:"text-gray-400"},"API 키:")," ",le.config.apiKey.substring(0,8),"..."),a.createElement("div",{className:"text-gray-300"},a.createElement("span",{className:"text-gray-400"},"발신자:")," ",le.config.fromName," (",le.config.fromEmail,")"))),le.hasValidApiKey()&&a.createElement("div",{className:"border-t border-slate-600/30 pt-4"},a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"테스트 이메일 전송"),a.createElement("div",{className:"flex space-x-2"},a.createElement("input",{type:"email",value:kt,onChange:c=>fd(c.target.value),className:"flex-1 px-3 py-2 bg-slate-700/50 border border-slate-600/50 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500/50 text-gray-100 text-sm",placeholder:"test@example.com"}),a.createElement("button",{onClick:Jp,disabled:!(kt!=null&&kt.trim())||ei,className:`px-4 py-2 rounded-lg transition-all duration-200 font-medium text-sm ${!(kt!=null&&kt.trim())||ei?"bg-gray-600/50 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-emerald-600 to-emerald-500 text-white hover:from-emerald-500 hover:to-emerald-400"}`},ei?"전송 중...":"테스트")))))),a.createElement("div",{className:`${Be} p-6`},a.createElement("h3",{className:"text-lg font-semibold text-gray-100 mb-4 flex items-center"},a.createElement("svg",{className:"w-5 h-5 mr-3 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})),"API 설정 가이드"),a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},a.createElement("div",null,a.createElement("h4",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center"},a.createElement("svg",{className:"w-4 h-4 mr-2 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})),"Google Vision API 설정"),a.createElement("ol",{className:"text-sm text-gray-400 space-y-2 list-decimal list-inside mb-4"},a.createElement("li",null,"Google Cloud Console 접속"),a.createElement("li",null,"새 프로젝트 생성 또는 기존 프로젝트 선택"),a.createElement("li",null,"Vision API 활성화"),a.createElement("li",null,"사용자 인증 정보 → API 키 생성"),a.createElement("li",null,"생성된 API 키를 위 필드에 입력")),a.createElement("ul",{className:"text-sm text-gray-400 space-y-2"},a.createElement("li",{className:"flex items-center"},a.createElement(fe,{className:"w-4 h-4 text-emerald-400 mr-2"}),"세금 고지서 자동 인식"),a.createElement("li",{className:"flex items-center"},a.createElement(fe,{className:"w-4 h-4 text-emerald-400 mr-2"}),"금액 및 날짜 추출"),a.createElement("li",{className:"flex items-center"},a.createElement(fe,{className:"w-4 h-4 text-emerald-400 mr-2"}),"높은 정확도 OCR 분석"),a.createElement("li",{className:"flex items-center"},a.createElement(fe,{className:"w-4 h-4 text-emerald-400 mr-2"}),"PDF 파일 지원"))),a.createElement("div",null,a.createElement("h4",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center"},a.createElement("svg",{className:"w-4 h-4 mr-2 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})),"SendGrid Email 설정"),a.createElement("ol",{className:"text-sm text-gray-400 space-y-2 list-decimal list-inside mb-4"},a.createElement("li",null,"SendGrid 계정 생성 (sendgrid.com)"),a.createElement("li",null,"이메일 주소 또는 도메인 인증"),a.createElement("li",null,"API Keys → Create API Key"),a.createElement("li",null,"Full Access 또는 Mail Send 권한 선택"),a.createElement("li",null,"생성된 API 키를 복사하여 입력")),a.createElement("ul",{className:"text-sm text-gray-400 space-y-2"},a.createElement("li",{className:"flex items-center"},a.createElement(fe,{className:"w-4 h-4 text-emerald-400 mr-2"}),"납부 기한 자동 알림"),a.createElement("li",{className:"flex items-center"},a.createElement(fe,{className:"w-4 h-4 text-emerald-400 mr-2"}),"충전소 정보 미입력 알림"),a.createElement("li",{className:"flex items-center"},a.createElement(fe,{className:"w-4 h-4 text-emerald-400 mr-2"}),"HTML 이메일 템플릿"),a.createElement("li",{className:"flex items-center"},a.createElement(fe,{className:"w-4 h-4 text-emerald-400 mr-2"}),"높은 전송 성공률")))),a.createElement("div",{className:"mt-6 p-4 bg-amber-900/20 border border-amber-500/30 rounded-lg"},a.createElement("div",{className:"flex items-start"},a.createElement(Qe,{className:"w-5 h-5 text-amber-300 mr-3 flex-shrink-0 mt-0.5"}),a.createElement("div",null,a.createElement("p",{className:"text-amber-200 font-medium text-sm"},"보안 주의사항"),a.createElement("p",{className:"text-amber-300 text-sm mt-1"},"API 키는 안전하게 보관하고 외부에 노출되지 않도록 주의하세요. 정기적으로 키를 교체하는 것을 권장합니다.")))))))),_d.length>0&&a.createElement("div",{className:"fixed top-4 right-4 z-50 space-y-2"},_d.map(c=>a.createElement("div",{key:c.id,className:`max-w-sm w-full shadow-lg rounded-lg p-4 border transition-all duration-300 animate-slide-in-right ${c.type==="success"?"bg-emerald-900/90 border-emerald-500/50 text-emerald-100":c.type==="error"?"bg-red-900/90 border-red-500/50 text-red-100":c.type==="warning"?"bg-amber-900/90 border-amber-500/50 text-amber-100":"bg-blue-900/90 border-blue-500/50 text-blue-100"} backdrop-blur-md`},a.createElement("div",{className:"flex items-center"},a.createElement("div",{className:"flex-shrink-0"},c.type==="success"&&a.createElement(fe,{className:"w-5 h-5"}),c.type==="error"&&a.createElement(Qe,{className:"w-5 h-5"}),c.type==="warning"&&a.createElement(Qe,{className:"w-5 h-5"}),c.type==="info"&&a.createElement(Ll,{className:"w-5 h-5"})),a.createElement("div",{className:"ml-3 flex-1"},a.createElement("p",{className:"text-sm font-medium"},c.message)),a.createElement("button",{onClick:()=>ui(f=>f.filter(p=>p.id!==c.id)),className:"ml-4 text-gray-400 hover:text-gray-200"},a.createElement(ms,{className:"w-4 h-4"})))))),a.createElement(xt,{isOpen:si,onClose:()=>ol(!1),title:"스마트 문서 분석",size:"md",heightMode:"fixed"},tg?a.createElement("div",{className:"text-center py-8"},a.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-blue-500 border-t-transparent mx-auto mb-4"}),a.createElement("h2",{className:"text-lg font-medium text-gray-100 mb-2"},"데이터를 확인하고 있습니다"),a.createElement("p",{className:"text-gray-400 text-sm"},"잠시만 기다려주세요...")):$&&a.createElement("div",{className:"h-full flex flex-col"},a.createElement("div",{className:"flex-1 overflow-y-auto custom-scrollbar min-h-0"},a.createElement("div",{className:`mb-4 p-4 rounded-xl border ${$.error?"bg-amber-900/30 border-amber-500/30":$.confidence>.8?"bg-emerald-900/30 border-emerald-500/30":$.confidence>.6?"bg-blue-900/30 border-blue-500/30":"bg-amber-900/30 border-amber-500/30"}`},a.createElement("div",{className:"flex items-center justify-between mb-2"},a.createElement("div",{className:"flex items-center space-x-2"},$.confidence>.8?a.createElement(fe,{className:"w-5 h-5 text-emerald-400"}):$.confidence>.6?a.createElement(Wr,{className:"w-5 h-5 text-blue-400"}):a.createElement(Qe,{className:"w-5 h-5 text-amber-400"}),a.createElement("p",{className:`text-sm font-medium ${$.error?"text-amber-200":$.confidence>.8?"text-emerald-200":$.confidence>.6?"text-blue-200":"text-amber-200"}`},$.error?"⚠ 기본 분석 모드":$.confidence>.8?"✓ 고신뢰도 분석 완료":$.confidence>.6?"✓ 양호한 분석 완료":"⚠ 기본 분석 완료")),a.createElement("div",{className:"flex items-center space-x-2"},a.createElement("span",{className:`text-xs px-2 py-1 rounded ${$.error?"bg-amber-500/20 text-amber-300":$.confidence>.8?"bg-emerald-500/20 text-emerald-300":$.confidence>.6?"bg-blue-500/20 text-blue-300":"bg-amber-500/20 text-amber-300"}`},"신뢰도 ",Math.round($.confidence*100),"%"),$.method&&a.createElement("span",{className:"text-xs px-2 py-1 bg-slate-500/20 text-slate-300 rounded"},$.method==="local_analysis"?"로컬 분석":$.method==="web_api"?"웹 API":$.method==="tesseract_ocr"?"OCR":"기본값"))),$.error?a.createElement("p",{className:"text-xs text-amber-300 mb-2"},"내용을 확인하고 수정해주세요"):a.createElement("p",{className:"text-xs text-gray-400 mb-2"},$.confidence>.8?"높은 정확도로 분석되었습니다":$.confidence>.6?"양호한 정확도입니다. 일부 내용을 확인해주세요":"기본 분석입니다. 모든 내용을 확인해주세요"),$.allResults&&$.allResults.length>1&&a.createElement("details",{className:"mt-2"},a.createElement("summary",{className:"text-xs text-gray-400 cursor-pointer hover:text-gray-300"},"분석 방법 상세 보기"),a.createElement("div",{className:"mt-2 space-y-1"},$.allResults.map((c,f)=>a.createElement("div",{key:f,className:"flex items-center justify-between text-xs"},a.createElement("span",{className:"text-gray-400"},c.strategy==="googleVisionOCR"?"구글 비전 API":c.strategy==="localAnalysis"?"로컬 패턴 분석":c.strategy==="fallbackAnalysis"?"기본 분석 처리":c.strategy),a.createElement("span",{className:c.success?"text-emerald-400":"text-red-400"},c.success?`✓ ${Math.round(c.confidence*100)}%`:"✗ 실패"))))),$.extractedText&&a.createElement("details",{className:"mt-2"},a.createElement("summary",{className:"text-xs text-gray-400 cursor-pointer hover:text-gray-300"},"추출된 정보 보기"),a.createElement("div",{className:"mt-2 p-2 bg-slate-800/50 rounded border text-xs text-gray-300 font-mono max-h-20 overflow-y-auto"},$.extractedText))),a.createElement("div",{className:"space-y-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"충전소"),a.createElement("div",{className:"relative",ref:vd},a.createElement("input",{type:"text",value:$.stationName||Ye,onChange:c=>{const f=c.target.value;Dr(f),ze(!0);const p=oe.find(v=>v.name===f);p?(yt({...$,stationName:p.name,address:p.address}),ze(!1)):f||yt({...$,stationName:"",address:""})},onFocus:()=>ze(!0),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm text-sm",placeholder:"충전소 이름이나 주소로 검색..."}),Dd&&a.createElement("div",{className:"absolute z-10 w-full mt-1 bg-slate-800 border border-slate-600 rounded-xl shadow-xl max-h-48 overflow-y-auto"},xl.length>0?a.createElement(a.Fragment,null,xl.map((c,f)=>a.createElement("button",{key:f,type:"button",onClick:()=>{yt({...$,stationName:c.name,address:c.address}),Dr(""),ze(!1)},className:"w-full px-4 py-3 text-left hover:bg-slate-700/50 transition-colors border-b border-slate-700/50 last:border-b-0"},a.createElement("div",{className:"font-medium text-gray-200 text-sm"},c.name),a.createElement("div",{className:"text-gray-400 text-xs"},c.address),a.createElement("div",{className:"text-blue-300 mt-1 text-xs"},"세금 ",c.totalBills,"건 • 총 ₩",V.formatKoreanCurrency(c.totalAmount)))),a.createElement("button",{type:"button",onClick:()=>{var p;const c=((p=$.address)==null?void 0:p.split(" "))||[],f=c.length>=3?`${c[2]} 충전소`:c.length>0?`${c[c.length-1]} 충전소`:"새 충전소";nt({name:Ye||f,address:$.address||"",status:"operating",approvalDate:"",safetyCheckDate:"",registeredDate:G.getKoreaToday()}),ur(null),Qt(!0),ze(!1)},className:"w-full px-4 py-2 bg-blue-600 text-white hover:bg-blue-500 transition-colors font-medium text-sm"},a.createElement("div",{className:"flex items-center"},a.createElement(Nn,{className:"w-4 h-4 mr-2"}),a.createElement("span",null,Ye?`"${Ye}" 새 충전소로 추가`:"새 충전소 추가")))):a.createElement("div",{className:"px-4 py-6 text-center"},a.createElement("div",{className:"text-gray-400 mb-3 text-sm"},"검색 결과가 없습니다"),a.createElement("button",{type:"button",onClick:()=>{var p;const c=((p=$.address)==null?void 0:p.split(" "))||[],f=c.length>=3?`${c[2]} 충전소`:c.length>0?`${c[c.length-1]} 충전소`:"새 충전소";nt({name:Ye||f,address:$.address||"",status:"operating",approvalDate:"",safetyCheckDate:"",registeredDate:G.getKoreaToday()}),ur(null),Qt(!0),ze(!1)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-500 transition-colors font-medium text-sm"},a.createElement(Nn,{className:"w-4 h-4 mr-2 inline"}),Ye?`"${Ye}" 새 충전소로 추가`:"새 충전소 추가"))))),$.stationName&&a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"주소"),a.createElement("div",{className:"w-full px-4 py-3 bg-slate-700/30 border border-slate-600/30 rounded-xl text-gray-300 text-sm"},$.address)),a.createElement("div",{className:"grid grid-cols-2 gap-3"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"세금 분류"),a.createElement("select",{value:$.category,onChange:c=>yt({...$,category:c.target.value}),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm text-sm"},a.createElement("option",{value:"취득세"},"취득세"),a.createElement("option",{value:"재산세"},"재산세"),a.createElement("option",{value:"기타세"},"기타세"))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"납부 기한"),a.createElement("input",{type:"date",value:$.dueDate,onChange:c=>yt({...$,dueDate:c.target.value}),min:Gr.getDueDateRange().min,max:Gr.getDueDateRange().max,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm text-sm"}))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"세금 제목"),a.createElement("input",{type:"text",value:$.name,onChange:c=>yt({...$,name:c.target.value}),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm text-sm",placeholder:"예: 충전기 취득세"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"납부 금액"),a.createElement("input",{type:"text",value:$.amount,onChange:c=>{const f=Ve.sanitizeInput(c.target.value);yt({...$,amount:f})},className:`w-full px-4 py-3 bg-slate-700/50 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm font-mono text-sm ${$.amount&&!Ve.isValidAmount($.amount)?"border-red-500/50":"border-slate-600/50"}`,placeholder:"금액을 입력하세요. 비워두면 '미정'으로 처리됩니다"}),$.amount&&!Ve.isValidAmount($.amount)&&a.createElement("div",{className:"mt-2 p-2 bg-red-900/20 border border-red-500/30 rounded-lg"},a.createElement("p",{className:"text-red-200 text-xs flex items-center"},a.createElement(Qe,{className:"w-3 h-3 mr-1"}),Ve.getAmountErrorMessage($.amount)))),($.category==="재산세"||$.category==="기타세")&&a.createElement("div",{className:"bg-slate-800/30 rounded-xl p-4 border border-slate-600/30"},a.createElement("div",{className:"flex items-center space-x-3"},a.createElement("input",{type:"checkbox",id:"recurring-analysis",checked:$.isRecurring||!1,onChange:c=>yt({...$,isRecurring:c.target.checked}),className:"w-4 h-4 text-blue-600 bg-slate-700 border-slate-600 rounded focus:ring-blue-500 focus:ring-2"}),a.createElement("label",{htmlFor:"recurring-analysis",className:"text-sm font-medium text-gray-300"},"매년 반복 납부"),a.createElement("div",{className:"relative group"},a.createElement("div",{className:"w-4 h-4 bg-slate-600 rounded-full flex items-center justify-center cursor-help",onMouseEnter:()=>Cr("recurring-analysis"),onMouseLeave:()=>Cr(null),onClick:()=>Cr(Gn==="recurring-analysis"?null:"recurring-analysis")},a.createElement("span",{className:"text-xs text-slate-300"},"?")),a.createElement("div",{className:`absolute bottom-6 left-1/2 transform -translate-x-1/2 transition-opacity duration-200 z-10 ${Gn==="recurring-analysis"?"opacity-100":"opacity-0 pointer-events-none"}`},a.createElement("div",{className:"bg-slate-900 text-white text-xs rounded-lg px-3 py-2 shadow-lg border border-slate-700 whitespace-nowrap"},a.createElement("div",{className:"space-y-1"},a.createElement("div",null,"• 매년 같은 날짜로 자동 생성"),a.createElement("div",null,"• 미래 납부는 금액 '미정'"),a.createElement("div",null,"• 총 6년치 자동 생성 (현재년도 포함)")),a.createElement("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-900"})))))))),a.createElement("div",{className:"flex-shrink-0 flex space-x-3 mt-6 pt-4 border-t border-slate-600/30"},a.createElement("button",{onClick:()=>ol(!1),className:"flex-1 px-4 py-3 border border-slate-600/50 rounded-xl text-gray-300 hover:bg-slate-700/30 transition-all duration-200 font-medium text-sm"},"취소"),a.createElement("button",{onClick:Tg,disabled:!((Vd=$==null?void 0:$.name)!=null&&Vd.trim())||!($!=null&&$.dueDate)||!((Wd=$==null?void 0:$.stationName)!=null&&Wd.trim())||!($!=null&&$.category)||($==null?void 0:$.amount)&&!Ve.isValidAmount($.amount),className:`flex-1 px-4 py-3 rounded-xl transition-all duration-200 font-medium shadow-lg text-sm ${!((Hd=$==null?void 0:$.name)!=null&&Hd.trim())||!($!=null&&$.dueDate)||!((Gd=$==null?void 0:$.stationName)!=null&&Gd.trim())||!($!=null&&$.category)||$!=null&&$.amount&&!Ve.isValidAmount($.amount)?"bg-gray-600/50 text-gray-400 cursor-not-allowed opacity-50":"bg-gradient-to-r from-blue-600 to-blue-500 text-white hover:from-blue-500 hover:to-blue-400"}`},"등록")))),a.createElement(xt,{isOpen:li,onClose:()=>{xn(!1),Yn(null),rt({name:"",amount:"",dueDate:"",category:"",stationName:"",address:""}),Dr(""),ze(!1)},title:Fe?"세금 정보 수정":"세금 정보 입력",heightMode:"fixed"},a.createElement("div",{className:"flex flex-col h-full"},a.createElement("div",{className:"flex-shrink-0 mb-4"},Fe&&a.createElement("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-xl p-3 mb-4"},a.createElement("p",{className:"text-blue-200 text-sm"},"기존 세금 정보를 수정합니다."))),a.createElement("div",{className:"flex-1 overflow-y-auto custom-scrollbar min-h-0"},a.createElement("div",{className:`space-y-4 ${L?"space-y-6":""}`},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"충전소"),Fe?a.createElement("div",{className:"w-full px-4 py-3 bg-gray-600/30 border border-gray-500/30 rounded-xl text-gray-300 text-sm cursor-not-allowed"},H.stationName):a.createElement("div",{className:"relative",ref:yd},a.createElement("input",{type:"text",value:H.stationName||Ye,onChange:c=>{const f=c.target.value;Dr(f),ze(!0);const p=oe.find(v=>v.name===f);p?(rt({...H,stationName:p.name,address:p.address}),ze(!1)):f||rt({...H,stationName:"",address:""})},onFocus:()=>ze(!0),className:`w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm ${L?"h-12 text-base":""}`,placeholder:"충전소 이름이나 주소로 검색..."}),Dd&&a.createElement("div",{className:"absolute z-10 w-full mt-1 bg-slate-800 border border-slate-600 rounded-xl shadow-xl max-h-48 overflow-y-auto"},xl.length>0?a.createElement(a.Fragment,null,xl.map((c,f)=>a.createElement("button",{key:f,type:"button",onClick:()=>{rt({...H,stationName:c.name,address:c.address}),Dr(""),ze(!1)},className:`w-full px-4 py-3 text-left hover:bg-slate-700/50 transition-colors border-b border-slate-700/50 last:border-b-0 ${L?"py-4":""}`},a.createElement("div",{className:`font-medium text-gray-200 ${L?"text-base":"text-sm"}`},c.name),a.createElement("div",{className:`text-gray-400 ${L?"text-sm mt-1":"text-xs"}`},c.address),a.createElement("div",{className:`text-blue-300 mt-1 ${L?"text-sm":"text-xs"}`},"세금 ",c.totalBills,"건 • 총 ₩",V.formatKoreanCurrency(c.totalAmount)))),a.createElement("button",{type:"button",onClick:()=>{Qt(!0),ur(null),nt({name:Ye,address:"",status:"operating",approvalDate:"",safetyCheckDate:"",registeredDate:G.getKoreaToday()}),ze(!1)},className:`px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-500 transition-colors font-medium ${L?"py-3 text-base":"text-sm"}`},a.createElement("div",{className:"flex items-center"},a.createElement(Nn,{className:`mr-2 ${L?"w-5 h-5":"w-4 h-4"}`}),a.createElement("span",null,Ye?`"${Ye}" 새 충전소로 추가`:"새 충전소 추가")))):a.createElement("div",{className:`px-4 py-6 text-center ${L?"py-8":""}`},a.createElement("div",{className:`text-gray-400 mb-3 ${L?"text-base":"text-sm"}`},"검색 결과가 없습니다"),a.createElement("button",{type:"button",onClick:()=>{Qt(!0),ur(null),nt({name:Ye,address:"",status:"operating"}),ze(!1)},className:`px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-500 transition-colors font-medium ${L?"py-3 text-base":"text-sm"}`},a.createElement(Nn,{className:`mr-2 inline ${L?"w-5 h-5":"w-4 h-4"}`}),Ye?`"${Ye}" 새 충전소로 추가`:"새 충전소 추가"))))),H.stationName&&H.stationName!=="__new__"&&a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"주소"),a.createElement("div",{className:`w-full px-4 py-3 rounded-xl text-sm ${Fe?"bg-gray-600/30 border border-gray-500/30 text-gray-300 cursor-not-allowed":"bg-slate-700/30 border border-slate-600/30 text-gray-300"} ${L?"h-12 text-base":""}`},H.address)),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"세금 제목"),a.createElement("input",{type:"text",value:H.name,onChange:c=>rt({...H,name:c.target.value}),className:`w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm ${L?"h-12 text-base":""}`,placeholder:"예: 충전기 취득세"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"세금 분류"),Fe?a.createElement("div",{className:`w-full px-4 py-3 bg-gray-600/30 border border-gray-500/30 rounded-xl text-gray-300 text-sm cursor-not-allowed ${L?"h-12 text-base":""}`},H.category):a.createElement("select",{value:H.category,onChange:c=>rt({...H,category:c.target.value}),className:`w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm ${L?"h-12 text-base":""}`},a.createElement("option",{value:""},"선택하세요"),a.createElement("option",{value:"취득세"},"취득세"),a.createElement("option",{value:"재산세"},"재산세"),a.createElement("option",{value:"기타세"},"기타세"))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"납부 기한"),a.createElement("input",{type:"date",value:H.dueDate,onChange:c=>rt({...H,dueDate:c.target.value}),min:Gr.getDueDateRange().min,max:Gr.getDueDateRange().max,className:`w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm ${L?"h-12 text-base":""}`})),!Fe&&(H.category==="재산세"||H.category==="기타세")&&a.createElement("div",{className:"bg-slate-800/30 rounded-xl p-4 border border-slate-600/30"},a.createElement("div",{className:"flex items-center space-x-3"},a.createElement("input",{type:"checkbox",id:"recurring",checked:H.isRecurring||!1,onChange:c=>rt({...H,isRecurring:c.target.checked}),className:"w-4 h-4 text-blue-600 bg-slate-700 border-slate-600 rounded focus:ring-blue-500 focus:ring-2"}),a.createElement("label",{htmlFor:"recurring",className:"text-sm font-medium text-gray-300"},"매년 반복 납부"),a.createElement("div",{className:"relative group"},a.createElement("div",{className:"w-4 h-4 bg-slate-600 rounded-full flex items-center justify-center cursor-help",onMouseEnter:()=>Cr("recurring"),onMouseLeave:()=>Cr(null),onClick:()=>Cr(Gn==="recurring"?null:"recurring")},a.createElement("span",{className:"text-xs text-slate-300"},"?")),a.createElement("div",{className:`absolute bottom-6 left-1/2 transform -translate-x-1/2 transition-opacity duration-200 z-10 ${Gn==="recurring"?"opacity-100":"opacity-0 pointer-events-none"}`},a.createElement("div",{className:"bg-slate-900 text-white text-xs rounded-lg px-3 py-2 shadow-lg border border-slate-700 whitespace-nowrap"},a.createElement("div",{className:"space-y-1"},a.createElement("div",null,"• 매년 같은 날짜로 자동 생성"),a.createElement("div",null,"• 미래 납부는 금액 '미정'"),a.createElement("div",null,"• 반복 해제 시 미래 납부 삭제")),a.createElement("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-900"})))))),Fe&&Fe.isRecurring&&a.createElement("div",{className:"bg-slate-800/30 rounded-xl p-4 border border-slate-600/30"},a.createElement("div",{className:"flex items-center space-x-3"},a.createElement("input",{type:"checkbox",id:"recurring-edit",checked:H.isRecurring!==!1,onChange:c=>rt({...H,isRecurring:c.target.checked}),className:"w-4 h-4 text-blue-600 bg-slate-700 border-slate-600 rounded focus:ring-blue-500 focus:ring-2",disabled:!Fe.isOriginal}),a.createElement("label",{htmlFor:"recurring-edit",className:"text-sm font-medium text-gray-300"},"매년 반복 납부 ",Fe.isOriginal?"":"(연결됨)"),a.createElement("div",{className:"relative group"},a.createElement("div",{className:"w-4 h-4 bg-slate-600 rounded-full flex items-center justify-center cursor-help",onMouseEnter:()=>Cr("recurring-edit"),onMouseLeave:()=>Cr(null),onClick:()=>Cr(Gn==="recurring-edit"?null:"recurring-edit")},a.createElement("span",{className:"text-xs text-slate-300"},"?")),a.createElement("div",{className:`absolute bottom-6 left-1/2 transform -translate-x-1/2 transition-opacity duration-200 z-10 ${Gn==="recurring-edit"?"opacity-100":"opacity-0 pointer-events-none"}`},a.createElement("div",{className:"bg-slate-900 text-white text-xs rounded-lg px-3 py-2 shadow-lg border border-slate-700 whitespace-nowrap"},a.createElement("div",{className:"space-y-1"},Fe.isOriginal?a.createElement(a.Fragment,null,a.createElement("div",null,"• 반복 해제 시 미래 납부 삭제"),a.createElement("div",null,"• 정보 변경 시 미래 납부 반영")):a.createElement(a.Fragment,null,a.createElement("div",null,"• 반복 시리즈의 일부"),a.createElement("div",null,"• 원본에서만 반복 설정 변경"))),a.createElement("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-900"})))))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"납부 금액"),a.createElement("input",{type:"text",value:H.amount,onChange:c=>{const f=Ve.sanitizeInput(c.target.value);rt({...H,amount:f})},className:`w-full px-4 py-3 bg-slate-700/50 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm font-mono ${L?"h-12 text-base":""} ${H.amount&&!Ve.isValidAmount(H.amount)?"border-red-500/50":"border-slate-600/50"}`,placeholder:"금액을 입력하세요. 비워두면 '미정'으로 처리됩니다"}),H.amount&&!Ve.isValidAmount(H.amount)&&a.createElement("div",{className:"mt-2 p-3 bg-red-900/20 border border-red-500/30 rounded-lg"},a.createElement("p",{className:"text-red-200 text-sm flex items-center"},a.createElement(Qe,{className:"w-4 h-4 mr-2"}),Ve.getAmountErrorMessage(H.amount)))))),a.createElement("div",{className:`flex-shrink-0 flex space-x-3 ${L?"mt-8 sticky bottom-0 bg-slate-800/95 backdrop-blur-sm p-4 -m-4 border-t border-slate-700/50":"mt-8"}`},a.createElement("button",{onClick:()=>{xn(!1),Yn(null),rt({name:"",amount:"",dueDate:"",category:"",stationName:"",address:""}),Dr(""),ze(!1)},className:`flex-1 px-4 py-3 border border-slate-600/50 rounded-xl text-gray-300 hover:bg-slate-700/30 transition-all duration-200 font-medium ${L?"h-12 text-base":""}`},"취소"),Fe&&di&&a.createElement("button",{onClick:()=>{Kn(Fe),O(Fe.id),xn(!1),Yn(null),rt({name:"",amount:"",dueDate:"",category:"",stationName:"",address:"",isRecurring:!1}),Dr(""),ze(!1)},className:`flex-1 px-4 py-3 bg-gradient-to-r from-red-600 to-red-500 text-white rounded-xl hover:from-red-500 hover:to-red-400 transition-all duration-200 font-medium shadow-lg ${L?"h-12 text-base":""}`},"삭제"),a.createElement("button",{onClick:Fe?$g:Ag,disabled:!H.name||!H.dueDate||!H.stationName||!H.category||H.amount&&!Ve.isValidAmount(H.amount),className:`flex-1 px-4 py-3 rounded-xl transition-all duration-200 font-medium shadow-lg ${L?"h-12 text-base":""} ${!H.name||!H.dueDate||!H.stationName||!H.category||H.amount&&!Ve.isValidAmount(H.amount)?"bg-gray-600/50 text-gray-400 cursor-not-allowed opacity-50":"bg-gradient-to-r from-emerald-600 to-emerald-500 text-white hover:from-emerald-500 hover:to-emerald-400"}`},Fe?"수정":"등록")))),a.createElement(xt,{isOpen:Ap,onClose:()=>{Qt(!1),ur(null),nt({name:"",address:"",status:"operating",approvalDate:"",safetyCheckDate:"",registeredDate:new Date().toISOString().split("T")[0]})},title:it?"충전소 정보 수정":"충전소 추가",heightMode:"auto"},(()=>{const c=it?ot.some(p=>p.name.toLowerCase()===F.name.toLowerCase()&&p.name!==it.name):ot.some(p=>p.name.toLowerCase()===F.name.toLowerCase()),f=F.name&&F.address&&!c;return a.createElement("div",{className:"space-y-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"충전소명"),a.createElement("input",{type:"text",value:F.name,onChange:p=>{const v=p.target.value;v.length<=30&&nt({...F,name:v})},maxLength:30,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm",placeholder:"예: 강남역 충전소 (최대 30자)"}),a.createElement("div",{className:"mt-1 text-xs text-gray-400 text-right"},F.name.length,"/30자"),c&&F.name&&a.createElement("div",{className:"mt-2 p-3 bg-red-900/20 border border-red-500/30 rounded-lg"},a.createElement("p",{className:"text-red-200 text-sm flex items-center"},a.createElement(Qe,{className:"w-4 h-4 mr-2"}),"이미 존재하는 충전소명입니다. 다른 이름을 사용해주세요."))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"주소"),a.createElement("input",{type:"text",value:F.address,onChange:p=>nt({...F,address:p.target.value}),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm",placeholder:"예: 서울특별시 강남구 테헤란로 123"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"운영 상태"),a.createElement("select",{value:F.status,onChange:p=>nt({...F,status:p.target.value}),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm"},a.createElement("option",{value:"preparing"},"오픈 예정"),a.createElement("option",{value:"operating"},"운영 중"),a.createElement("option",{value:"closed"},"운영 종료"))),a.createElement("div",{className:"bg-slate-800/30 rounded-xl p-4 border border-slate-600/30"},a.createElement("div",{className:"flex items-center space-x-3 mb-3"},a.createElement("input",{type:"checkbox",id:"needs-approval-new",checked:F.needsApproval||!1,onChange:p=>nt({...F,needsApproval:p.target.checked,approvalDate:p.target.checked?F.approvalDate:""}),className:"w-4 h-4 text-blue-600 bg-slate-700 border-slate-600 rounded focus:ring-blue-500 focus:ring-2"}),a.createElement("label",{htmlFor:"needs-approval-new",className:"text-sm font-medium text-gray-300"},"건축물 사용 승인 필요")),a.createElement("p",{className:"text-xs text-gray-400 ml-7"},"체크 시 건축물 사용 승인일 입력이 필요하며, 미입력 시 알림을 받습니다")),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"건축물 사용 승인일"),a.createElement("input",{type:"date",value:F.approvalDate,onChange:p=>nt({...F,approvalDate:p.target.value}),disabled:!F.needsApproval,min:Gr.getGeneralDateRange().min,max:Gr.getGeneralDateRange().max,className:`w-full px-4 py-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-gray-100 backdrop-blur-sm transition-all ${F.needsApproval?"bg-slate-700/50 border border-slate-600/50 focus:border-blue-500/50":"bg-gray-600/30 border border-gray-500/30 text-gray-500 cursor-not-allowed"}`}),!F.needsApproval&&a.createElement("p",{className:"text-xs text-gray-500 mt-1"},"승인이 필요한 경우 위 체크박스를 선택해주세요")),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"전기 안전 점검일 (필수)"),a.createElement("input",{type:"date",value:F.safetyCheckDate,onChange:p=>nt({...F,safetyCheckDate:p.target.value}),min:Gr.getGeneralDateRange().min,max:Gr.getGeneralDateRange().max,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm"}),a.createElement("p",{className:"text-xs text-gray-400 mt-1"},"모든 충전소는 전기 안전 점검이 필수입니다")),a.createElement("div",{className:"flex space-x-3 mt-8"},a.createElement("button",{onClick:()=>{Qt(!1),ur(null),nt({name:"",address:"",status:"operating",approvalDate:"",safetyCheckDate:""})},className:"flex-1 px-4 py-3 border border-slate-600/50 rounded-xl text-gray-300 hover:bg-slate-700/30 transition-all duration-200 font-medium"},"취소"),it&&di&&a.createElement("button",{onClick:()=>{if(y.some(v=>v.stationName===it.name)){alert(`이 충전소에 연결된 세금이 있어 삭제할 수 없습니다.
먼저 관련 세금을 삭제하거나 다른 충전소로 이전해주세요.`);return}Fa(it.name),Qt(!1),ur(null),nt({name:"",address:"",status:"operating",approvalDate:"",safetyCheckDate:""})},className:`flex-1 px-4 py-3 rounded-xl transition-all duration-200 font-medium shadow-lg ${y.some(p=>p.stationName===(it==null?void 0:it.name))?"bg-gray-500 cursor-not-allowed opacity-50":"bg-gradient-to-r from-red-600 to-red-500 text-white hover:from-red-500 hover:to-red-400"}`},"삭제"),a.createElement("button",{onClick:it?Rg:jg,disabled:!f,className:`flex-1 px-4 py-3 rounded-xl transition-all duration-200 font-medium shadow-lg ${f?"bg-gradient-to-r from-blue-600 to-blue-500 text-white hover:from-blue-500 hover:to-blue-400":"bg-gray-600/50 text-gray-400 cursor-not-allowed opacity-50"}`},it?"수정":"추가")))})()),a.createElement(xt,{isOpen:$p,onClose:()=>xd(!1),title:`${(qd=mi[0])!=null&&qd.dueDate||(Yd=Cd[0])!=null&&Yd.stationName||(Qd=fi[0])!=null&&Qd.completedDate?((Jd=mi[0])==null?void 0:Jd.dueDate)||((Xd=fi[0])==null?void 0:Xd.completedDate)||new Date().toISOString().split("T")[0]:""} 일정`,size:"xl",heightMode:"fixed"},a.createElement(vg,{selectedDateBills:mi,selectedCompletedBills:fi,selectedStationEvents:Cd,utils:V})),a.createElement(xt,{isOpen:jp,onClose:()=>wd(!1),title:"납부 완료 세금",size:"xl",heightMode:"fixed"},Jn("completed").length===0?a.createElement("div",{className:"text-center py-12"},a.createElement(fe,{className:"w-16 h-16 mx-auto mb-4 text-gray-500"}),a.createElement("p",{className:"text-gray-400 text-lg mb-2"},"완료된 세금이 없습니다"),a.createElement("p",{className:"text-gray-500 text-sm"},"납부 완료된 세금 정보가 여기에 표시됩니다")):a.createElement("div",{className:"h-full flex flex-col"},a.createElement("div",{className:"flex items-center space-x-3 mb-6 flex-shrink-0"},a.createElement(fe,{className:"w-6 h-6 text-emerald-400"}),a.createElement("span",{className:"bg-emerald-500/20 text-emerald-300 px-3 py-1 rounded-full text-sm font-medium"},Jn("completed").length,"개 완료")),a.createElement("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-2 pr-2 min-h-0"},Jn("completed").map(c=>a.createElement(jf,{key:c.id,bill:c,onStatusChange:ye?null:T,onClick:ye?null:Pd}))),a.createElement("div",{className:"flex justify-center pt-6 mt-4 border-t border-slate-600/50 flex-shrink-0"},a.createElement("button",{onClick:()=>wd(!1),className:"px-6 py-2 border border-slate-600/50 rounded-xl text-gray-300 hover:bg-slate-700/30 transition-colors font-medium"},"닫기")))),a.createElement(xt,{isOpen:Pp,onClose:()=>il(!1),title:"휴지통",size:"lg",heightMode:"fixed"},we.length===0?a.createElement("div",{className:"text-center py-12"},a.createElement(Fl,{className:"w-16 h-16 mx-auto mb-4 text-gray-500"}),a.createElement("p",{className:"text-gray-400 text-lg mb-2"},"휴지통이 비어있습니다"),a.createElement("p",{className:"text-gray-500 text-sm"},"삭제된 세금 정보가 여기에 표시됩니다")):a.createElement(a.Fragment,null,a.createElement("div",{className:"flex items-center space-x-3 mb-6"},a.createElement(Fl,{className:"w-6 h-6 text-red-400"}),a.createElement("span",{className:"bg-red-500/20 text-red-300 px-3 py-1 rounded-full text-sm font-medium"},we.length,"개 항목")),a.createElement("div",{className:"bg-amber-900/20 border border-amber-500/30 rounded-xl p-4 mb-6"},a.createElement("p",{className:"text-amber-200 text-sm flex items-center"},a.createElement(Qe,{className:"w-4 h-4 mr-2"}),"삭제된 항목은 3일 후 자동으로 영구 삭제됩니다")),a.createElement("div",{className:"space-y-3 max-h-96 overflow-y-auto custom-scrollbar mb-6"},we.map(c=>{const f=new Date(c.deletedAt),w=3-Math.floor((new Date-f)/(1e3*60*60*24));return a.createElement("div",{key:c.id,className:"bg-slate-700/30 rounded-xl p-4 border border-slate-600/30"},a.createElement("div",{className:"flex items-start justify-between mb-3"},a.createElement("div",null,a.createElement("h3",{className:"font-medium text-gray-100 mb-1"},c.name),a.createElement("div",{className:"text-sm text-gray-300 mb-1"},c.stationName),a.createElement("div",{className:"text-xs text-gray-400"},c.address)),a.createElement(xa,{category:c.category})),a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,a.createElement("div",{className:"text-sm font-mono text-gray-300"},"₩ ",V.formatAmount(c.amount)),a.createElement("div",{className:"text-xs text-gray-500"},f.toLocaleDateString("ko-KR",{timeZone:"Asia/Seoul"})," 삭제 • ",w,"일 후 영구삭제")),a.createElement("div",{className:"flex space-x-2"},a.createElement("button",{onClick:()=>{const g=kr(c);j(g)},className:"px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-500 transition-colors text-sm font-medium"},"복원"),a.createElement("button",{onClick:()=>za(c.id),className:"px-3 py-1 bg-red-600 text-white rounded-lg hover:bg-red-500 transition-colors text-sm font-medium"},"영구삭제"))))})),a.createElement("div",{className:"flex justify-between items-center pt-4 border-t border-slate-600/50"},a.createElement("button",{onClick:()=>il(!1),className:"px-6 py-2 border border-slate-600/50 rounded-xl text-gray-300 hover:bg-slate-700/30 transition-colors font-medium"},"닫기"),a.createElement("button",{onClick:_r,className:"px-6 py-2 bg-red-600 text-white rounded-xl hover:bg-red-500 transition-colors font-medium"},"휴지통 비우기")))),a.createElement(xt,{isOpen:Rp,onClose:()=>Va(!1),title:"충전소 상세 정보",heightMode:"auto"},zt&&a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},a.createElement("div",{className:Be+" p-4"},a.createElement("h3",{className:"text-lg font-semibold text-gray-100 mb-4"},"기본 정보"),a.createElement("div",{className:"space-y-3"},a.createElement("div",null,a.createElement("label",{className:"text-sm font-medium text-gray-400"},"충전소명"),a.createElement("div",{className:"text-gray-100 font-medium"},zt.name)),a.createElement("div",null,a.createElement("label",{className:"text-sm font-medium text-gray-400"},"주소"),a.createElement("div",{className:"text-gray-100 text-sm"},zt.address)),a.createElement("div",null,a.createElement("label",{className:"text-sm font-medium text-gray-400"},"운영 상태"),a.createElement("div",null,a.createElement("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${zt.status==="operating"?"bg-emerald-500/20 text-emerald-300 border-emerald-500/30":zt.status==="preparing"?"bg-amber-500/20 text-amber-300 border-amber-500/30":"bg-gray-500/20 text-gray-300 border-gray-500/30"}`},a.createElement("div",{className:`w-2 h-2 rounded-full mr-2 ${zt.status==="operating"?"bg-emerald-500 animate-pulse":zt.status==="preparing"?"bg-amber-500":"bg-gray-500"}`}),zt.status==="operating"?"운영 중":zt.status==="preparing"?"오픈 예정":"운영 종료"))))),a.createElement("div",{className:Be+" p-4"},a.createElement("h3",{className:"text-lg font-semibold text-gray-100 mb-4"},"세금 현황"),a.createElement("div",{className:"space-y-4"},(()=>{const c=y.filter(v=>v.stationName===zt.name),f={취득세:c.filter(v=>v.category==="취득세"&&(v.status==="pending"||v.status==="accounting_review")).length,재산세:c.filter(v=>v.category==="재산세"&&(v.status==="pending"||v.status==="accounting_review")).length,기타세:c.filter(v=>v.category==="기타세"&&(v.status==="pending"||v.status==="accounting_review")).length},p={취득세:c.filter(v=>v.category==="취득세"&&v.status==="completed").length,재산세:c.filter(v=>v.category==="재산세"&&v.status==="completed").length,기타세:c.filter(v=>v.category==="기타세"&&v.status==="completed").length};return a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement("h4",{className:"text-sm font-medium text-amber-300 mb-2"},"납부 예정"),a.createElement("div",{className:"space-y-2 bg-amber-900/10 rounded-lg p-3 border border-amber-500/20"},a.createElement("div",{className:"flex justify-between items-center"},a.createElement("span",{className:"text-sm text-gray-300"},"취득세"),a.createElement("span",{className:"bg-orange-500/20 text-orange-300 px-2 py-1 rounded text-xs font-medium"},f.취득세)),a.createElement("div",{className:"flex justify-between items-center"},a.createElement("span",{className:"text-sm text-gray-300"},"재산세"),a.createElement("span",{className:"bg-blue-500/20 text-blue-300 px-2 py-1 rounded text-xs font-medium"},f.재산세)),a.createElement("div",{className:"flex justify-between items-center"},a.createElement("span",{className:"text-sm text-gray-300"},"기타세"),a.createElement("span",{className:"bg-gray-500/20 text-gray-300 px-2 py-1 rounded text-xs font-medium"},f.기타세)))),a.createElement("div",null,a.createElement("h4",{className:"text-sm font-medium text-emerald-300 mb-2"},"납부 완료"),a.createElement("div",{className:"space-y-2 bg-emerald-900/10 rounded-lg p-3 border border-emerald-500/20"},a.createElement("div",{className:"flex justify-between items-center"},a.createElement("span",{className:"text-sm text-gray-300"},"취득세"),a.createElement("span",{className:"bg-orange-500/20 text-orange-300 px-2 py-1 rounded text-xs font-medium"},p.취득세)),a.createElement("div",{className:"flex justify-between items-center"},a.createElement("span",{className:"text-sm text-gray-300"},"재산세"),a.createElement("span",{className:"bg-blue-500/20 text-blue-300 px-2 py-1 rounded text-xs font-medium"},p.재산세)),a.createElement("div",{className:"flex justify-between items-center"},a.createElement("span",{className:"text-sm text-gray-300"},"기타세"),a.createElement("span",{className:"bg-gray-500/20 text-gray-300 px-2 py-1 rounded text-xs font-medium"},p.기타세)))),a.createElement("div",{className:"pt-3 border-t border-slate-600/30"},a.createElement("div",{className:"flex justify-between items-center"},a.createElement("span",{className:"text-sm font-medium text-gray-300"},"총 납부 금액"),a.createElement("span",{className:"text-xl font-bold text-emerald-300 font-mono"},"₩ ",V.formatKoreanCurrency(c.filter(v=>v.status==="completed").reduce((v,w)=>v+V.getAmount(w.amount),0))))))})()))),a.createElement("div",{className:"flex space-x-3 pt-4 border-t border-slate-600/50"},a.createElement("button",{onClick:()=>Va(!1),className:"flex-1 px-4 py-3 border border-slate-600/50 rounded-xl text-gray-300 hover:bg-slate-700/30 transition-all duration-200 font-medium"},"닫기"),a.createElement("button",{onClick:()=>{Va(!1),ye||Pg(zt)},disabled:ye,className:`flex-1 px-4 py-3 rounded-xl transition-all duration-200 font-medium shadow-lg ${ye?"bg-gray-600/50 text-gray-400 cursor-not-allowed opacity-50":"bg-gradient-to-r from-blue-600 to-blue-500 text-white hover:from-blue-500 hover:to-blue-400"}`},"정보 수정"),a.createElement("button",{onClick:()=>{Va(!1),qe("kanban"),Nr(c=>({...c,stationSearch:zt.name}))},className:"flex-1 px-4 py-3 bg-gradient-to-r from-emerald-600 to-emerald-500 text-white rounded-xl hover:from-emerald-500 hover:to-emerald-400 transition-all duration-200 font-medium shadow-lg"},"세금 보기")))),Op&&a.createElement("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex z-50"},a.createElement("div",{className:"flex-1",onClick:()=>Wa(!1)}),a.createElement("div",{className:"w-96 bg-gradient-to-b from-slate-800 to-slate-900 shadow-2xl border-l border-slate-700/50 flex flex-col animate-slide-in-right"},a.createElement("div",{className:"flex items-center justify-between p-6 border-b border-slate-700/50"},a.createElement("div",{className:"flex items-center space-x-3"},a.createElement(Ll,{className:"w-5 h-5 text-blue-400"}),a.createElement("h2",{className:"text-lg font-semibold text-gray-100"},"리마인더"),Qn>0&&a.createElement("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"})),a.createElement("button",{onClick:()=>Wa(!1),className:"p-2 hover:bg-slate-700/50 rounded-lg transition-colors text-gray-400 hover:text-gray-200"},a.createElement(ms,{className:"w-5 h-5"}))),a.createElement("div",{className:"flex-1 p-6 overflow-y-auto custom-scrollbar"},a.createElement("div",{className:"flex items-center justify-between mb-4"},a.createElement("div",{className:"text-sm text-gray-300"},a.createElement("span",{className:"font-medium text-blue-300"},Qn,"개")," 새로운 알림"),a.createElement("button",{onClick:Qn>0?Ng:void 0,className:`text-xs px-3 py-1 rounded-lg transition-colors ${Qn===0?"text-gray-500 opacity-50 cursor-not-allowed":"text-gray-400 hover:text-gray-200 hover:bg-slate-700/30"}`},"모두 읽음")),a.createElement("div",{className:"space-y-4"},vl.notifications.length>0?vl.notifications.map(c=>a.createElement("button",{key:c.id,onClick:()=>Eg(c.type,c.stationName,c.id),className:`w-full rounded-xl p-4 transition-all duration-200 text-left border ${c.isRead?"bg-slate-800/30 border-slate-700/30 text-gray-400":"bg-slate-700/50 border-slate-600/50 text-gray-200 hover:bg-slate-600/50"}`},a.createElement("div",{className:"flex items-start justify-between"},a.createElement("div",{className:"flex-1"},a.createElement("div",{className:"flex items-center space-x-2 mb-1"},a.createElement("div",{className:"text-sm font-medium"},c.title),c.priority==="high"&&!c.isRead&&a.createElement("span",{className:"px-2 py-0.5 bg-red-500/20 text-red-300 text-xs rounded-full border border-red-500/30"},"긴급")),(c.type==="prepare_notice"||c.type==="ready_notice"||c.type==="final_notice")&&a.createElement("div",{className:`text-xs mb-1 ${c.type==="final_notice"?"text-red-300":c.type==="ready_notice"?"text-amber-300":"text-blue-300"}`},c.data.bill.status==="accounting_review"&&a.createElement("span",{className:"inline-flex items-center px-2 py-0.5 bg-amber-500/20 text-amber-300 text-xs rounded-full border border-amber-500/30 mr-2"},"회계사 검토"),"납부 기한: ",c.data.bill.dueDate," • 금액: ₩",V.formatAmount(c.data.bill.amount),c.data.bill.amount==="미정"&&a.createElement("span",{className:"text-amber-300 ml-1"},"(금액 확인 필요)")),(c.type==="missing_approval"||c.type==="missing_safety")&&a.createElement("div",{className:"text-xs text-gray-400 mb-1"},"등록일: ",c.data.station.registeredDate," • ",c.data.daysSinceRegistered,"일째 미입력"),a.createElement("div",{className:"text-xs text-gray-500"},new Date(c.createdAt).toLocaleDateString("ko-KR"))),!c.isRead&&a.createElement("div",{className:`w-3 h-3 rounded-full flex-shrink-0 ${c.priority==="high"?"bg-red-500 animate-pulse":c.priority==="medium"?"bg-amber-500":"bg-blue-500"}`})))):a.createElement("div",{className:"text-center py-8"},a.createElement(fe,{className:"w-12 h-12 mx-auto mb-3 text-gray-500"}),a.createElement("p",{className:"text-gray-400 text-sm"},"새로운 알림이 없습니다")))))),a.createElement(xt,{isOpen:lg,onClose:()=>gl(!1),title:"세금 CSV 일괄 등록",size:"lg",heightMode:"fixed"},og?a.createElement("div",{className:"text-center py-12"},a.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-purple-500 border-t-transparent mx-auto mb-4"}),a.createElement("h2",{className:"text-lg font-medium text-gray-100 mb-2"},"등록 중"),a.createElement("p",{className:"text-gray-400"},"세금 정보를 등록하고 있습니다...")):a.createElement("div",null,a.createElement("div",{className:"mb-6 p-4 bg-gradient-to-r from-purple-900/30 to-purple-800/20 rounded-xl border border-purple-500/30"},a.createElement("p",{className:"text-sm text-purple-200 font-medium mb-2"},"📋 CSV 파일 형식"),a.createElement("div",{className:"text-xs text-gray-400 space-y-1"},a.createElement("div",null,"• 컬럼 순서: 세금제목, 충전소명, 세금분류, 납부기한, 납부금액(선택), 상태(선택), 반복납부(선택)"),a.createElement("div",null,"• 세금분류: 취득세, 재산세, 기타세"),a.createElement("div",null,"• 납부기한: YYYY-MM-DD 형식 (예: 2024-12-31)"),a.createElement("div",null,"• 납부금액: 숫자만 입력하거나 비워두면 '미정'"),a.createElement("div",null,"• 상태: 회계사 검토, 납부 예정, 납부 완료 (비워두면 기본값 적용)"),a.createElement("div",null,"• 반복납부: Y/N, 예/아니오, true/false (재산세/기타세만 가능, 취득세는 무시됨)"),a.createElement("div",null,"• 충전소명은 기존 등록된 충전소와 정확히 일치해야 합니다"))),a.createElement("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-900/30 to-blue-800/20 rounded-xl border border-blue-500/30"},a.createElement("p",{className:"text-sm text-blue-200 font-medium"},"CSV 파일 분석 완료"),a.createElement("div",{className:"flex items-center space-x-4 mt-2 text-xs"},a.createElement("span",{className:"text-blue-300"},"전체: ",Bt.length,"개"),a.createElement("span",{className:"text-emerald-300"},"등록 가능: ",Bt.filter(c=>c.isValid).length,"개"),Bt.filter(c=>!c.isValid).length>0&&a.createElement("span",{className:"text-red-300"},"오류: ",Bt.filter(c=>!c.isValid).length,"개"))),a.createElement("div",{className:"space-y-3 max-h-64 overflow-y-auto custom-scrollbar mb-6"},Bt.map((c,f)=>a.createElement("div",{key:f,className:`p-4 rounded-xl border ${c.isValid?"bg-emerald-900/20 border-emerald-500/30":"bg-red-900/20 border-red-500/30"}`},a.createElement("div",{className:"flex items-center justify-between mb-2"},a.createElement("div",{className:"font-medium text-gray-100"},c.name),a.createElement("span",{className:`text-xs px-2 py-1 rounded-lg font-medium ${c.isValid?"bg-emerald-500/20 text-emerald-300":"bg-red-500/20 text-red-300"}`},c.isValid?"유효":"오류")),a.createElement("div",{className:"grid grid-cols-2 gap-4 text-sm"},a.createElement("div",null,a.createElement("div",{className:"text-gray-400 text-xs"},"충전소"),a.createElement("div",{className:"text-gray-200"},c.stationName)),a.createElement("div",null,a.createElement("div",{className:"text-gray-400 text-xs"},"분류"),a.createElement("div",{className:"text-gray-200"},c.category)),a.createElement("div",null,a.createElement("div",{className:"text-gray-400 text-xs"},"납부기한"),a.createElement("div",{className:"text-gray-200 font-mono"},c.dueDate)),a.createElement("div",null,a.createElement("div",{className:"text-gray-400 text-xs"},"금액"),a.createElement("div",{className:"text-gray-200 font-mono"},"₩",V.formatAmount(c.amount)))),a.createElement("div",{className:"grid grid-cols-2 gap-4 text-sm mt-3 pt-3 border-t border-slate-600/30"},a.createElement("div",null,a.createElement("div",{className:"text-gray-400 text-xs"},"상태"),a.createElement("div",{className:`text-sm font-medium ${c.status==="completed"?"text-emerald-300":c.status==="accounting_review"?"text-amber-300":"text-blue-300"}`},c.status==="completed"?"납부 완료":c.status==="accounting_review"?"회계사 검토":"납부 예정")),a.createElement("div",null,a.createElement("div",{className:"text-gray-400 text-xs"},"반복 납부"),a.createElement("div",{className:`text-sm font-medium ${c.isRecurring?"text-blue-300":"text-gray-400"}`},c.category==="취득세"?"일회성 (고정)":c.isRecurring?"매년 반복":"일회성",c.isRecurring&&c.category!=="취득세"&&a.createElement("span",{className:"text-xs text-blue-400 ml-1"},"(6년치 생성)")))),!c.isValid&&c.validationErrors&&a.createElement("div",{className:"mt-3 space-y-1"},c.validationErrors.map((p,v)=>a.createElement("div",{key:v,className:"text-xs text-red-300 flex items-center"},a.createElement(Qe,{className:"w-3 h-3 mr-1 flex-shrink-0"}),p)))))),a.createElement("div",{className:"flex space-x-3"},a.createElement("button",{onClick:()=>{pi([]),gl(!1)},className:"flex-1 px-4 py-3 border border-slate-600/50 rounded-xl text-gray-300 hover:bg-slate-700/30 transition-all duration-200 font-medium"},"취소"),a.createElement("button",{onClick:Cg,disabled:Bt.filter(c=>c.isValid).length===0,className:`flex-1 px-4 py-3 rounded-xl transition-all duration-200 font-medium shadow-lg ${Bt.filter(c=>c.isValid).length===0?"bg-gray-600/50 text-gray-400 cursor-not-allowed opacity-50":"bg-gradient-to-r from-purple-600 to-purple-500 text-white hover:from-purple-500 hover:to-purple-400"}`},(()=>{const c=Bt.filter(p=>p.isValid).length,f=Bt.length;return c===0?"등록할 항목이 없습니다":c===f?`${c}개 세금 등록`:`${c}개 세금 등록 (${f-c}개 제외)`})())))),a.createElement(xt,{isOpen:eg,onClose:()=>pl(!1),title:"CSV 일괄 등록",size:"lg",heightMode:"fixed"},sg?a.createElement("div",{className:"text-center py-12"},a.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-blue-500 border-t-transparent mx-auto mb-4"}),a.createElement("h2",{className:"text-lg font-medium text-gray-100 mb-2"},"등록 중"),a.createElement("p",{className:"text-gray-400"},"충전소 정보를 등록하고 있습니다...")):a.createElement("div",null,a.createElement("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-900/30 to-blue-800/20 rounded-xl border border-blue-500/30"},a.createElement("p",{className:"text-sm text-blue-200 font-medium"},"CSV 파일 분석 완료"),a.createElement("div",{className:"flex items-center space-x-4 mt-2 text-xs"},a.createElement("span",{className:"text-blue-300"},"전체: ",Ut.length,"개"),a.createElement("span",{className:"text-emerald-300"},"등록 가능: ",Ut.filter(c=>c.isValid).length,"개"),Ut.filter(c=>!c.isValid).length>0&&a.createElement("span",{className:"text-red-300"},"오류: ",Ut.filter(c=>!c.isValid).length,"개"))),a.createElement("div",{className:"space-y-3 max-h-64 overflow-y-auto custom-scrollbar mb-6"},Ut.map((c,f)=>a.createElement("div",{key:f,className:`p-3 rounded-xl border ${c.isValid?"bg-emerald-900/20 border-emerald-500/30":"bg-red-900/20 border-red-500/30"}`},a.createElement("div",{className:"flex items-center justify-between mb-2"},a.createElement("div",{className:"font-medium text-gray-100"},c.name),a.createElement("span",{className:`text-xs px-2 py-1 rounded-lg font-medium ${c.isValid?"bg-emerald-500/20 text-emerald-300":"bg-red-500/20 text-red-300"}`},c.isValid?"유효":"오류")),a.createElement("div",{className:"text-sm text-gray-300"},c.address),a.createElement("div",{className:"text-xs text-gray-400 mt-1"},"상태: ",c.status==="operating"?"운영 중":c.status==="preparing"?"오픈 예정":c.status==="closed"?"운영 종료":`${c.status} (원본: ${c.originalStatus||""})`),!c.isValid&&c.validationErrors&&a.createElement("div",{className:"mt-2 space-y-1"},c.validationErrors.map((p,v)=>a.createElement("div",{key:v,className:"text-xs text-red-300 flex items-center"},a.createElement(Qe,{className:"w-3 h-3 mr-1 flex-shrink-0"}),p)))))),a.createElement("div",{className:"flex space-x-3"},a.createElement("button",{onClick:()=>{hi([]),pl(!1)},className:"flex-1 px-4 py-3 border border-slate-600/50 rounded-xl text-gray-300 hover:bg-slate-700/30 transition-all duration-200 font-medium"},"취소"),a.createElement("button",{onClick:Sg,disabled:Ut.filter(c=>c.isValid).length===0,className:`flex-1 px-4 py-3 rounded-xl transition-all duration-200 font-medium shadow-lg ${Ut.filter(c=>c.isValid).length===0?"bg-gray-600/50 text-gray-400 cursor-not-allowed opacity-50":"bg-gradient-to-r from-emerald-600 to-emerald-500 text-white hover:from-emerald-500 hover:to-emerald-400"}`},(()=>{const c=Ut.filter(p=>p.isValid).length,f=Ut.length;return c===0?"등록할 항목이 없습니다":c===f?`${c}개 충전소 등록`:`${c}개 충전소 등록 (${f-c}개 제외)`})())))),a.createElement(xt,{isOpen:Vp,onClose:()=>{Wp(!1),Kp(null)},title:`${tt==="tax"?"세금 알림":tt==="station"?"충전소 일정 알림":""} 담당자 관리`,size:"lg",heightMode:"fixed"},tt&&a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:`p-4 rounded-xl border ${tt==="tax"?"bg-orange-900/20 border-orange-500/30":"bg-blue-900/20 border-blue-500/30"}`},a.createElement("div",{className:"flex items-center space-x-3 mb-2"},tt==="tax"&&a.createElement(Qe,{className:"w-5 h-5 text-orange-400"}),tt==="station"&&a.createElement(Wr,{className:"w-5 h-5 text-blue-400"}),a.createElement("h4",{className:`font-medium ${tt==="tax"?"text-orange-200":"text-blue-200"}`},tt==="tax"?"세금 알림":"충전소 일정 알림")),a.createElement("p",{className:`text-sm ${tt==="tax"?"text-orange-300":"text-blue-300"}`},tt==="tax"?"납부 기한 임박 알림을 받을 담당자를 관리합니다":"사용 승인일, 안전 점검일 미입력 알림을 받을 담당자를 관리합니다")),a.createElement("div",null,a.createElement("h5",{className:"text-lg font-medium text-gray-200 mb-4"},"현재 담당자 (",tt==="tax"?gt.tax_alerts.length:tt==="pricing"?gt.pricing_alerts.length:gt.station_alerts.length,"명)"),a.createElement("div",{className:"space-y-3 max-h-64 overflow-y-auto custom-scrollbar"},(()=>{const c=tt==="tax"?gt.tax_alerts:gt.station_alerts;return c.length===0?a.createElement("div",{className:"text-center py-8 text-gray-400"},a.createElement(Vr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.createElement("p",null,"지정된 담당자가 없습니다"),a.createElement("p",{className:"text-sm mt-1"},"아래에서 담당자를 추가해주세요")):c.map(f=>{const p=Ft.find(v=>v.id===f);return p?a.createElement("div",{key:f,className:"flex items-center justify-between p-3 bg-slate-700/30 rounded-lg border border-slate-600/30"},a.createElement("div",{className:"flex items-center space-x-3"},a.createElement("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-500 rounded-lg flex items-center justify-center"},a.createElement(Vr,{className:"w-5 h-5 text-white"})),a.createElement("div",null,a.createElement("div",{className:"font-medium text-gray-200"},p.name),a.createElement("div",{className:"text-sm text-gray-400 font-mono"},p.email))),a.createElement("div",{className:"flex items-center space-x-3"},a.createElement("span",{className:`text-xs px-2 py-1 rounded ${p.role==="super_admin"?"bg-purple-500/20 text-purple-300":p.role==="admin"?"bg-red-500/20 text-red-300":p.role==="editor"?"bg-blue-500/20 text-blue-300":"bg-gray-500/20 text-gray-300"}`},p.role==="super_admin"?"슈퍼 관리자":p.role==="admin"?"관리자":p.role==="editor"?"편집자":"뷰어"),a.createElement("button",{onClick:()=>{const v=tt==="tax"?"tax_alerts":"station_alerts";hl(w=>({...w,[v]:w[v].filter(g=>g!==f)}))},className:"p-1 text-red-400 hover:text-red-300 hover:bg-red-900/20 rounded transition-colors",title:"담당자에서 제거"},a.createElement(ms,{className:"w-4 h-4"})))):null}).filter(Boolean)})())),a.createElement("div",null,a.createElement("h5",{className:"text-lg font-medium text-gray-200 mb-4"},"담당자 추가"),a.createElement("div",{className:"space-y-3 max-h-48 overflow-y-auto custom-scrollbar"},Ft.filter(c=>{const f=tt==="tax"?gt.tax_alerts:gt.station_alerts;return c.status==="active"&&!f.includes(c.id)}).map(c=>a.createElement("div",{key:c.id,className:"flex items-center justify-between p-3 bg-slate-800/30 rounded-lg border border-slate-600/30 hover:bg-slate-700/30 transition-colors"},a.createElement("div",{className:"flex items-center space-x-3"},a.createElement("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-600 to-gray-500 rounded-lg flex items-center justify-center"},a.createElement(Vr,{className:"w-5 h-5 text-white"})),a.createElement("div",null,a.createElement("div",{className:"font-medium text-gray-200"},c.name),a.createElement("div",{className:"text-sm text-gray-400 font-mono"},c.email))),a.createElement("div",{className:"flex items-center space-x-3"},a.createElement("span",{className:`text-xs px-2 py-1 rounded ${c.role==="super_admin"?"bg-purple-500/20 text-purple-300":c.role==="admin"?"bg-red-500/20 text-red-300":c.role==="editor"?"bg-blue-500/20 text-blue-300":"bg-gray-500/20 text-gray-300"}`},c.role==="super_admin"?"슈퍼 관리자":c.role==="admin"?"관리자":c.role==="editor"?"편집자":"뷰어"),a.createElement("button",{onClick:()=>{const f=tt==="tax"?"tax_alerts":"station_alerts";hl(p=>({...p,[f]:[...p[f],c.id]}))},className:"px-3 py-1 bg-blue-600/20 text-blue-300 rounded-lg hover:bg-blue-600/30 transition-colors text-sm font-medium border border-blue-500/30"},"추가")))),Ft.filter(c=>{const f=tt==="tax"?gt.tax_alerts:gt.station_alerts;return c.status==="active"&&!f.includes(c.id)}).length===0&&a.createElement("div",{className:"text-center py-6 text-gray-400"},a.createElement(fe,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.createElement("p",{className:"text-sm"},"모든 활성 계정이 담당자로 지정되었습니다")))))),a.createElement(xt,{isOpen:Np,onClose:()=>{sl(!1),ll(null),Br({name:"",role:"",newPassword:"",confirmPassword:""})},title:"계정 정보 수정",size:"md",heightMode:"auto"},kp?a.createElement("div",{className:"text-center py-12"},a.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-blue-500 border-t-transparent mx-auto mb-4"}),a.createElement("h2",{className:"text-lg font-medium text-gray-100 mb-2"},"계정 수정 중"),a.createElement("p",{className:"text-gray-400"},"계정 정보를 업데이트하고 있습니다...")):Ba&&a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-xl p-4"},a.createElement("p",{className:"text-blue-200 text-sm"},"계정 정보를 수정합니다. 빈 패스워드 필드는 기존 패스워드를 유지합니다.")),a.createElement("div",{className:"space-y-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"이름 *"),a.createElement("input",{type:"text",value:de.name,onChange:c=>Br({...de,name:c.target.value}),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm",placeholder:"사용자 이름을 입력하세요"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"이메일"),a.createElement("input",{type:"email",value:Ba.email,disabled:!0,className:"w-full px-4 py-3 bg-gray-600/30 border border-gray-500/30 rounded-xl text-gray-400 cursor-not-allowed backdrop-blur-sm"}),a.createElement("p",{className:"text-xs text-gray-500 mt-1"},"이메일은 변경할 수 없습니다")),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"역할"),a.createElement("select",{value:de.role,onChange:c=>Br({...de,role:c.target.value}),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm"},a.createElement("option",{value:"viewer"},"뷰어 - 조회만 가능"),a.createElement("option",{value:"editor"},"편집자 - 세금/충전소 편집 가능"),a.createElement("option",{value:"admin"},"관리자 - 모든 권한"))),a.createElement("div",{className:"border-t border-slate-600/30 pt-4"},a.createElement("h4",{className:"text-sm font-medium text-gray-300 mb-3"},"패스워드 변경 (선택사항)"),a.createElement("div",{className:"space-y-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"새 패스워드"),a.createElement("input",{type:"password",value:de.newPassword,onChange:c=>Br({...de,newPassword:c.target.value}),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm",placeholder:"새 패스워드 (비워두면 기존 패스워드 유지)"})),de.newPassword&&a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"새 패스워드 확인"),a.createElement("input",{type:"password",value:de.confirmPassword,onChange:c=>Br({...de,confirmPassword:c.target.value}),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm",placeholder:"새 패스워드를 다시 입력하세요"}))))),a.createElement("div",{className:"flex space-x-3 pt-4 border-t border-slate-600/50"},a.createElement("button",{onClick:()=>{sl(!1),ll(null),Br({name:"",role:"",newPassword:"",confirmPassword:""})},className:"flex-1 px-4 py-3 border border-slate-600/50 rounded-xl text-gray-300 hover:bg-slate-700/30 transition-all duration-200 font-medium"},"취소"),a.createElement("button",{onClick:wg,disabled:!de.name||de.newPassword&&(de.newPassword.length<6||de.newPassword!==de.confirmPassword),className:`flex-1 px-4 py-3 rounded-xl transition-all duration-200 font-medium shadow-lg ${!de.name||de.newPassword&&(de.newPassword.length<6||de.newPassword!==de.confirmPassword)?"bg-gray-600/50 text-gray-400 cursor-not-allowed opacity-50":"bg-gradient-to-r from-blue-600 to-blue-500 text-white hover:from-blue-500 hover:to-blue-400"}`},"수정 완료")))),a.createElement(xt,{isOpen:bp,onClose:()=>{nl(!1),al(null)},title:"계정 삭제 확인",size:"sm",heightMode:"auto"},Ep?a.createElement("div",{className:"text-center py-8"},a.createElement("div",{className:"animate-spin rounded-full h-10 w-10 border-2 border-red-500 border-t-transparent mx-auto mb-4"}),a.createElement("p",{className:"text-gray-300"},"계정을 삭제하고 있습니다...")):cr&&a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"bg-red-900/20 border border-red-500/30 rounded-xl p-4"},a.createElement("div",{className:"flex items-center"},a.createElement(Qe,{className:"w-5 h-5 text-red-300 mr-3 flex-shrink-0"}),a.createElement("div",null,a.createElement("p",{className:"text-red-200 font-medium"},"정말로 삭제하시겠습니까?"),a.createElement("p",{className:"text-red-300 text-sm mt-1"},"이 작업은 되돌릴 수 없습니다.")))),a.createElement("div",{className:"bg-slate-700/30 rounded-xl p-4 border border-slate-600/30"},a.createElement("div",{className:"text-sm text-gray-300"},a.createElement("div",{className:"font-medium text-gray-100 mb-2"},"삭제할 계정 정보:"),a.createElement("div",{className:"space-y-1"},a.createElement("div",null,"이름: ",a.createElement("span",{className:"font-medium"},cr.name)),a.createElement("div",null,"이메일: ",a.createElement("span",{className:"font-mono"},cr.email)),a.createElement("div",null,"역할: ",a.createElement("span",{className:"font-medium"},cr.role==="super_admin"?"슈퍼 관리자":cr.role==="admin"?"관리자":cr.role==="editor"?"편집자":"뷰어"))))),a.createElement("div",{className:"flex space-x-3 pt-2"},a.createElement("button",{onClick:()=>{nl(!1),al(null)},className:"flex-1 px-4 py-3 border border-slate-600/50 rounded-xl text-gray-300 hover:bg-slate-700/30 transition-all duration-200 font-medium"},"취소"),a.createElement("button",{onClick:bg,className:"flex-1 px-4 py-3 bg-gradient-to-r from-red-600 to-red-500 text-white rounded-xl hover:from-red-500 hover:to-red-400 transition-all duration-200 font-medium shadow-lg"},"삭제")))),a.createElement(xt,{isOpen:xp,onClose:()=>{rl(!1),Sr({email:"",password:"",confirmPassword:"",name:"",role:"viewer"})},title:"새 계정 생성",size:"md",heightMode:"auto"},wp?a.createElement("div",{className:"text-center py-12"},a.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-blue-500 border-t-transparent mx-auto mb-4"}),a.createElement("h2",{className:"text-lg font-medium text-gray-100 mb-2"},"계정 생성 중"),a.createElement("p",{className:"text-gray-400"},"새로운 계정을 생성하고 있습니다...")):a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"space-y-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"이름 *"),a.createElement("input",{type:"text",value:re.name,onChange:c=>Sr({...re,name:c.target.value}),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm",placeholder:"사용자 이름을 입력하세요"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"이메일 *"),a.createElement("input",{type:"email",value:re.email,onChange:c=>Sr({...re,email:c.target.value}),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm",placeholder:"이메일 주소를 입력하세요"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"역할"),a.createElement("select",{value:re.role,onChange:c=>Sr({...re,role:c.target.value}),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm"},a.createElement("option",{value:"viewer"},"뷰어 - 조회만 가능"),a.createElement("option",{value:"editor"},"편집자 - 세금/충전소 편집 가능"),a.createElement("option",{value:"admin"},"관리자 - 모든 권한"))),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"패스워드 *"),a.createElement("input",{type:"password",value:re.password,onChange:c=>Sr({...re,password:c.target.value}),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm",placeholder:"패스워드를 입력하세요 (최소 6자)"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"패스워드 확인 *"),a.createElement("input",{type:"password",value:re.confirmPassword,onChange:c=>Sr({...re,confirmPassword:c.target.value}),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm",placeholder:"패스워드를 다시 입력하세요"}))),a.createElement("div",{className:"flex space-x-3 pt-4 border-t border-slate-600/50"},a.createElement("button",{onClick:()=>{rl(!1),Sr({email:"",password:"",confirmPassword:"",name:"",role:"viewer"})},className:"flex-1 px-4 py-3 border border-slate-600/50 rounded-xl text-gray-300 hover:bg-slate-700/30 transition-all duration-200 font-medium"},"취소"),a.createElement("button",{onClick:xg,disabled:!re.email||!re.password||!re.confirmPassword||!re.name||re.password.length<6||re.password!==re.confirmPassword,className:`flex-1 px-4 py-3 rounded-xl transition-all duration-200 font-medium shadow-lg ${!re.email||!re.password||!re.confirmPassword||!re.name||re.password.length<6||re.password!==re.confirmPassword?"bg-gray-600/50 text-gray-400 cursor-not-allowed opacity-50":"bg-gradient-to-r from-blue-600 to-blue-500 text-white hover:from-blue-500 hover:to-blue-400"}`},"계정 생성")))),a.createElement(xt,{isOpen:Bp,onClose:()=>{ml(!1),fl(null)},title:"충전소 삭제 확인",size:"sm",heightMode:"auto"},Wn&&a.createElement("div",{className:"space-y-4"},a.createElement("div",{className:"bg-red-900/20 border border-red-500/30 rounded-xl p-4"},a.createElement("div",{className:"flex items-center"},a.createElement(Qe,{className:"w-5 h-5 text-red-300 mr-3 flex-shrink-0"}),a.createElement("div",null,a.createElement("p",{className:"text-red-200 font-medium"},"정말로 삭제하시겠습니까?"),a.createElement("p",{className:"text-red-300 text-sm mt-1"},"이 작업은 되돌릴 수 없습니다.")))),a.createElement("div",{className:"bg-slate-700/30 rounded-xl p-4 border border-slate-600/30"},a.createElement("div",{className:"text-sm text-gray-300"},a.createElement("div",{className:"font-medium text-gray-100 mb-2"},"삭제할 충전소:"),a.createElement("div",{className:"space-y-1"},a.createElement("div",null,"충전소명: ",a.createElement("span",{className:"font-medium"},Wn.name)),a.createElement("div",null,"주소: ",a.createElement("span",{className:"text-xs"},Wn.address)),a.createElement("div",null,"상태: ",a.createElement("span",{className:"font-medium"},Wn.status==="operating"?"운영 중":Wn.status==="preparing"?"오픈 예정":"운영 종료"))))),a.createElement("div",{className:"flex space-x-3 pt-2"},a.createElement("button",{onClick:()=>{ml(!1),fl(null)},className:"flex-1 px-4 py-3 border border-slate-600/50 rounded-xl text-gray-300 hover:bg-slate-700/30 transition-all duration-200 font-medium"},"취소"),a.createElement("button",{onClick:()=>{Fa(Wn.name),Vn(!1),wn(null),oi(!1),Jt({}),ml(!1),fl(null),te("충전소가 삭제되었습니다.")},className:"flex-1 px-4 py-3 bg-gradient-to-r from-red-600 to-red-500 text-white rounded-xl hover:from-red-500 hover:to-red-400 transition-all duration-200 font-medium shadow-lg"},"삭제")))),a.createElement(xt,{isOpen:Lp,onClose:()=>{cl(!1),setTimeout(()=>{qa({currentPassword:"",newPassword:"",confirmPassword:""})},300)},title:"내 정보",size:"md",heightMode:"fixed"},a.createElement("div",{className:"space-y-6"},a.createElement("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-900/20 to-blue-800/10 rounded-xl border border-blue-500/20"},a.createElement("div",{className:"flex items-center space-x-4"},a.createElement("div",{className:fr.getAvatarClass(q==null?void 0:q.role,"lg")},a.createElement(Vr,{className:"w-8 h-8 text-white"})),a.createElement("div",null,a.createElement("div",{className:"text-lg font-semibold text-gray-100"},(q==null?void 0:q.name)||"사용자"),a.createElement("div",{className:"text-sm text-gray-400 font-mono"},(q==null?void 0:q.email)||"unknown@email.com"),a.createElement("div",{className:`text-xs mt-1 font-medium ${fr.getRoleConfig(q==null?void 0:q.role).textColor}`},fr.getRoleConfig(q==null?void 0:q.role).label))),a.createElement("button",{onClick:()=>{e(!1),n(null),qe("login"),cl(!1)},className:"px-4 py-2 bg-gradient-to-r from-red-600 to-red-500 text-white rounded-lg hover:from-red-500 hover:to-red-400 transition-all duration-200 font-medium text-sm shadow-lg"},"로그아웃")),a.createElement("div",{className:Be+" p-4"},a.createElement("h3",{className:"text-lg font-semibold text-gray-100 mb-4"},"패스워드 변경"),a.createElement("div",{className:"space-y-4"},a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"현재 패스워드"),a.createElement("input",{key:"current-password",type:"password",value:pt.currentPassword,onChange:c=>{const f=c.target.value;qa(p=>({...p,currentPassword:f}))},autoComplete:"current-password",className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm",placeholder:"현재 패스워드를 입력하세요"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"새 패스워드"),a.createElement("input",{key:"new-password",type:"password",value:pt.newPassword,onChange:c=>{const f=c.target.value;qa(p=>({...p,newPassword:f}))},autoComplete:"new-password",className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm",placeholder:"새 패스워드를 입력하세요"})),a.createElement("div",null,a.createElement("label",{className:"block text-sm font-medium text-gray-300 mb-2"},"새 패스워드 확인"),a.createElement("input",{key:"confirm-password",type:"password",value:pt.confirmPassword,onChange:c=>{const f=c.target.value;qa(p=>({...p,confirmPassword:f}))},autoComplete:"new-password",className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 text-gray-100 backdrop-blur-sm",placeholder:"새 패스워드를 다시 입력하세요"}))),a.createElement("div",{className:"mt-6"},a.createElement("button",{onClick:()=>{qa({currentPassword:"",newPassword:"",confirmPassword:""}),te("패스워드가 성공적으로 변경되었습니다.")},disabled:!pt.currentPassword||!pt.newPassword||!pt.confirmPassword||pt.newPassword.length<6||pt.newPassword!==pt.confirmPassword,className:`w-full px-4 py-3 rounded-xl transition-all duration-200 font-medium shadow-lg ${!pt.currentPassword||!pt.newPassword||!pt.confirmPassword||pt.newPassword.length<6||pt.newPassword!==pt.confirmPassword?"bg-gray-600/50 text-gray-400 cursor-not-allowed opacity-50":"bg-gradient-to-r from-blue-600 to-blue-500 text-white hover:from-blue-500 hover:to-blue-400"}`},"패스워드 변경"))))))};window.supabase=vE;const PE=document.getElementById("root"),jE=Vh(PE);jE.render(a.createElement(a.StrictMode,null,a.createElement($E,null)));
